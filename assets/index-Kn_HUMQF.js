(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const s of i.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function t(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerPolicy&&(i.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?i.credentials="include":o.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(o){if(o.ep)return;o.ep=!0;const i=t(o);fetch(o.href,i)}})();/**
* @vue/shared v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function Qi(n){const e=Object.create(null);for(const t of n.split(","))e[t]=1;return t=>t in e}const se={},En=[],Tt=()=>{},Eu=()=>!1,po=n=>n.charCodeAt(0)===111&&n.charCodeAt(1)===110&&(n.charCodeAt(2)>122||n.charCodeAt(2)<97),Ji=n=>n.startsWith("onUpdate:"),He=Object.assign,Xi=(n,e)=>{const t=n.indexOf(e);t>-1&&n.splice(t,1)},wu=Object.prototype.hasOwnProperty,X=(n,e)=>wu.call(n,e),$=Array.isArray,wn=n=>mo(n)==="[object Map]",Bc=n=>mo(n)==="[object Set]",j=n=>typeof n=="function",Ce=n=>typeof n=="string",zt=n=>typeof n=="symbol",ue=n=>n!==null&&typeof n=="object",Kc=n=>(ue(n)||j(n))&&j(n.then)&&j(n.catch),qc=Object.prototype.toString,mo=n=>qc.call(n),_u=n=>mo(n).slice(8,-1),$c=n=>mo(n)==="[object Object]",Zi=n=>Ce(n)&&n!=="NaN"&&n[0]!=="-"&&""+parseInt(n,10)===n,Wn=Qi(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),yo=n=>{const e=Object.create(null);return t=>e[t]||(e[t]=n(t))},Su=/-(\w)/g,$t=yo(n=>n.replace(Su,(e,t)=>t?t.toUpperCase():"")),Iu=/\B([A-Z])/g,gn=yo(n=>n.replace(Iu,"-$1").toLowerCase()),Gc=yo(n=>n.charAt(0).toUpperCase()+n.slice(1)),Jo=yo(n=>n?`on${Gc(n)}`:""),Bt=(n,e)=>!Object.is(n,e),Xo=(n,...e)=>{for(let t=0;t<n.length;t++)n[t](...e)},zc=(n,e,t,r=!1)=>{Object.defineProperty(n,e,{configurable:!0,enumerable:!1,writable:r,value:t})},vu=n=>{const e=parseFloat(n);return isNaN(e)?n:e};let wa;const Co=()=>wa||(wa=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function es(n){if($(n)){const e={};for(let t=0;t<n.length;t++){const r=n[t],o=Ce(r)?Ou(r):es(r);if(o)for(const i in o)e[i]=o[i]}return e}else if(Ce(n)||ue(n))return n}const bu=/;(?![^(]*\))/g,Ru=/:([^]+)/,ku=/\/\*[^]*?\*\//g;function Ou(n){const e={};return n.replace(ku,"").split(bu).forEach(t=>{if(t){const r=t.split(Ru);r.length>1&&(e[r[0].trim()]=r[1].trim())}}),e}function ts(n){let e="";if(Ce(n))e=n;else if($(n))for(let t=0;t<n.length;t++){const r=ts(n[t]);r&&(e+=r+" ")}else if(ue(n))for(const t in n)n[t]&&(e+=t+" ");return e.trim()}const Pu="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Nu=Qi(Pu);function jc(n){return!!n||n===""}const Vc=n=>!!(n&&n.__v_isRef===!0),xe=n=>Ce(n)?n:n==null?"":$(n)||ue(n)&&(n.toString===qc||!j(n.toString))?Vc(n)?xe(n.value):JSON.stringify(n,Wc,2):String(n),Wc=(n,e)=>Vc(e)?Wc(n,e.value):wn(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((t,[r,o],i)=>(t[Zo(r,i)+" =>"]=o,t),{})}:Bc(e)?{[`Set(${e.size})`]:[...e.values()].map(t=>Zo(t))}:zt(e)?Zo(e):ue(e)&&!$(e)&&!$c(e)?String(e):e,Zo=(n,e="")=>{var t;return zt(n)?`Symbol(${(t=n.description)!=null?t:e})`:n};/**
* @vue/reactivity v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let je;class Mu{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=je,!e&&je&&(this.index=(je.scopes||(je.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,t;if(this.scopes)for(e=0,t=this.scopes.length;e<t;e++)this.scopes[e].pause();for(e=0,t=this.effects.length;e<t;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,t;if(this.scopes)for(e=0,t=this.scopes.length;e<t;e++)this.scopes[e].resume();for(e=0,t=this.effects.length;e<t;e++)this.effects[e].resume()}}run(e){if(this._active){const t=je;try{return je=this,e()}finally{je=t}}}on(){je=this}off(){je=this.parent}stop(e){if(this._active){this._active=!1;let t,r;for(t=0,r=this.effects.length;t<r;t++)this.effects[t].stop();for(this.effects.length=0,t=0,r=this.cleanups.length;t<r;t++)this.cleanups[t]();if(this.cleanups.length=0,this.scopes){for(t=0,r=this.scopes.length;t<r;t++)this.scopes[t].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const o=this.parent.scopes.pop();o&&o!==this&&(this.parent.scopes[this.index]=o,o.index=this.index)}this.parent=void 0}}}function xu(){return je}let ie;const ei=new WeakSet;class Yc{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,je&&je.active&&je.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,ei.has(this)&&(ei.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||Jc(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,_a(this),Xc(this);const e=ie,t=et;ie=this,et=!0;try{return this.fn()}finally{Zc(this),ie=e,et=t,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)os(e);this.deps=this.depsTail=void 0,_a(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?ei.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){mi(this)&&this.run()}get dirty(){return mi(this)}}let Qc=0,Yn,Qn;function Jc(n,e=!1){if(n.flags|=8,e){n.next=Qn,Qn=n;return}n.next=Yn,Yn=n}function ns(){Qc++}function rs(){if(--Qc>0)return;if(Qn){let e=Qn;for(Qn=void 0;e;){const t=e.next;e.next=void 0,e.flags&=-9,e=t}}let n;for(;Yn;){let e=Yn;for(Yn=void 0;e;){const t=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(r){n||(n=r)}e=t}}if(n)throw n}function Xc(n){for(let e=n.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function Zc(n){let e,t=n.depsTail,r=t;for(;r;){const o=r.prevDep;r.version===-1?(r===t&&(t=o),os(r),Du(r)):e=r,r.dep.activeLink=r.prevActiveLink,r.prevActiveLink=void 0,r=o}n.deps=e,n.depsTail=t}function mi(n){for(let e=n.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(el(e.dep.computed)||e.dep.version!==e.version))return!0;return!!n._dirty}function el(n){if(n.flags&4&&!(n.flags&16)||(n.flags&=-17,n.globalVersion===ir))return;n.globalVersion=ir;const e=n.dep;if(n.flags|=2,e.version>0&&!n.isSSR&&n.deps&&!mi(n)){n.flags&=-3;return}const t=ie,r=et;ie=n,et=!0;try{Xc(n);const o=n.fn(n._value);(e.version===0||Bt(o,n._value))&&(n._value=o,e.version++)}catch(o){throw e.version++,o}finally{ie=t,et=r,Zc(n),n.flags&=-3}}function os(n,e=!1){const{dep:t,prevSub:r,nextSub:o}=n;if(r&&(r.nextSub=o,n.prevSub=void 0),o&&(o.prevSub=r,n.nextSub=void 0),t.subs===n&&(t.subs=r,!r&&t.computed)){t.computed.flags&=-5;for(let i=t.computed.deps;i;i=i.nextDep)os(i,!0)}!e&&!--t.sc&&t.map&&t.map.delete(t.key)}function Du(n){const{prevDep:e,nextDep:t}=n;e&&(e.nextDep=t,n.prevDep=void 0),t&&(t.prevDep=e,n.nextDep=void 0)}let et=!0;const tl=[];function jt(){tl.push(et),et=!1}function Vt(){const n=tl.pop();et=n===void 0?!0:n}function _a(n){const{cleanup:e}=n;if(n.cleanup=void 0,e){const t=ie;ie=void 0;try{e()}finally{ie=t}}}let ir=0;class Lu{constructor(e,t){this.sub=e,this.dep=t,this.version=t.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class is{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(e){if(!ie||!et||ie===this.computed)return;let t=this.activeLink;if(t===void 0||t.sub!==ie)t=this.activeLink=new Lu(ie,this),ie.deps?(t.prevDep=ie.depsTail,ie.depsTail.nextDep=t,ie.depsTail=t):ie.deps=ie.depsTail=t,nl(t);else if(t.version===-1&&(t.version=this.version,t.nextDep)){const r=t.nextDep;r.prevDep=t.prevDep,t.prevDep&&(t.prevDep.nextDep=r),t.prevDep=ie.depsTail,t.nextDep=void 0,ie.depsTail.nextDep=t,ie.depsTail=t,ie.deps===t&&(ie.deps=r)}return t}trigger(e){this.version++,ir++,this.notify(e)}notify(e){ns();try{for(let t=this.subs;t;t=t.prevSub)t.sub.notify()&&t.sub.dep.notify()}finally{rs()}}}function nl(n){if(n.dep.sc++,n.sub.flags&4){const e=n.dep.computed;if(e&&!n.dep.subs){e.flags|=20;for(let r=e.deps;r;r=r.nextDep)nl(r)}const t=n.dep.subs;t!==n&&(n.prevSub=t,t&&(t.nextSub=n)),n.dep.subs=n}}const yi=new WeakMap,rn=Symbol(""),Ci=Symbol(""),sr=Symbol("");function Se(n,e,t){if(et&&ie){let r=yi.get(n);r||yi.set(n,r=new Map);let o=r.get(t);o||(r.set(t,o=new is),o.map=r,o.key=t),o.track()}}function kt(n,e,t,r,o,i){const s=yi.get(n);if(!s){ir++;return}const a=c=>{c&&c.trigger()};if(ns(),e==="clear")s.forEach(a);else{const c=$(n),h=c&&Zi(t);if(c&&t==="length"){const l=Number(r);s.forEach((d,g)=>{(g==="length"||g===sr||!zt(g)&&g>=l)&&a(d)})}else switch((t!==void 0||s.has(void 0))&&a(s.get(t)),h&&a(s.get(sr)),e){case"add":c?h&&a(s.get("length")):(a(s.get(rn)),wn(n)&&a(s.get(Ci)));break;case"delete":c||(a(s.get(rn)),wn(n)&&a(s.get(Ci)));break;case"set":wn(n)&&a(s.get(rn));break}}rs()}function pn(n){const e=J(n);return e===n?e:(Se(e,"iterate",sr),Qe(n)?e:e.map(Ie))}function To(n){return Se(n=J(n),"iterate",sr),n}const Uu={__proto__:null,[Symbol.iterator](){return ti(this,Symbol.iterator,Ie)},concat(...n){return pn(this).concat(...n.map(e=>$(e)?pn(e):e))},entries(){return ti(this,"entries",n=>(n[1]=Ie(n[1]),n))},every(n,e){return It(this,"every",n,e,void 0,arguments)},filter(n,e){return It(this,"filter",n,e,t=>t.map(Ie),arguments)},find(n,e){return It(this,"find",n,e,Ie,arguments)},findIndex(n,e){return It(this,"findIndex",n,e,void 0,arguments)},findLast(n,e){return It(this,"findLast",n,e,Ie,arguments)},findLastIndex(n,e){return It(this,"findLastIndex",n,e,void 0,arguments)},forEach(n,e){return It(this,"forEach",n,e,void 0,arguments)},includes(...n){return ni(this,"includes",n)},indexOf(...n){return ni(this,"indexOf",n)},join(n){return pn(this).join(n)},lastIndexOf(...n){return ni(this,"lastIndexOf",n)},map(n,e){return It(this,"map",n,e,void 0,arguments)},pop(){return $n(this,"pop")},push(...n){return $n(this,"push",n)},reduce(n,...e){return Sa(this,"reduce",n,e)},reduceRight(n,...e){return Sa(this,"reduceRight",n,e)},shift(){return $n(this,"shift")},some(n,e){return It(this,"some",n,e,void 0,arguments)},splice(...n){return $n(this,"splice",n)},toReversed(){return pn(this).toReversed()},toSorted(n){return pn(this).toSorted(n)},toSpliced(...n){return pn(this).toSpliced(...n)},unshift(...n){return $n(this,"unshift",n)},values(){return ti(this,"values",Ie)}};function ti(n,e,t){const r=To(n),o=r[e]();return r!==n&&!Qe(n)&&(o._next=o.next,o.next=()=>{const i=o._next();return i.value&&(i.value=t(i.value)),i}),o}const Hu=Array.prototype;function It(n,e,t,r,o,i){const s=To(n),a=s!==n&&!Qe(n),c=s[e];if(c!==Hu[e]){const d=c.apply(n,i);return a?Ie(d):d}let h=t;s!==n&&(a?h=function(d,g){return t.call(this,Ie(d),g,n)}:t.length>2&&(h=function(d,g){return t.call(this,d,g,n)}));const l=c.call(s,h,r);return a&&o?o(l):l}function Sa(n,e,t,r){const o=To(n);let i=t;return o!==n&&(Qe(n)?t.length>3&&(i=function(s,a,c){return t.call(this,s,a,c,n)}):i=function(s,a,c){return t.call(this,s,Ie(a),c,n)}),o[e](i,...r)}function ni(n,e,t){const r=J(n);Se(r,"iterate",sr);const o=r[e](...t);return(o===-1||o===!1)&&ls(t[0])?(t[0]=J(t[0]),r[e](...t)):o}function $n(n,e,t=[]){jt(),ns();const r=J(n)[e].apply(n,t);return rs(),Vt(),r}const Fu=Qi("__proto__,__v_isRef,__isVue"),rl=new Set(Object.getOwnPropertyNames(Symbol).filter(n=>n!=="arguments"&&n!=="caller").map(n=>Symbol[n]).filter(zt));function Bu(n){zt(n)||(n=String(n));const e=J(this);return Se(e,"has",n),e.hasOwnProperty(n)}class ol{constructor(e=!1,t=!1){this._isReadonly=e,this._isShallow=t}get(e,t,r){if(t==="__v_skip")return e.__v_skip;const o=this._isReadonly,i=this._isShallow;if(t==="__v_isReactive")return!o;if(t==="__v_isReadonly")return o;if(t==="__v_isShallow")return i;if(t==="__v_raw")return r===(o?i?Qu:cl:i?al:sl).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(r)?e:void 0;const s=$(e);if(!o){let c;if(s&&(c=Uu[t]))return c;if(t==="hasOwnProperty")return Bu}const a=Reflect.get(e,t,Re(e)?e:r);return(zt(t)?rl.has(t):Fu(t))||(o||Se(e,"get",t),i)?a:Re(a)?s&&Zi(t)?a:a.value:ue(a)?o?ll(a):as(a):a}}class il extends ol{constructor(e=!1){super(!1,e)}set(e,t,r,o){let i=e[t];if(!this._isShallow){const c=sn(i);if(!Qe(r)&&!sn(r)&&(i=J(i),r=J(r)),!$(e)&&Re(i)&&!Re(r))return c?!1:(i.value=r,!0)}const s=$(e)&&Zi(t)?Number(t)<e.length:X(e,t),a=Reflect.set(e,t,r,Re(e)?e:o);return e===J(o)&&(s?Bt(r,i)&&kt(e,"set",t,r):kt(e,"add",t,r)),a}deleteProperty(e,t){const r=X(e,t);e[t];const o=Reflect.deleteProperty(e,t);return o&&r&&kt(e,"delete",t,void 0),o}has(e,t){const r=Reflect.has(e,t);return(!zt(t)||!rl.has(t))&&Se(e,"has",t),r}ownKeys(e){return Se(e,"iterate",$(e)?"length":rn),Reflect.ownKeys(e)}}class Ku extends ol{constructor(e=!1){super(!0,e)}set(e,t){return!0}deleteProperty(e,t){return!0}}const qu=new il,$u=new Ku,Gu=new il(!0);const Ti=n=>n,br=n=>Reflect.getPrototypeOf(n);function zu(n,e,t){return function(...r){const o=this.__v_raw,i=J(o),s=wn(i),a=n==="entries"||n===Symbol.iterator&&s,c=n==="keys"&&s,h=o[n](...r),l=t?Ti:e?Ai:Ie;return!e&&Se(i,"iterate",c?Ci:rn),{next(){const{value:d,done:g}=h.next();return g?{value:d,done:g}:{value:a?[l(d[0]),l(d[1])]:l(d),done:g}},[Symbol.iterator](){return this}}}}function Rr(n){return function(...e){return n==="delete"?!1:n==="clear"?void 0:this}}function ju(n,e){const t={get(o){const i=this.__v_raw,s=J(i),a=J(o);n||(Bt(o,a)&&Se(s,"get",o),Se(s,"get",a));const{has:c}=br(s),h=e?Ti:n?Ai:Ie;if(c.call(s,o))return h(i.get(o));if(c.call(s,a))return h(i.get(a));i!==s&&i.get(o)},get size(){const o=this.__v_raw;return!n&&Se(J(o),"iterate",rn),Reflect.get(o,"size",o)},has(o){const i=this.__v_raw,s=J(i),a=J(o);return n||(Bt(o,a)&&Se(s,"has",o),Se(s,"has",a)),o===a?i.has(o):i.has(o)||i.has(a)},forEach(o,i){const s=this,a=s.__v_raw,c=J(a),h=e?Ti:n?Ai:Ie;return!n&&Se(c,"iterate",rn),a.forEach((l,d)=>o.call(i,h(l),h(d),s))}};return He(t,n?{add:Rr("add"),set:Rr("set"),delete:Rr("delete"),clear:Rr("clear")}:{add(o){!e&&!Qe(o)&&!sn(o)&&(o=J(o));const i=J(this);return br(i).has.call(i,o)||(i.add(o),kt(i,"add",o,o)),this},set(o,i){!e&&!Qe(i)&&!sn(i)&&(i=J(i));const s=J(this),{has:a,get:c}=br(s);let h=a.call(s,o);h||(o=J(o),h=a.call(s,o));const l=c.call(s,o);return s.set(o,i),h?Bt(i,l)&&kt(s,"set",o,i):kt(s,"add",o,i),this},delete(o){const i=J(this),{has:s,get:a}=br(i);let c=s.call(i,o);c||(o=J(o),c=s.call(i,o)),a&&a.call(i,o);const h=i.delete(o);return c&&kt(i,"delete",o,void 0),h},clear(){const o=J(this),i=o.size!==0,s=o.clear();return i&&kt(o,"clear",void 0,void 0),s}}),["keys","values","entries",Symbol.iterator].forEach(o=>{t[o]=zu(o,n,e)}),t}function ss(n,e){const t=ju(n,e);return(r,o,i)=>o==="__v_isReactive"?!n:o==="__v_isReadonly"?n:o==="__v_raw"?r:Reflect.get(X(t,o)&&o in r?t:r,o,i)}const Vu={get:ss(!1,!1)},Wu={get:ss(!1,!0)},Yu={get:ss(!0,!1)};const sl=new WeakMap,al=new WeakMap,cl=new WeakMap,Qu=new WeakMap;function Ju(n){switch(n){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Xu(n){return n.__v_skip||!Object.isExtensible(n)?0:Ju(_u(n))}function as(n){return sn(n)?n:cs(n,!1,qu,Vu,sl)}function Zu(n){return cs(n,!1,Gu,Wu,al)}function ll(n){return cs(n,!0,$u,Yu,cl)}function cs(n,e,t,r,o){if(!ue(n)||n.__v_raw&&!(e&&n.__v_isReactive))return n;const i=o.get(n);if(i)return i;const s=Xu(n);if(s===0)return n;const a=new Proxy(n,s===2?r:t);return o.set(n,a),a}function _n(n){return sn(n)?_n(n.__v_raw):!!(n&&n.__v_isReactive)}function sn(n){return!!(n&&n.__v_isReadonly)}function Qe(n){return!!(n&&n.__v_isShallow)}function ls(n){return n?!!n.__v_raw:!1}function J(n){const e=n&&n.__v_raw;return e?J(e):n}function ef(n){return!X(n,"__v_skip")&&Object.isExtensible(n)&&zc(n,"__v_skip",!0),n}const Ie=n=>ue(n)?as(n):n,Ai=n=>ue(n)?ll(n):n;function Re(n){return n?n.__v_isRef===!0:!1}function Ot(n){return tf(n,!1)}function tf(n,e){return Re(n)?n:new nf(n,e)}class nf{constructor(e,t){this.dep=new is,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=t?e:J(e),this._value=t?e:Ie(e),this.__v_isShallow=t}get value(){return this.dep.track(),this._value}set value(e){const t=this._rawValue,r=this.__v_isShallow||Qe(e)||sn(e);e=r?e:J(e),Bt(e,t)&&(this._rawValue=e,this._value=r?e:Ie(e),this.dep.trigger())}}function rf(n){return Re(n)?n.value:n}const of={get:(n,e,t)=>e==="__v_raw"?n:rf(Reflect.get(n,e,t)),set:(n,e,t,r)=>{const o=n[e];return Re(o)&&!Re(t)?(o.value=t,!0):Reflect.set(n,e,t,r)}};function hl(n){return _n(n)?n:new Proxy(n,of)}class sf{constructor(e,t,r){this.fn=e,this.setter=t,this._value=void 0,this.dep=new is(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=ir-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!t,this.isSSR=r}notify(){if(this.flags|=16,!(this.flags&8)&&ie!==this)return Jc(this,!0),!0}get value(){const e=this.dep.track();return el(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function af(n,e,t=!1){let r,o;return j(n)?r=n:(r=n.get,o=n.set),new sf(r,o,t)}const kr={},jr=new WeakMap;let Zt;function cf(n,e=!1,t=Zt){if(t){let r=jr.get(t);r||jr.set(t,r=[]),r.push(n)}}function lf(n,e,t=se){const{immediate:r,deep:o,once:i,scheduler:s,augmentJob:a,call:c}=t,h=D=>o?D:Qe(D)||o===!1||o===0?Ht(D,1):Ht(D);let l,d,g,y,m=!1,A=!1;if(Re(n)?(d=()=>n.value,m=Qe(n)):_n(n)?(d=()=>h(n),m=!0):$(n)?(A=!0,m=n.some(D=>_n(D)||Qe(D)),d=()=>n.map(D=>{if(Re(D))return D.value;if(_n(D))return h(D);if(j(D))return c?c(D,2):D()})):j(n)?e?d=c?()=>c(n,2):n:d=()=>{if(g){jt();try{g()}finally{Vt()}}const D=Zt;Zt=l;try{return c?c(n,3,[y]):n(y)}finally{Zt=D}}:d=Tt,e&&o){const D=d,V=o===!0?1/0:o;d=()=>Ht(D(),V)}const I=xu(),M=()=>{l.stop(),I&&I.active&&Xi(I.effects,l)};if(i&&e){const D=e;e=(...V)=>{D(...V),M()}}let L=A?new Array(n.length).fill(kr):kr;const H=D=>{if(!(!(l.flags&1)||!l.dirty&&!D))if(e){const V=l.run();if(o||m||(A?V.some((me,ge)=>Bt(me,L[ge])):Bt(V,L))){g&&g();const me=Zt;Zt=l;try{const ge=[V,L===kr?void 0:A&&L[0]===kr?[]:L,y];c?c(e,3,ge):e(...ge),L=V}finally{Zt=me}}}else l.run()};return a&&a(H),l=new Yc(d),l.scheduler=s?()=>s(H,!1):H,y=D=>cf(D,!1,l),g=l.onStop=()=>{const D=jr.get(l);if(D){if(c)c(D,4);else for(const V of D)V();jr.delete(l)}},e?r?H(!0):L=l.run():s?s(H.bind(null,!0),!0):l.run(),M.pause=l.pause.bind(l),M.resume=l.resume.bind(l),M.stop=M,M}function Ht(n,e=1/0,t){if(e<=0||!ue(n)||n.__v_skip||(t=t||new Set,t.has(n)))return n;if(t.add(n),e--,Re(n))Ht(n.value,e,t);else if($(n))for(let r=0;r<n.length;r++)Ht(n[r],e,t);else if(Bc(n)||wn(n))n.forEach(r=>{Ht(r,e,t)});else if($c(n)){for(const r in n)Ht(n[r],e,t);for(const r of Object.getOwnPropertySymbols(n))Object.prototype.propertyIsEnumerable.call(n,r)&&Ht(n[r],e,t)}return n}/**
* @vue/runtime-core v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function fr(n,e,t,r){try{return r?n(...r):n()}catch(o){Ao(o,e,t)}}function _t(n,e,t,r){if(j(n)){const o=fr(n,e,t,r);return o&&Kc(o)&&o.catch(i=>{Ao(i,e,t)}),o}if($(n)){const o=[];for(let i=0;i<n.length;i++)o.push(_t(n[i],e,t,r));return o}}function Ao(n,e,t,r=!0){const o=e?e.vnode:null,{errorHandler:i,throwUnhandledErrorInProduction:s}=e&&e.appContext.config||se;if(e){let a=e.parent;const c=e.proxy,h=`https://vuejs.org/error-reference/#runtime-${t}`;for(;a;){const l=a.ec;if(l){for(let d=0;d<l.length;d++)if(l[d](n,c,h)===!1)return}a=a.parent}if(i){jt(),fr(i,null,10,[n,c,h]),Vt();return}}hf(n,t,o,r,s)}function hf(n,e,t,r=!0,o=!1){if(o)throw n;console.error(n)}const De=[];let ft=-1;const Sn=[];let Lt=null,yn=0;const dl=Promise.resolve();let Vr=null;function df(n){const e=Vr||dl;return n?e.then(this?n.bind(this):n):e}function uf(n){let e=ft+1,t=De.length;for(;e<t;){const r=e+t>>>1,o=De[r],i=ar(o);i<n||i===n&&o.flags&2?e=r+1:t=r}return e}function hs(n){if(!(n.flags&1)){const e=ar(n),t=De[De.length-1];!t||!(n.flags&2)&&e>=ar(t)?De.push(n):De.splice(uf(e),0,n),n.flags|=1,ul()}}function ul(){Vr||(Vr=dl.then(gl))}function ff(n){$(n)?Sn.push(...n):Lt&&n.id===-1?Lt.splice(yn+1,0,n):n.flags&1||(Sn.push(n),n.flags|=1),ul()}function Ia(n,e,t=ft+1){for(;t<De.length;t++){const r=De[t];if(r&&r.flags&2){if(n&&r.id!==n.uid)continue;De.splice(t,1),t--,r.flags&4&&(r.flags&=-2),r(),r.flags&4||(r.flags&=-2)}}}function fl(n){if(Sn.length){const e=[...new Set(Sn)].sort((t,r)=>ar(t)-ar(r));if(Sn.length=0,Lt){Lt.push(...e);return}for(Lt=e,yn=0;yn<Lt.length;yn++){const t=Lt[yn];t.flags&4&&(t.flags&=-2),t.flags&8||t(),t.flags&=-2}Lt=null,yn=0}}const ar=n=>n.id==null?n.flags&2?-1:1/0:n.id;function gl(n){try{for(ft=0;ft<De.length;ft++){const e=De[ft];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),fr(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;ft<De.length;ft++){const e=De[ft];e&&(e.flags&=-2)}ft=-1,De.length=0,fl(),Vr=null,(De.length||Sn.length)&&gl()}}let yt=null,pl=null;function Wr(n){const e=yt;return yt=n,pl=n&&n.type.__scopeId||null,e}function gf(n,e=yt,t){if(!e||n._n)return n;const r=(...o)=>{r._d&&xa(-1);const i=Wr(e);let s;try{s=n(...o)}finally{Wr(i),r._d&&xa(1)}return s};return r._n=!0,r._c=!0,r._d=!0,r}function Jt(n,e,t,r){const o=n.dirs,i=e&&e.dirs;for(let s=0;s<o.length;s++){const a=o[s];i&&(a.oldValue=i[s].value);let c=a.dir[r];c&&(jt(),_t(c,t,8,[n.el,a,n,e]),Vt())}}const pf=Symbol("_vte"),mf=n=>n.__isTeleport;function ds(n,e){n.shapeFlag&6&&n.component?(n.transition=e,ds(n.component.subTree,e)):n.shapeFlag&128?(n.ssContent.transition=e.clone(n.ssContent),n.ssFallback.transition=e.clone(n.ssFallback)):n.transition=e}function ml(n){n.ids=[n.ids[0]+n.ids[2]+++"-",0,0]}function Yr(n,e,t,r,o=!1){if($(n)){n.forEach((m,A)=>Yr(m,e&&($(e)?e[A]:e),t,r,o));return}if(Jn(r)&&!o){r.shapeFlag&512&&r.type.__asyncResolved&&r.component.subTree.component&&Yr(n,e,t,r.component.subTree);return}const i=r.shapeFlag&4?ps(r.component):r.el,s=o?null:i,{i:a,r:c}=n,h=e&&e.r,l=a.refs===se?a.refs={}:a.refs,d=a.setupState,g=J(d),y=d===se?()=>!1:m=>X(g,m);if(h!=null&&h!==c&&(Ce(h)?(l[h]=null,y(h)&&(d[h]=null)):Re(h)&&(h.value=null)),j(c))fr(c,a,12,[s,l]);else{const m=Ce(c),A=Re(c);if(m||A){const I=()=>{if(n.f){const M=m?y(c)?d[c]:l[c]:c.value;o?$(M)&&Xi(M,i):$(M)?M.includes(i)||M.push(i):m?(l[c]=[i],y(c)&&(d[c]=l[c])):(c.value=[i],n.k&&(l[n.k]=c.value))}else m?(l[c]=s,y(c)&&(d[c]=s)):A&&(c.value=s,n.k&&(l[n.k]=s))};s?(I.id=-1,Ge(I,t)):I()}}}Co().requestIdleCallback;Co().cancelIdleCallback;const Jn=n=>!!n.type.__asyncLoader,yl=n=>n.type.__isKeepAlive;function yf(n,e){Cl(n,"a",e)}function Cf(n,e){Cl(n,"da",e)}function Cl(n,e,t=Le){const r=n.__wdc||(n.__wdc=()=>{let o=t;for(;o;){if(o.isDeactivated)return;o=o.parent}return n()});if(Eo(e,r,t),t){let o=t.parent;for(;o&&o.parent;)yl(o.parent.vnode)&&Tf(r,e,t,o),o=o.parent}}function Tf(n,e,t,r){const o=Eo(e,n,r,!0);gr(()=>{Xi(r[e],o)},t)}function Eo(n,e,t=Le,r=!1){if(t){const o=t[n]||(t[n]=[]),i=e.__weh||(e.__weh=(...s)=>{jt();const a=pr(t),c=_t(e,t,n,s);return a(),Vt(),c});return r?o.unshift(i):o.push(i),i}}const Dt=n=>(e,t=Le)=>{(!lr||n==="sp")&&Eo(n,(...r)=>e(...r),t)},Af=Dt("bm"),us=Dt("m"),Ef=Dt("bu"),wf=Dt("u"),_f=Dt("bum"),gr=Dt("um"),Sf=Dt("sp"),If=Dt("rtg"),vf=Dt("rtc");function bf(n,e=Le){Eo("ec",n,e)}const Rf=Symbol.for("v-ndc");function Tl(n,e,t,r){let o;const i=t,s=$(n);if(s||Ce(n)){const a=s&&_n(n);let c=!1;a&&(c=!Qe(n),n=To(n)),o=new Array(n.length);for(let h=0,l=n.length;h<l;h++)o[h]=e(c?Ie(n[h]):n[h],h,void 0,i)}else if(typeof n=="number"){o=new Array(n);for(let a=0;a<n;a++)o[a]=e(a+1,a,void 0,i)}else if(ue(n))if(n[Symbol.iterator])o=Array.from(n,(a,c)=>e(a,c,void 0,i));else{const a=Object.keys(n);o=new Array(a.length);for(let c=0,h=a.length;c<h;c++){const l=a[c];o[c]=e(n[l],l,c,i)}}else o=[];return o}const Ei=n=>n?Kl(n)?ps(n):Ei(n.parent):null,Xn=He(Object.create(null),{$:n=>n,$el:n=>n.vnode.el,$data:n=>n.data,$props:n=>n.props,$attrs:n=>n.attrs,$slots:n=>n.slots,$refs:n=>n.refs,$parent:n=>Ei(n.parent),$root:n=>Ei(n.root),$host:n=>n.ce,$emit:n=>n.emit,$options:n=>El(n),$forceUpdate:n=>n.f||(n.f=()=>{hs(n.update)}),$nextTick:n=>n.n||(n.n=df.bind(n.proxy)),$watch:n=>Qf.bind(n)}),ri=(n,e)=>n!==se&&!n.__isScriptSetup&&X(n,e),kf={get({_:n},e){if(e==="__v_skip")return!0;const{ctx:t,setupState:r,data:o,props:i,accessCache:s,type:a,appContext:c}=n;let h;if(e[0]!=="$"){const y=s[e];if(y!==void 0)switch(y){case 1:return r[e];case 2:return o[e];case 4:return t[e];case 3:return i[e]}else{if(ri(r,e))return s[e]=1,r[e];if(o!==se&&X(o,e))return s[e]=2,o[e];if((h=n.propsOptions[0])&&X(h,e))return s[e]=3,i[e];if(t!==se&&X(t,e))return s[e]=4,t[e];wi&&(s[e]=0)}}const l=Xn[e];let d,g;if(l)return e==="$attrs"&&Se(n.attrs,"get",""),l(n);if((d=a.__cssModules)&&(d=d[e]))return d;if(t!==se&&X(t,e))return s[e]=4,t[e];if(g=c.config.globalProperties,X(g,e))return g[e]},set({_:n},e,t){const{data:r,setupState:o,ctx:i}=n;return ri(o,e)?(o[e]=t,!0):r!==se&&X(r,e)?(r[e]=t,!0):X(n.props,e)||e[0]==="$"&&e.slice(1)in n?!1:(i[e]=t,!0)},has({_:{data:n,setupState:e,accessCache:t,ctx:r,appContext:o,propsOptions:i}},s){let a;return!!t[s]||n!==se&&X(n,s)||ri(e,s)||(a=i[0])&&X(a,s)||X(r,s)||X(Xn,s)||X(o.config.globalProperties,s)},defineProperty(n,e,t){return t.get!=null?n._.accessCache[e]=0:X(t,"value")&&this.set(n,e,t.value,null),Reflect.defineProperty(n,e,t)}};function va(n){return $(n)?n.reduce((e,t)=>(e[t]=null,e),{}):n}let wi=!0;function Of(n){const e=El(n),t=n.proxy,r=n.ctx;wi=!1,e.beforeCreate&&ba(e.beforeCreate,n,"bc");const{data:o,computed:i,methods:s,watch:a,provide:c,inject:h,created:l,beforeMount:d,mounted:g,beforeUpdate:y,updated:m,activated:A,deactivated:I,beforeDestroy:M,beforeUnmount:L,destroyed:H,unmounted:D,render:V,renderTracked:me,renderTriggered:ge,errorCaptured:ke,serverPrefetch:St,expose:it,inheritAttrs:Fn,components:_r,directives:Sr,filters:Yo}=e;if(h&&Pf(h,r,null),s)for(const de in s){const re=s[de];j(re)&&(r[de]=re.bind(t))}if(o){const de=o.call(t,t);ue(de)&&(n.data=as(de))}if(wi=!0,i)for(const de in i){const re=i[de],Yt=j(re)?re.bind(t,t):j(re.get)?re.get.bind(t,t):Tt,Ir=!j(re)&&j(re.set)?re.set.bind(t):Tt,Qt=ms({get:Yt,set:Ir});Object.defineProperty(r,de,{enumerable:!0,configurable:!0,get:()=>Qt.value,set:st=>Qt.value=st})}if(a)for(const de in a)Al(a[de],r,t,de);if(c){const de=j(c)?c.call(t):c;Reflect.ownKeys(de).forEach(re=>{Uf(re,de[re])})}l&&ba(l,n,"c");function Oe(de,re){$(re)?re.forEach(Yt=>de(Yt.bind(t))):re&&de(re.bind(t))}if(Oe(Af,d),Oe(us,g),Oe(Ef,y),Oe(wf,m),Oe(yf,A),Oe(Cf,I),Oe(bf,ke),Oe(vf,me),Oe(If,ge),Oe(_f,L),Oe(gr,D),Oe(Sf,St),$(it))if(it.length){const de=n.exposed||(n.exposed={});it.forEach(re=>{Object.defineProperty(de,re,{get:()=>t[re],set:Yt=>t[re]=Yt})})}else n.exposed||(n.exposed={});V&&n.render===Tt&&(n.render=V),Fn!=null&&(n.inheritAttrs=Fn),_r&&(n.components=_r),Sr&&(n.directives=Sr),St&&ml(n)}function Pf(n,e,t=Tt){$(n)&&(n=_i(n));for(const r in n){const o=n[r];let i;ue(o)?"default"in o?i=Fr(o.from||r,o.default,!0):i=Fr(o.from||r):i=Fr(o),Re(i)?Object.defineProperty(e,r,{enumerable:!0,configurable:!0,get:()=>i.value,set:s=>i.value=s}):e[r]=i}}function ba(n,e,t){_t($(n)?n.map(r=>r.bind(e.proxy)):n.bind(e.proxy),e,t)}function Al(n,e,t,r){let o=r.includes(".")?Dl(t,r):()=>t[r];if(Ce(n)){const i=e[n];j(i)&&Zn(o,i)}else if(j(n))Zn(o,n.bind(t));else if(ue(n))if($(n))n.forEach(i=>Al(i,e,t,r));else{const i=j(n.handler)?n.handler.bind(t):e[n.handler];j(i)&&Zn(o,i,n)}}function El(n){const e=n.type,{mixins:t,extends:r}=e,{mixins:o,optionsCache:i,config:{optionMergeStrategies:s}}=n.appContext,a=i.get(e);let c;return a?c=a:!o.length&&!t&&!r?c=e:(c={},o.length&&o.forEach(h=>Qr(c,h,s,!0)),Qr(c,e,s)),ue(e)&&i.set(e,c),c}function Qr(n,e,t,r=!1){const{mixins:o,extends:i}=e;i&&Qr(n,i,t,!0),o&&o.forEach(s=>Qr(n,s,t,!0));for(const s in e)if(!(r&&s==="expose")){const a=Nf[s]||t&&t[s];n[s]=a?a(n[s],e[s]):e[s]}return n}const Nf={data:Ra,props:ka,emits:ka,methods:jn,computed:jn,beforeCreate:Pe,created:Pe,beforeMount:Pe,mounted:Pe,beforeUpdate:Pe,updated:Pe,beforeDestroy:Pe,beforeUnmount:Pe,destroyed:Pe,unmounted:Pe,activated:Pe,deactivated:Pe,errorCaptured:Pe,serverPrefetch:Pe,components:jn,directives:jn,watch:xf,provide:Ra,inject:Mf};function Ra(n,e){return e?n?function(){return He(j(n)?n.call(this,this):n,j(e)?e.call(this,this):e)}:e:n}function Mf(n,e){return jn(_i(n),_i(e))}function _i(n){if($(n)){const e={};for(let t=0;t<n.length;t++)e[n[t]]=n[t];return e}return n}function Pe(n,e){return n?[...new Set([].concat(n,e))]:e}function jn(n,e){return n?He(Object.create(null),n,e):e}function ka(n,e){return n?$(n)&&$(e)?[...new Set([...n,...e])]:He(Object.create(null),va(n),va(e??{})):e}function xf(n,e){if(!n)return e;if(!e)return n;const t=He(Object.create(null),n);for(const r in e)t[r]=Pe(n[r],e[r]);return t}function wl(){return{app:null,config:{isNativeTag:Eu,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Df=0;function Lf(n,e){return function(r,o=null){j(r)||(r=He({},r)),o!=null&&!ue(o)&&(o=null);const i=wl(),s=new WeakSet,a=[];let c=!1;const h=i.app={_uid:Df++,_component:r,_props:o,_container:null,_context:i,_instance:null,version:yg,get config(){return i.config},set config(l){},use(l,...d){return s.has(l)||(l&&j(l.install)?(s.add(l),l.install(h,...d)):j(l)&&(s.add(l),l(h,...d))),h},mixin(l){return i.mixins.includes(l)||i.mixins.push(l),h},component(l,d){return d?(i.components[l]=d,h):i.components[l]},directive(l,d){return d?(i.directives[l]=d,h):i.directives[l]},mount(l,d,g){if(!c){const y=h._ceVNode||At(r,o);return y.appContext=i,g===!0?g="svg":g===!1&&(g=void 0),n(y,l,g),c=!0,h._container=l,l.__vue_app__=h,ps(y.component)}},onUnmount(l){a.push(l)},unmount(){c&&(_t(a,h._instance,16),n(null,h._container),delete h._container.__vue_app__)},provide(l,d){return i.provides[l]=d,h},runWithContext(l){const d=In;In=h;try{return l()}finally{In=d}}};return h}}let In=null;function Uf(n,e){if(Le){let t=Le.provides;const r=Le.parent&&Le.parent.provides;r===t&&(t=Le.provides=Object.create(r)),t[n]=e}}function Fr(n,e,t=!1){const r=Le||yt;if(r||In){const o=In?In._context.provides:r?r.parent==null?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:void 0;if(o&&n in o)return o[n];if(arguments.length>1)return t&&j(e)?e.call(r&&r.proxy):e}}const _l={},Sl=()=>Object.create(_l),Il=n=>Object.getPrototypeOf(n)===_l;function Hf(n,e,t,r=!1){const o={},i=Sl();n.propsDefaults=Object.create(null),vl(n,e,o,i);for(const s in n.propsOptions[0])s in o||(o[s]=void 0);t?n.props=r?o:Zu(o):n.type.props?n.props=o:n.props=i,n.attrs=i}function Ff(n,e,t,r){const{props:o,attrs:i,vnode:{patchFlag:s}}=n,a=J(o),[c]=n.propsOptions;let h=!1;if((r||s>0)&&!(s&16)){if(s&8){const l=n.vnode.dynamicProps;for(let d=0;d<l.length;d++){let g=l[d];if(wo(n.emitsOptions,g))continue;const y=e[g];if(c)if(X(i,g))y!==i[g]&&(i[g]=y,h=!0);else{const m=$t(g);o[m]=Si(c,a,m,y,n,!1)}else y!==i[g]&&(i[g]=y,h=!0)}}}else{vl(n,e,o,i)&&(h=!0);let l;for(const d in a)(!e||!X(e,d)&&((l=gn(d))===d||!X(e,l)))&&(c?t&&(t[d]!==void 0||t[l]!==void 0)&&(o[d]=Si(c,a,d,void 0,n,!0)):delete o[d]);if(i!==a)for(const d in i)(!e||!X(e,d))&&(delete i[d],h=!0)}h&&kt(n.attrs,"set","")}function vl(n,e,t,r){const[o,i]=n.propsOptions;let s=!1,a;if(e)for(let c in e){if(Wn(c))continue;const h=e[c];let l;o&&X(o,l=$t(c))?!i||!i.includes(l)?t[l]=h:(a||(a={}))[l]=h:wo(n.emitsOptions,c)||(!(c in r)||h!==r[c])&&(r[c]=h,s=!0)}if(i){const c=J(t),h=a||se;for(let l=0;l<i.length;l++){const d=i[l];t[d]=Si(o,c,d,h[d],n,!X(h,d))}}return s}function Si(n,e,t,r,o,i){const s=n[t];if(s!=null){const a=X(s,"default");if(a&&r===void 0){const c=s.default;if(s.type!==Function&&!s.skipFactory&&j(c)){const{propsDefaults:h}=o;if(t in h)r=h[t];else{const l=pr(o);r=h[t]=c.call(null,e),l()}}else r=c;o.ce&&o.ce._setProp(t,r)}s[0]&&(i&&!a?r=!1:s[1]&&(r===""||r===gn(t))&&(r=!0))}return r}const Bf=new WeakMap;function bl(n,e,t=!1){const r=t?Bf:e.propsCache,o=r.get(n);if(o)return o;const i=n.props,s={},a=[];let c=!1;if(!j(n)){const l=d=>{c=!0;const[g,y]=bl(d,e,!0);He(s,g),y&&a.push(...y)};!t&&e.mixins.length&&e.mixins.forEach(l),n.extends&&l(n.extends),n.mixins&&n.mixins.forEach(l)}if(!i&&!c)return ue(n)&&r.set(n,En),En;if($(i))for(let l=0;l<i.length;l++){const d=$t(i[l]);Oa(d)&&(s[d]=se)}else if(i)for(const l in i){const d=$t(l);if(Oa(d)){const g=i[l],y=s[d]=$(g)||j(g)?{type:g}:He({},g),m=y.type;let A=!1,I=!0;if($(m))for(let M=0;M<m.length;++M){const L=m[M],H=j(L)&&L.name;if(H==="Boolean"){A=!0;break}else H==="String"&&(I=!1)}else A=j(m)&&m.name==="Boolean";y[0]=A,y[1]=I,(A||X(y,"default"))&&a.push(d)}}const h=[s,a];return ue(n)&&r.set(n,h),h}function Oa(n){return n[0]!=="$"&&!Wn(n)}const Rl=n=>n[0]==="_"||n==="$stable",fs=n=>$(n)?n.map(gt):[gt(n)],Kf=(n,e,t)=>{if(e._n)return e;const r=gf((...o)=>fs(e(...o)),t);return r._c=!1,r},kl=(n,e,t)=>{const r=n._ctx;for(const o in n){if(Rl(o))continue;const i=n[o];if(j(i))e[o]=Kf(o,i,r);else if(i!=null){const s=fs(i);e[o]=()=>s}}},Ol=(n,e)=>{const t=fs(e);n.slots.default=()=>t},Pl=(n,e,t)=>{for(const r in e)(t||r!=="_")&&(n[r]=e[r])},qf=(n,e,t)=>{const r=n.slots=Sl();if(n.vnode.shapeFlag&32){const o=e._;o?(Pl(r,e,t),t&&zc(r,"_",o,!0)):kl(e,r)}else e&&Ol(n,e)},$f=(n,e,t)=>{const{vnode:r,slots:o}=n;let i=!0,s=se;if(r.shapeFlag&32){const a=e._;a?t&&a===1?i=!1:Pl(o,e,t):(i=!e.$stable,kl(e,o)),s=e}else e&&(Ol(n,e),s={default:1});if(i)for(const a in o)!Rl(a)&&s[a]==null&&delete o[a]},Ge=rg;function Gf(n){return zf(n)}function zf(n,e){const t=Co();t.__VUE__=!0;const{insert:r,remove:o,patchProp:i,createElement:s,createText:a,createComment:c,setText:h,setElementText:l,parentNode:d,nextSibling:g,setScopeId:y=Tt,insertStaticContent:m}=n,A=(u,f,T,b=null,w=null,v=null,P=void 0,O=null,k=!!f.dynamicChildren)=>{if(u===f)return;u&&!Gn(u,f)&&(b=vr(u),st(u,w,v,!0),u=null),f.patchFlag===-2&&(k=!1,f.dynamicChildren=null);const{type:R,ref:K,shapeFlag:N}=f;switch(R){case _o:I(u,f,T,b);break;case an:M(u,f,T,b);break;case ii:u==null&&L(f,T,b,P);break;case Ze:_r(u,f,T,b,w,v,P,O,k);break;default:N&1?V(u,f,T,b,w,v,P,O,k):N&6?Sr(u,f,T,b,w,v,P,O,k):(N&64||N&128)&&R.process(u,f,T,b,w,v,P,O,k,Kn)}K!=null&&w&&Yr(K,u&&u.ref,v,f||u,!f)},I=(u,f,T,b)=>{if(u==null)r(f.el=a(f.children),T,b);else{const w=f.el=u.el;f.children!==u.children&&h(w,f.children)}},M=(u,f,T,b)=>{u==null?r(f.el=c(f.children||""),T,b):f.el=u.el},L=(u,f,T,b)=>{[u.el,u.anchor]=m(u.children,f,T,b,u.el,u.anchor)},H=({el:u,anchor:f},T,b)=>{let w;for(;u&&u!==f;)w=g(u),r(u,T,b),u=w;r(f,T,b)},D=({el:u,anchor:f})=>{let T;for(;u&&u!==f;)T=g(u),o(u),u=T;o(f)},V=(u,f,T,b,w,v,P,O,k)=>{f.type==="svg"?P="svg":f.type==="math"&&(P="mathml"),u==null?me(f,T,b,w,v,P,O,k):St(u,f,w,v,P,O,k)},me=(u,f,T,b,w,v,P,O)=>{let k,R;const{props:K,shapeFlag:N,transition:F,dirs:q}=u;if(k=u.el=s(u.type,v,K&&K.is,K),N&8?l(k,u.children):N&16&&ke(u.children,k,null,b,w,oi(u,v),P,O),q&&Jt(u,null,b,"created"),ge(k,u,u.scopeId,P,b),K){for(const oe in K)oe!=="value"&&!Wn(oe)&&i(k,oe,null,K[oe],v,b);"value"in K&&i(k,"value",null,K.value,v),(R=K.onVnodeBeforeMount)&&ht(R,b,u)}q&&Jt(u,null,b,"beforeMount");const Y=jf(w,F);Y&&F.beforeEnter(k),r(k,f,T),((R=K&&K.onVnodeMounted)||Y||q)&&Ge(()=>{R&&ht(R,b,u),Y&&F.enter(k),q&&Jt(u,null,b,"mounted")},w)},ge=(u,f,T,b,w)=>{if(T&&y(u,T),b)for(let v=0;v<b.length;v++)y(u,b[v]);if(w){let v=w.subTree;if(f===v||Ul(v.type)&&(v.ssContent===f||v.ssFallback===f)){const P=w.vnode;ge(u,P,P.scopeId,P.slotScopeIds,w.parent)}}},ke=(u,f,T,b,w,v,P,O,k=0)=>{for(let R=k;R<u.length;R++){const K=u[R]=O?Ut(u[R]):gt(u[R]);A(null,K,f,T,b,w,v,P,O)}},St=(u,f,T,b,w,v,P)=>{const O=f.el=u.el;let{patchFlag:k,dynamicChildren:R,dirs:K}=f;k|=u.patchFlag&16;const N=u.props||se,F=f.props||se;let q;if(T&&Xt(T,!1),(q=F.onVnodeBeforeUpdate)&&ht(q,T,f,u),K&&Jt(f,u,T,"beforeUpdate"),T&&Xt(T,!0),(N.innerHTML&&F.innerHTML==null||N.textContent&&F.textContent==null)&&l(O,""),R?it(u.dynamicChildren,R,O,T,b,oi(f,w),v):P||re(u,f,O,null,T,b,oi(f,w),v,!1),k>0){if(k&16)Fn(O,N,F,T,w);else if(k&2&&N.class!==F.class&&i(O,"class",null,F.class,w),k&4&&i(O,"style",N.style,F.style,w),k&8){const Y=f.dynamicProps;for(let oe=0;oe<Y.length;oe++){const Z=Y[oe],qe=N[Z],Fe=F[Z];(Fe!==qe||Z==="value")&&i(O,Z,qe,Fe,w,T)}}k&1&&u.children!==f.children&&l(O,f.children)}else!P&&R==null&&Fn(O,N,F,T,w);((q=F.onVnodeUpdated)||K)&&Ge(()=>{q&&ht(q,T,f,u),K&&Jt(f,u,T,"updated")},b)},it=(u,f,T,b,w,v,P)=>{for(let O=0;O<f.length;O++){const k=u[O],R=f[O],K=k.el&&(k.type===Ze||!Gn(k,R)||k.shapeFlag&70)?d(k.el):T;A(k,R,K,null,b,w,v,P,!0)}},Fn=(u,f,T,b,w)=>{if(f!==T){if(f!==se)for(const v in f)!Wn(v)&&!(v in T)&&i(u,v,f[v],null,w,b);for(const v in T){if(Wn(v))continue;const P=T[v],O=f[v];P!==O&&v!=="value"&&i(u,v,O,P,w,b)}"value"in T&&i(u,"value",f.value,T.value,w)}},_r=(u,f,T,b,w,v,P,O,k)=>{const R=f.el=u?u.el:a(""),K=f.anchor=u?u.anchor:a("");let{patchFlag:N,dynamicChildren:F,slotScopeIds:q}=f;q&&(O=O?O.concat(q):q),u==null?(r(R,T,b),r(K,T,b),ke(f.children||[],T,K,w,v,P,O,k)):N>0&&N&64&&F&&u.dynamicChildren?(it(u.dynamicChildren,F,T,w,v,P,O),(f.key!=null||w&&f===w.subTree)&&Nl(u,f,!0)):re(u,f,T,K,w,v,P,O,k)},Sr=(u,f,T,b,w,v,P,O,k)=>{f.slotScopeIds=O,u==null?f.shapeFlag&512?w.ctx.activate(f,T,b,P,k):Yo(f,T,b,w,v,P,k):ya(u,f,k)},Yo=(u,f,T,b,w,v,P)=>{const O=u.component=dg(u,b,w);if(yl(u)&&(O.ctx.renderer=Kn),ug(O,!1,P),O.asyncDep){if(w&&w.registerDep(O,Oe,P),!u.el){const k=O.subTree=At(an);M(null,k,f,T)}}else Oe(O,u,f,T,w,v,P)},ya=(u,f,T)=>{const b=f.component=u.component;if(tg(u,f,T))if(b.asyncDep&&!b.asyncResolved){de(b,f,T);return}else b.next=f,b.update();else f.el=u.el,b.vnode=f},Oe=(u,f,T,b,w,v,P)=>{const O=()=>{if(u.isMounted){let{next:N,bu:F,u:q,parent:Y,vnode:oe}=u;{const ct=Ml(u);if(ct){N&&(N.el=oe.el,de(u,N,P)),ct.asyncDep.then(()=>{u.isUnmounted||O()});return}}let Z=N,qe;Xt(u,!1),N?(N.el=oe.el,de(u,N,P)):N=oe,F&&Xo(F),(qe=N.props&&N.props.onVnodeBeforeUpdate)&&ht(qe,Y,N,oe),Xt(u,!0);const Fe=Na(u),at=u.subTree;u.subTree=Fe,A(at,Fe,d(at.el),vr(at),u,w,v),N.el=Fe.el,Z===null&&ng(u,Fe.el),q&&Ge(q,w),(qe=N.props&&N.props.onVnodeUpdated)&&Ge(()=>ht(qe,Y,N,oe),w)}else{let N;const{el:F,props:q}=f,{bm:Y,m:oe,parent:Z,root:qe,type:Fe}=u,at=Jn(f);Xt(u,!1),Y&&Xo(Y),!at&&(N=q&&q.onVnodeBeforeMount)&&ht(N,Z,f),Xt(u,!0);{qe.ce&&qe.ce._injectChildStyle(Fe);const ct=u.subTree=Na(u);A(null,ct,T,b,u,w,v),f.el=ct.el}if(oe&&Ge(oe,w),!at&&(N=q&&q.onVnodeMounted)){const ct=f;Ge(()=>ht(N,Z,ct),w)}(f.shapeFlag&256||Z&&Jn(Z.vnode)&&Z.vnode.shapeFlag&256)&&u.a&&Ge(u.a,w),u.isMounted=!0,f=T=b=null}};u.scope.on();const k=u.effect=new Yc(O);u.scope.off();const R=u.update=k.run.bind(k),K=u.job=k.runIfDirty.bind(k);K.i=u,K.id=u.uid,k.scheduler=()=>hs(K),Xt(u,!0),R()},de=(u,f,T)=>{f.component=u;const b=u.vnode.props;u.vnode=f,u.next=null,Ff(u,f.props,b,T),$f(u,f.children,T),jt(),Ia(u),Vt()},re=(u,f,T,b,w,v,P,O,k=!1)=>{const R=u&&u.children,K=u?u.shapeFlag:0,N=f.children,{patchFlag:F,shapeFlag:q}=f;if(F>0){if(F&128){Ir(R,N,T,b,w,v,P,O,k);return}else if(F&256){Yt(R,N,T,b,w,v,P,O,k);return}}q&8?(K&16&&Bn(R,w,v),N!==R&&l(T,N)):K&16?q&16?Ir(R,N,T,b,w,v,P,O,k):Bn(R,w,v,!0):(K&8&&l(T,""),q&16&&ke(N,T,b,w,v,P,O,k))},Yt=(u,f,T,b,w,v,P,O,k)=>{u=u||En,f=f||En;const R=u.length,K=f.length,N=Math.min(R,K);let F;for(F=0;F<N;F++){const q=f[F]=k?Ut(f[F]):gt(f[F]);A(u[F],q,T,null,w,v,P,O,k)}R>K?Bn(u,w,v,!0,!1,N):ke(f,T,b,w,v,P,O,k,N)},Ir=(u,f,T,b,w,v,P,O,k)=>{let R=0;const K=f.length;let N=u.length-1,F=K-1;for(;R<=N&&R<=F;){const q=u[R],Y=f[R]=k?Ut(f[R]):gt(f[R]);if(Gn(q,Y))A(q,Y,T,null,w,v,P,O,k);else break;R++}for(;R<=N&&R<=F;){const q=u[N],Y=f[F]=k?Ut(f[F]):gt(f[F]);if(Gn(q,Y))A(q,Y,T,null,w,v,P,O,k);else break;N--,F--}if(R>N){if(R<=F){const q=F+1,Y=q<K?f[q].el:b;for(;R<=F;)A(null,f[R]=k?Ut(f[R]):gt(f[R]),T,Y,w,v,P,O,k),R++}}else if(R>F)for(;R<=N;)st(u[R],w,v,!0),R++;else{const q=R,Y=R,oe=new Map;for(R=Y;R<=F;R++){const $e=f[R]=k?Ut(f[R]):gt(f[R]);$e.key!=null&&oe.set($e.key,R)}let Z,qe=0;const Fe=F-Y+1;let at=!1,ct=0;const qn=new Array(Fe);for(R=0;R<Fe;R++)qn[R]=0;for(R=q;R<=N;R++){const $e=u[R];if(qe>=Fe){st($e,w,v,!0);continue}let lt;if($e.key!=null)lt=oe.get($e.key);else for(Z=Y;Z<=F;Z++)if(qn[Z-Y]===0&&Gn($e,f[Z])){lt=Z;break}lt===void 0?st($e,w,v,!0):(qn[lt-Y]=R+1,lt>=ct?ct=lt:at=!0,A($e,f[lt],T,null,w,v,P,O,k),qe++)}const Aa=at?Vf(qn):En;for(Z=Aa.length-1,R=Fe-1;R>=0;R--){const $e=Y+R,lt=f[$e],Ea=$e+1<K?f[$e+1].el:b;qn[R]===0?A(null,lt,T,Ea,w,v,P,O,k):at&&(Z<0||R!==Aa[Z]?Qt(lt,T,Ea,2):Z--)}}},Qt=(u,f,T,b,w=null)=>{const{el:v,type:P,transition:O,children:k,shapeFlag:R}=u;if(R&6){Qt(u.component.subTree,f,T,b);return}if(R&128){u.suspense.move(f,T,b);return}if(R&64){P.move(u,f,T,Kn);return}if(P===Ze){r(v,f,T);for(let N=0;N<k.length;N++)Qt(k[N],f,T,b);r(u.anchor,f,T);return}if(P===ii){H(u,f,T);return}if(b!==2&&R&1&&O)if(b===0)O.beforeEnter(v),r(v,f,T),Ge(()=>O.enter(v),w);else{const{leave:N,delayLeave:F,afterLeave:q}=O,Y=()=>r(v,f,T),oe=()=>{N(v,()=>{Y(),q&&q()})};F?F(v,Y,oe):oe()}else r(v,f,T)},st=(u,f,T,b=!1,w=!1)=>{const{type:v,props:P,ref:O,children:k,dynamicChildren:R,shapeFlag:K,patchFlag:N,dirs:F,cacheIndex:q}=u;if(N===-2&&(w=!1),O!=null&&Yr(O,null,T,u,!0),q!=null&&(f.renderCache[q]=void 0),K&256){f.ctx.deactivate(u);return}const Y=K&1&&F,oe=!Jn(u);let Z;if(oe&&(Z=P&&P.onVnodeBeforeUnmount)&&ht(Z,f,u),K&6)Au(u.component,T,b);else{if(K&128){u.suspense.unmount(T,b);return}Y&&Jt(u,null,f,"beforeUnmount"),K&64?u.type.remove(u,f,T,Kn,b):R&&!R.hasOnce&&(v!==Ze||N>0&&N&64)?Bn(R,f,T,!1,!0):(v===Ze&&N&384||!w&&K&16)&&Bn(k,f,T),b&&Ca(u)}(oe&&(Z=P&&P.onVnodeUnmounted)||Y)&&Ge(()=>{Z&&ht(Z,f,u),Y&&Jt(u,null,f,"unmounted")},T)},Ca=u=>{const{type:f,el:T,anchor:b,transition:w}=u;if(f===Ze){Tu(T,b);return}if(f===ii){D(u);return}const v=()=>{o(T),w&&!w.persisted&&w.afterLeave&&w.afterLeave()};if(u.shapeFlag&1&&w&&!w.persisted){const{leave:P,delayLeave:O}=w,k=()=>P(T,v);O?O(u.el,v,k):k()}else v()},Tu=(u,f)=>{let T;for(;u!==f;)T=g(u),o(u),u=T;o(f)},Au=(u,f,T)=>{const{bum:b,scope:w,job:v,subTree:P,um:O,m:k,a:R}=u;Pa(k),Pa(R),b&&Xo(b),w.stop(),v&&(v.flags|=8,st(P,u,f,T)),O&&Ge(O,f),Ge(()=>{u.isUnmounted=!0},f),f&&f.pendingBranch&&!f.isUnmounted&&u.asyncDep&&!u.asyncResolved&&u.suspenseId===f.pendingId&&(f.deps--,f.deps===0&&f.resolve())},Bn=(u,f,T,b=!1,w=!1,v=0)=>{for(let P=v;P<u.length;P++)st(u[P],f,T,b,w)},vr=u=>{if(u.shapeFlag&6)return vr(u.component.subTree);if(u.shapeFlag&128)return u.suspense.next();const f=g(u.anchor||u.el),T=f&&f[pf];return T?g(T):f};let Qo=!1;const Ta=(u,f,T)=>{u==null?f._vnode&&st(f._vnode,null,null,!0):A(f._vnode||null,u,f,null,null,null,T),f._vnode=u,Qo||(Qo=!0,Ia(),fl(),Qo=!1)},Kn={p:A,um:st,m:Qt,r:Ca,mt:Yo,mc:ke,pc:re,pbc:it,n:vr,o:n};return{render:Ta,hydrate:void 0,createApp:Lf(Ta)}}function oi({type:n,props:e},t){return t==="svg"&&n==="foreignObject"||t==="mathml"&&n==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:t}function Xt({effect:n,job:e},t){t?(n.flags|=32,e.flags|=4):(n.flags&=-33,e.flags&=-5)}function jf(n,e){return(!n||n&&!n.pendingBranch)&&e&&!e.persisted}function Nl(n,e,t=!1){const r=n.children,o=e.children;if($(r)&&$(o))for(let i=0;i<r.length;i++){const s=r[i];let a=o[i];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=o[i]=Ut(o[i]),a.el=s.el),!t&&a.patchFlag!==-2&&Nl(s,a)),a.type===_o&&(a.el=s.el)}}function Vf(n){const e=n.slice(),t=[0];let r,o,i,s,a;const c=n.length;for(r=0;r<c;r++){const h=n[r];if(h!==0){if(o=t[t.length-1],n[o]<h){e[r]=o,t.push(r);continue}for(i=0,s=t.length-1;i<s;)a=i+s>>1,n[t[a]]<h?i=a+1:s=a;h<n[t[i]]&&(i>0&&(e[r]=t[i-1]),t[i]=r)}}for(i=t.length,s=t[i-1];i-- >0;)t[i]=s,s=e[s];return t}function Ml(n){const e=n.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:Ml(e)}function Pa(n){if(n)for(let e=0;e<n.length;e++)n[e].flags|=8}const Wf=Symbol.for("v-scx"),Yf=()=>Fr(Wf);function Zn(n,e,t){return xl(n,e,t)}function xl(n,e,t=se){const{immediate:r,deep:o,flush:i,once:s}=t,a=He({},t),c=e&&r||!e&&i!=="post";let h;if(lr){if(i==="sync"){const y=Yf();h=y.__watcherHandles||(y.__watcherHandles=[])}else if(!c){const y=()=>{};return y.stop=Tt,y.resume=Tt,y.pause=Tt,y}}const l=Le;a.call=(y,m,A)=>_t(y,l,m,A);let d=!1;i==="post"?a.scheduler=y=>{Ge(y,l&&l.suspense)}:i!=="sync"&&(d=!0,a.scheduler=(y,m)=>{m?y():hs(y)}),a.augmentJob=y=>{e&&(y.flags|=4),d&&(y.flags|=2,l&&(y.id=l.uid,y.i=l))};const g=lf(n,e,a);return lr&&(h?h.push(g):c&&g()),g}function Qf(n,e,t){const r=this.proxy,o=Ce(n)?n.includes(".")?Dl(r,n):()=>r[n]:n.bind(r,r);let i;j(e)?i=e:(i=e.handler,t=e);const s=pr(this),a=xl(o,i.bind(r),t);return s(),a}function Dl(n,e){const t=e.split(".");return()=>{let r=n;for(let o=0;o<t.length&&r;o++)r=r[t[o]];return r}}const Jf=(n,e)=>e==="modelValue"||e==="model-value"?n.modelModifiers:n[`${e}Modifiers`]||n[`${$t(e)}Modifiers`]||n[`${gn(e)}Modifiers`];function Xf(n,e,...t){if(n.isUnmounted)return;const r=n.vnode.props||se;let o=t;const i=e.startsWith("update:"),s=i&&Jf(r,e.slice(7));s&&(s.trim&&(o=t.map(l=>Ce(l)?l.trim():l)),s.number&&(o=t.map(vu)));let a,c=r[a=Jo(e)]||r[a=Jo($t(e))];!c&&i&&(c=r[a=Jo(gn(e))]),c&&_t(c,n,6,o);const h=r[a+"Once"];if(h){if(!n.emitted)n.emitted={};else if(n.emitted[a])return;n.emitted[a]=!0,_t(h,n,6,o)}}function Ll(n,e,t=!1){const r=e.emitsCache,o=r.get(n);if(o!==void 0)return o;const i=n.emits;let s={},a=!1;if(!j(n)){const c=h=>{const l=Ll(h,e,!0);l&&(a=!0,He(s,l))};!t&&e.mixins.length&&e.mixins.forEach(c),n.extends&&c(n.extends),n.mixins&&n.mixins.forEach(c)}return!i&&!a?(ue(n)&&r.set(n,null),null):($(i)?i.forEach(c=>s[c]=null):He(s,i),ue(n)&&r.set(n,s),s)}function wo(n,e){return!n||!po(e)?!1:(e=e.slice(2).replace(/Once$/,""),X(n,e[0].toLowerCase()+e.slice(1))||X(n,gn(e))||X(n,e))}function Na(n){const{type:e,vnode:t,proxy:r,withProxy:o,propsOptions:[i],slots:s,attrs:a,emit:c,render:h,renderCache:l,props:d,data:g,setupState:y,ctx:m,inheritAttrs:A}=n,I=Wr(n);let M,L;try{if(t.shapeFlag&4){const D=o||r,V=D;M=gt(h.call(V,D,l,d,y,g,m)),L=a}else{const D=e;M=gt(D.length>1?D(d,{attrs:a,slots:s,emit:c}):D(d,null)),L=e.props?a:Zf(a)}}catch(D){er.length=0,Ao(D,n,1),M=At(an)}let H=M;if(L&&A!==!1){const D=Object.keys(L),{shapeFlag:V}=H;D.length&&V&7&&(i&&D.some(Ji)&&(L=eg(L,i)),H=Pn(H,L,!1,!0))}return t.dirs&&(H=Pn(H,null,!1,!0),H.dirs=H.dirs?H.dirs.concat(t.dirs):t.dirs),t.transition&&ds(H,t.transition),M=H,Wr(I),M}const Zf=n=>{let e;for(const t in n)(t==="class"||t==="style"||po(t))&&((e||(e={}))[t]=n[t]);return e},eg=(n,e)=>{const t={};for(const r in n)(!Ji(r)||!(r.slice(9)in e))&&(t[r]=n[r]);return t};function tg(n,e,t){const{props:r,children:o,component:i}=n,{props:s,children:a,patchFlag:c}=e,h=i.emitsOptions;if(e.dirs||e.transition)return!0;if(t&&c>=0){if(c&1024)return!0;if(c&16)return r?Ma(r,s,h):!!s;if(c&8){const l=e.dynamicProps;for(let d=0;d<l.length;d++){const g=l[d];if(s[g]!==r[g]&&!wo(h,g))return!0}}}else return(o||a)&&(!a||!a.$stable)?!0:r===s?!1:r?s?Ma(r,s,h):!0:!!s;return!1}function Ma(n,e,t){const r=Object.keys(e);if(r.length!==Object.keys(n).length)return!0;for(let o=0;o<r.length;o++){const i=r[o];if(e[i]!==n[i]&&!wo(t,i))return!0}return!1}function ng({vnode:n,parent:e},t){for(;e;){const r=e.subTree;if(r.suspense&&r.suspense.activeBranch===n&&(r.el=n.el),r===n)(n=e.vnode).el=t,e=e.parent;else break}}const Ul=n=>n.__isSuspense;function rg(n,e){e&&e.pendingBranch?$(n)?e.effects.push(...n):e.effects.push(n):ff(n)}const Ze=Symbol.for("v-fgt"),_o=Symbol.for("v-txt"),an=Symbol.for("v-cmt"),ii=Symbol.for("v-stc"),er=[];let Ve=null;function ye(n=!1){er.push(Ve=n?null:[])}function og(){er.pop(),Ve=er[er.length-1]||null}let cr=1;function xa(n,e=!1){cr+=n,n<0&&Ve&&e&&(Ve.hasOnce=!0)}function Hl(n){return n.dynamicChildren=cr>0?Ve||En:null,og(),cr>0&&Ve&&Ve.push(n),n}function Ee(n,e,t,r,o,i){return Hl(he(n,e,t,r,o,i,!0))}function Ii(n,e,t,r,o){return Hl(At(n,e,t,r,o,!0))}function Fl(n){return n?n.__v_isVNode===!0:!1}function Gn(n,e){return n.type===e.type&&n.key===e.key}const Bl=({key:n})=>n??null,Br=({ref:n,ref_key:e,ref_for:t})=>(typeof n=="number"&&(n=""+n),n!=null?Ce(n)||Re(n)||j(n)?{i:yt,r:n,k:e,f:!!t}:n:null);function he(n,e=null,t=null,r=0,o=null,i=n===Ze?0:1,s=!1,a=!1){const c={__v_isVNode:!0,__v_skip:!0,type:n,props:e,key:e&&Bl(e),ref:e&&Br(e),scopeId:pl,slotScopeIds:null,children:t,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:r,dynamicProps:o,dynamicChildren:null,appContext:null,ctx:yt};return a?(gs(c,t),i&128&&n.normalize(c)):t&&(c.shapeFlag|=Ce(t)?8:16),cr>0&&!s&&Ve&&(c.patchFlag>0||i&6)&&c.patchFlag!==32&&Ve.push(c),c}const At=ig;function ig(n,e=null,t=null,r=0,o=null,i=!1){if((!n||n===Rf)&&(n=an),Fl(n)){const a=Pn(n,e,!0);return t&&gs(a,t),cr>0&&!i&&Ve&&(a.shapeFlag&6?Ve[Ve.indexOf(n)]=a:Ve.push(a)),a.patchFlag=-2,a}if(mg(n)&&(n=n.__vccOpts),e){e=sg(e);let{class:a,style:c}=e;a&&!Ce(a)&&(e.class=ts(a)),ue(c)&&(ls(c)&&!$(c)&&(c=He({},c)),e.style=es(c))}const s=Ce(n)?1:Ul(n)?128:mf(n)?64:ue(n)?4:j(n)?2:0;return he(n,e,t,r,o,s,i,!0)}function sg(n){return n?ls(n)||Il(n)?He({},n):n:null}function Pn(n,e,t=!1,r=!1){const{props:o,ref:i,patchFlag:s,children:a,transition:c}=n,h=e?cg(o||{},e):o,l={__v_isVNode:!0,__v_skip:!0,type:n.type,props:h,key:h&&Bl(h),ref:e&&e.ref?t&&i?$(i)?i.concat(Br(e)):[i,Br(e)]:Br(e):i,scopeId:n.scopeId,slotScopeIds:n.slotScopeIds,children:a,target:n.target,targetStart:n.targetStart,targetAnchor:n.targetAnchor,staticCount:n.staticCount,shapeFlag:n.shapeFlag,patchFlag:e&&n.type!==Ze?s===-1?16:s|16:s,dynamicProps:n.dynamicProps,dynamicChildren:n.dynamicChildren,appContext:n.appContext,dirs:n.dirs,transition:c,component:n.component,suspense:n.suspense,ssContent:n.ssContent&&Pn(n.ssContent),ssFallback:n.ssFallback&&Pn(n.ssFallback),el:n.el,anchor:n.anchor,ctx:n.ctx,ce:n.ce};return c&&r&&ds(l,c.clone(l)),l}function ag(n=" ",e=0){return At(_o,null,n,e)}function Nt(n="",e=!1){return e?(ye(),Ii(an,null,n)):At(an,null,n)}function gt(n){return n==null||typeof n=="boolean"?At(an):$(n)?At(Ze,null,n.slice()):Fl(n)?Ut(n):At(_o,null,String(n))}function Ut(n){return n.el===null&&n.patchFlag!==-1||n.memo?n:Pn(n)}function gs(n,e){let t=0;const{shapeFlag:r}=n;if(e==null)e=null;else if($(e))t=16;else if(typeof e=="object")if(r&65){const o=e.default;o&&(o._c&&(o._d=!1),gs(n,o()),o._c&&(o._d=!0));return}else{t=32;const o=e._;!o&&!Il(e)?e._ctx=yt:o===3&&yt&&(yt.slots._===1?e._=1:(e._=2,n.patchFlag|=1024))}else j(e)?(e={default:e,_ctx:yt},t=32):(e=String(e),r&64?(t=16,e=[ag(e)]):t=8);n.children=e,n.shapeFlag|=t}function cg(...n){const e={};for(let t=0;t<n.length;t++){const r=n[t];for(const o in r)if(o==="class")e.class!==r.class&&(e.class=ts([e.class,r.class]));else if(o==="style")e.style=es([e.style,r.style]);else if(po(o)){const i=e[o],s=r[o];s&&i!==s&&!($(i)&&i.includes(s))&&(e[o]=i?[].concat(i,s):s)}else o!==""&&(e[o]=r[o])}return e}function ht(n,e,t,r=null){_t(n,e,7,[t,r])}const lg=wl();let hg=0;function dg(n,e,t){const r=n.type,o=(e?e.appContext:n.appContext)||lg,i={uid:hg++,vnode:n,type:r,parent:e,appContext:o,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new Mu(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(o.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:bl(r,o),emitsOptions:Ll(r,o),emit:null,emitted:null,propsDefaults:se,inheritAttrs:r.inheritAttrs,ctx:se,data:se,props:se,attrs:se,slots:se,refs:se,setupState:se,setupContext:null,suspense:t,suspenseId:t?t.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=e?e.root:i,i.emit=Xf.bind(null,i),n.ce&&n.ce(i),i}let Le=null,Jr,vi;{const n=Co(),e=(t,r)=>{let o;return(o=n[t])||(o=n[t]=[]),o.push(r),i=>{o.length>1?o.forEach(s=>s(i)):o[0](i)}};Jr=e("__VUE_INSTANCE_SETTERS__",t=>Le=t),vi=e("__VUE_SSR_SETTERS__",t=>lr=t)}const pr=n=>{const e=Le;return Jr(n),n.scope.on(),()=>{n.scope.off(),Jr(e)}},Da=()=>{Le&&Le.scope.off(),Jr(null)};function Kl(n){return n.vnode.shapeFlag&4}let lr=!1;function ug(n,e=!1,t=!1){e&&vi(e);const{props:r,children:o}=n.vnode,i=Kl(n);Hf(n,r,i,e),qf(n,o,t);const s=i?fg(n,e):void 0;return e&&vi(!1),s}function fg(n,e){const t=n.type;n.accessCache=Object.create(null),n.proxy=new Proxy(n.ctx,kf);const{setup:r}=t;if(r){jt();const o=n.setupContext=r.length>1?pg(n):null,i=pr(n),s=fr(r,n,0,[n.props,o]),a=Kc(s);if(Vt(),i(),(a||n.sp)&&!Jn(n)&&ml(n),a){if(s.then(Da,Da),e)return s.then(c=>{La(n,c)}).catch(c=>{Ao(c,n,0)});n.asyncDep=s}else La(n,s)}else ql(n)}function La(n,e,t){j(e)?n.type.__ssrInlineRender?n.ssrRender=e:n.render=e:ue(e)&&(n.setupState=hl(e)),ql(n)}function ql(n,e,t){const r=n.type;n.render||(n.render=r.render||Tt);{const o=pr(n);jt();try{Of(n)}finally{Vt(),o()}}}const gg={get(n,e){return Se(n,"get",""),n[e]}};function pg(n){const e=t=>{n.exposed=t||{}};return{attrs:new Proxy(n.attrs,gg),slots:n.slots,emit:n.emit,expose:e}}function ps(n){return n.exposed?n.exposeProxy||(n.exposeProxy=new Proxy(hl(ef(n.exposed)),{get(e,t){if(t in e)return e[t];if(t in Xn)return Xn[t](n)},has(e,t){return t in e||t in Xn}})):n.proxy}function mg(n){return j(n)&&"__vccOpts"in n}const ms=(n,e)=>af(n,e,lr),yg="3.5.13";/**
* @vue/runtime-dom v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let bi;const Ua=typeof window<"u"&&window.trustedTypes;if(Ua)try{bi=Ua.createPolicy("vue",{createHTML:n=>n})}catch{}const $l=bi?n=>bi.createHTML(n):n=>n,Cg="http://www.w3.org/2000/svg",Tg="http://www.w3.org/1998/Math/MathML",bt=typeof document<"u"?document:null,Ha=bt&&bt.createElement("template"),Ag={insert:(n,e,t)=>{e.insertBefore(n,t||null)},remove:n=>{const e=n.parentNode;e&&e.removeChild(n)},createElement:(n,e,t,r)=>{const o=e==="svg"?bt.createElementNS(Cg,n):e==="mathml"?bt.createElementNS(Tg,n):t?bt.createElement(n,{is:t}):bt.createElement(n);return n==="select"&&r&&r.multiple!=null&&o.setAttribute("multiple",r.multiple),o},createText:n=>bt.createTextNode(n),createComment:n=>bt.createComment(n),setText:(n,e)=>{n.nodeValue=e},setElementText:(n,e)=>{n.textContent=e},parentNode:n=>n.parentNode,nextSibling:n=>n.nextSibling,querySelector:n=>bt.querySelector(n),setScopeId(n,e){n.setAttribute(e,"")},insertStaticContent(n,e,t,r,o,i){const s=t?t.previousSibling:e.lastChild;if(o&&(o===i||o.nextSibling))for(;e.insertBefore(o.cloneNode(!0),t),!(o===i||!(o=o.nextSibling)););else{Ha.innerHTML=$l(r==="svg"?`<svg>${n}</svg>`:r==="mathml"?`<math>${n}</math>`:n);const a=Ha.content;if(r==="svg"||r==="mathml"){const c=a.firstChild;for(;c.firstChild;)a.appendChild(c.firstChild);a.removeChild(c)}e.insertBefore(a,t)}return[s?s.nextSibling:e.firstChild,t?t.previousSibling:e.lastChild]}},Eg=Symbol("_vtc");function wg(n,e,t){const r=n[Eg];r&&(e=(e?[e,...r]:[...r]).join(" ")),e==null?n.removeAttribute("class"):t?n.setAttribute("class",e):n.className=e}const Fa=Symbol("_vod"),_g=Symbol("_vsh"),Sg=Symbol(""),Ig=/(^|;)\s*display\s*:/;function vg(n,e,t){const r=n.style,o=Ce(t);let i=!1;if(t&&!o){if(e)if(Ce(e))for(const s of e.split(";")){const a=s.slice(0,s.indexOf(":")).trim();t[a]==null&&Kr(r,a,"")}else for(const s in e)t[s]==null&&Kr(r,s,"");for(const s in t)s==="display"&&(i=!0),Kr(r,s,t[s])}else if(o){if(e!==t){const s=r[Sg];s&&(t+=";"+s),r.cssText=t,i=Ig.test(t)}}else e&&n.removeAttribute("style");Fa in n&&(n[Fa]=i?r.display:"",n[_g]&&(r.display="none"))}const Ba=/\s*!important$/;function Kr(n,e,t){if($(t))t.forEach(r=>Kr(n,e,r));else if(t==null&&(t=""),e.startsWith("--"))n.setProperty(e,t);else{const r=bg(n,e);Ba.test(t)?n.setProperty(gn(r),t.replace(Ba,""),"important"):n[r]=t}}const Ka=["Webkit","Moz","ms"],si={};function bg(n,e){const t=si[e];if(t)return t;let r=$t(e);if(r!=="filter"&&r in n)return si[e]=r;r=Gc(r);for(let o=0;o<Ka.length;o++){const i=Ka[o]+r;if(i in n)return si[e]=i}return e}const qa="http://www.w3.org/1999/xlink";function $a(n,e,t,r,o,i=Nu(e)){r&&e.startsWith("xlink:")?t==null?n.removeAttributeNS(qa,e.slice(6,e.length)):n.setAttributeNS(qa,e,t):t==null||i&&!jc(t)?n.removeAttribute(e):n.setAttribute(e,i?"":zt(t)?String(t):t)}function Ga(n,e,t,r,o){if(e==="innerHTML"||e==="textContent"){t!=null&&(n[e]=e==="innerHTML"?$l(t):t);return}const i=n.tagName;if(e==="value"&&i!=="PROGRESS"&&!i.includes("-")){const a=i==="OPTION"?n.getAttribute("value")||"":n.value,c=t==null?n.type==="checkbox"?"on":"":String(t);(a!==c||!("_value"in n))&&(n.value=c),t==null&&n.removeAttribute(e),n._value=t;return}let s=!1;if(t===""||t==null){const a=typeof n[e];a==="boolean"?t=jc(t):t==null&&a==="string"?(t="",s=!0):a==="number"&&(t=0,s=!0)}try{n[e]=t}catch{}s&&n.removeAttribute(o||e)}function Rg(n,e,t,r){n.addEventListener(e,t,r)}function kg(n,e,t,r){n.removeEventListener(e,t,r)}const za=Symbol("_vei");function Og(n,e,t,r,o=null){const i=n[za]||(n[za]={}),s=i[e];if(r&&s)s.value=r;else{const[a,c]=Pg(e);if(r){const h=i[e]=xg(r,o);Rg(n,a,h,c)}else s&&(kg(n,a,s,c),i[e]=void 0)}}const ja=/(?:Once|Passive|Capture)$/;function Pg(n){let e;if(ja.test(n)){e={};let r;for(;r=n.match(ja);)n=n.slice(0,n.length-r[0].length),e[r[0].toLowerCase()]=!0}return[n[2]===":"?n.slice(3):gn(n.slice(2)),e]}let ai=0;const Ng=Promise.resolve(),Mg=()=>ai||(Ng.then(()=>ai=0),ai=Date.now());function xg(n,e){const t=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=t.attached)return;_t(Dg(r,t.value),e,5,[r])};return t.value=n,t.attached=Mg(),t}function Dg(n,e){if($(e)){const t=n.stopImmediatePropagation;return n.stopImmediatePropagation=()=>{t.call(n),n._stopped=!0},e.map(r=>o=>!o._stopped&&r&&r(o))}else return e}const Va=n=>n.charCodeAt(0)===111&&n.charCodeAt(1)===110&&n.charCodeAt(2)>96&&n.charCodeAt(2)<123,Lg=(n,e,t,r,o,i)=>{const s=o==="svg";e==="class"?wg(n,r,s):e==="style"?vg(n,t,r):po(e)?Ji(e)||Og(n,e,t,r,i):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):Ug(n,e,r,s))?(Ga(n,e,r),!n.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&$a(n,e,r,s,i,e!=="value")):n._isVueCE&&(/[A-Z]/.test(e)||!Ce(r))?Ga(n,$t(e),r,i,e):(e==="true-value"?n._trueValue=r:e==="false-value"&&(n._falseValue=r),$a(n,e,r,s))};function Ug(n,e,t,r){if(r)return!!(e==="innerHTML"||e==="textContent"||e in n&&Va(e)&&j(t));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&n.tagName==="INPUT"||e==="type"&&n.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const o=n.tagName;if(o==="IMG"||o==="VIDEO"||o==="CANVAS"||o==="SOURCE")return!1}return Va(e)&&Ce(t)?!1:e in n}const Hg=He({patchProp:Lg},Ag);let Wa;function Fg(){return Wa||(Wa=Gf(Hg))}const Bg=(...n)=>{const e=Fg().createApp(...n),{mount:t}=e;return e.mount=r=>{const o=qg(r);if(!o)return;const i=e._component;!j(i)&&!i.render&&!i.template&&(i.template=o.innerHTML),o.nodeType===1&&(o.textContent="");const s=t(o,!1,Kg(o));return o instanceof Element&&(o.removeAttribute("v-cloak"),o.setAttribute("data-v-app","")),s},e};function Kg(n){if(n instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&n instanceof MathMLElement)return"mathml"}function qg(n){return Ce(n)?document.querySelector(n):n}const $g="/assets/fmci-logo-transparent-BkTbEU7D.png",ys=(n,e)=>{const t=n.__vccOpts||n;for(const[r,o]of e)t[r]=o;return t},Gg={props:["isAuthenticated","events"],setup(n){const e=Ot(null);let t;const r=ms(()=>{const a=new Date,c=a.getDay(),h=new Date(a);h.setDate(a.getDate()-(c===0?6:c-1)),h.setHours(0,0,0,0);const l=new Date(h);return l.setDate(h.getDate()+4),l.setHours(23,59,59,999),n.events.filter(d=>{const g=new Date(d.start.dateTime),y=g>=h&&g<=l,m=d.isCancelled!=="true";return y&&m})});return Zn(r,a=>{console.log("this week events length: "+a.length),a.length>4&&e.value&&(t&&clearInterval(t),t=setInterval(()=>{e.value&&(e.value.scrollTop+=1,e.value.scrollTop>=e.value.scrollHeight-e.value.clientHeight&&(e.value.scrollTop=0))},50))},{immediate:!0}),gr(()=>{clearInterval(t)}),{scrollContainer:e,filteredEvents:r,getMonday:()=>{const a=new Date,c=a.getDay(),h=new Date(a);return h.setDate(a.getDate()-(c===0?6:c-1)),h.toLocaleDateString("en-GB")},formatDate:a=>new Date(a).toLocaleDateString("en-GB"),formatTime:a=>new Date(a).toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit"})}}},zg={key:0,class:"bg-blue-100 p-5 rounded-xl shadow-md max-w-[600px] w-full relative"},jg={class:"text-lg font-medium text-gray-600 mb-4"},Vg={class:"relative w-full h-full"},Wg={key:0,ref:"scrollContainer",class:"overflow-hidden flex flex-col space-y-4 max-h-[600px]"},Yg={class:"text-lg text-gray-800"},Qg={class:"text-gray-600"},Jg={class:"text-gray-600"},Xg={class:"text-gray-500"},Zg={key:1,class:""},ep={key:2,class:"pointer-events-none absolute bottom-0 left-0 right-0 h-12 bg-gradient-to-t from-blue-100 to-transparent"};function tp(n,e,t,r,o,i){return t.isAuthenticated?(ye(),Ee("div",zg,[e[1]||(e[1]=he("h2",{class:"text-2xl font-semibold text-gray-700 mb-2"},"This Weeks Schedule",-1)),he("h3",jg,"Week Starting: "+xe(r.getMonday()),1),he("div",Vg,[r.filteredEvents?(ye(),Ee("div",Wg,[(ye(!0),Ee(Ze,null,Tl(r.filteredEvents,s=>(ye(),Ee("div",{key:s.id,class:"bg-gray-100 p-3 rounded-lg shadow w-full"},[he("strong",Yg,xe(s.subject),1),he("p",Qg,"  "+xe(r.formatDate(s.start.dateTime))+"  "+xe(r.formatTime(s.start.dateTime))+" - "+xe(r.formatTime(s.end.dateTime)),1),he("p",Jg," "+xe(s.location.displayName||"No location"),1),he("p",Xg," Created by: "+xe(s.organizer.emailAddress.name),1)]))),128))],512)):(ye(),Ee("div",Zg,e[0]||(e[0]=[he("p",null," No events this week. ",-1)]))),r.filteredEvents.length>4?(ye(),Ee("div",ep)):Nt("",!0)])])):Nt("",!0)}const np=ys(Gg,[["render",tp]]),rp={props:["isAuthenticated","events"],setup(n){const e=Ot(null);let t;const r=ms(()=>{const a=new Date,c=a.getDay(),h=new Date(a);h.setDate(a.getDate()-(c===0?6:c-1)+7),h.setHours(0,0,0,0);const l=new Date(h);return l.setDate(h.getDate()+4),l.setHours(23,59,59,999),n.events.filter(d=>{const g=new Date(d.start.dateTime),y=g>=h&&g<=l,m=d.isCancelled!=="true";return y&&m})});return Zn(r,a=>{console.log("next week events length: "+a.length),a.length>4&&e.value&&(t&&clearInterval(t),t=setInterval(()=>{e.value&&(e.value.scrollTop+=1,e.value.scrollTop>=e.value.scrollHeight-e.value.clientHeight&&(e.value.scrollTop=0))},50))},{immediate:!0}),gr(()=>{clearInterval(t)}),{scrollContainer:e,filteredEvents:r,getNextMonday:()=>{const a=new Date,c=a.getDay(),h=new Date(a);return h.setDate(a.getDate()-(c===0?6:c-1)+7),h.toLocaleDateString("en-GB")},formatDate:a=>new Date(a).toLocaleDateString("en-GB"),formatTime:a=>new Date(a).toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit"})}}},op={key:0,class:"bg-blue-100 p-5 rounded-xl shadow-md max-w-[600px] w-full relative"},ip={class:"text-lg font-medium text-gray-600 mb-4"},sp={class:"relative w-full h-full"},ap={key:0,ref:"scrollContainer",class:"overflow-hidden flex flex-col space-y-4 max-h-[600px]"},cp={class:"text-lg text-gray-800"},lp={class:"text-gray-600"},hp={class:"text-gray-600"},dp={class:"text-gray-500"},up={key:1,class:""},fp={key:2,class:"pointer-events-none absolute bottom-0 left-0 right-0 h-12 bg-gradient-to-t from-blue-100 to-transparent"};function gp(n,e,t,r,o,i){return t.isAuthenticated?(ye(),Ee("div",op,[e[1]||(e[1]=he("h2",{class:"text-2xl font-semibold text-gray-700 mb-2"},"Next Weeks Schedule",-1)),he("h3",ip,"Week Starting: "+xe(r.getNextMonday()),1),he("div",sp,[r.filteredEvents?(ye(),Ee("div",ap,[(ye(!0),Ee(Ze,null,Tl(r.filteredEvents,s=>(ye(),Ee("div",{key:s.id,class:"bg-gray-100 p-3 rounded-lg shadow w-full"},[he("strong",cp,xe(s.subject),1),he("p",lp,"  "+xe(r.formatDate(s.start.dateTime))+"  "+xe(r.formatTime(s.start.dateTime))+" - "+xe(r.formatTime(s.end.dateTime)),1),he("p",hp," "+xe(s.location.displayName||"No location"),1),he("p",dp," Created by: "+xe(s.organizer.emailAddress.name),1)]))),128))],512)):(ye(),Ee("div",up,e[0]||(e[0]=[he("p",null," No events this week. ",-1)]))),r.filteredEvents.length>4?(ye(),Ee("div",fp)):Nt("",!0)])])):Nt("",!0)}const pp=ys(rp,[["render",gp]]);/*! @azure/msal-common v15.3.0 2025-03-20 */const E={LIBRARY_NAME:"MSAL.JS",SKU:"msal.js.common",CACHE_PREFIX:"msal",DEFAULT_AUTHORITY:"https://login.microsoftonline.com/common/",DEFAULT_AUTHORITY_HOST:"login.microsoftonline.com",DEFAULT_COMMON_TENANT:"common",ADFS:"adfs",DSTS:"dstsv2",AAD_INSTANCE_DISCOVERY_ENDPT:"https://login.microsoftonline.com/common/discovery/instance?api-version=1.1&authorization_endpoint=",CIAM_AUTH_URL:".ciamlogin.com",AAD_TENANT_DOMAIN_SUFFIX:".onmicrosoft.com",RESOURCE_DELIM:"|",NO_ACCOUNT:"NO_ACCOUNT",CLAIMS:"claims",CONSUMER_UTID:"9188040d-6c67-4c5b-b112-36a304b66dad",OPENID_SCOPE:"openid",PROFILE_SCOPE:"profile",OFFLINE_ACCESS_SCOPE:"offline_access",EMAIL_SCOPE:"email",CODE_RESPONSE_TYPE:"code",CODE_GRANT_TYPE:"authorization_code",RT_GRANT_TYPE:"refresh_token",FRAGMENT_RESPONSE_MODE:"fragment",S256_CODE_CHALLENGE_METHOD:"S256",URL_FORM_CONTENT_TYPE:"application/x-www-form-urlencoded;charset=utf-8",AUTHORIZATION_PENDING:"authorization_pending",NOT_DEFINED:"not_defined",EMPTY_STRING:"",NOT_APPLICABLE:"N/A",NOT_AVAILABLE:"Not Available",FORWARD_SLASH:"/",IMDS_ENDPOINT:"http://169.254.169.254/metadata/instance/compute/location",IMDS_VERSION:"2020-06-01",IMDS_TIMEOUT:2e3,AZURE_REGION_AUTO_DISCOVER_FLAG:"TryAutoDetect",REGIONAL_AUTH_PUBLIC_CLOUD_SUFFIX:"login.microsoft.com",KNOWN_PUBLIC_CLOUDS:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"],TOKEN_RESPONSE_TYPE:"token",ID_TOKEN_RESPONSE_TYPE:"id_token",SHR_NONCE_VALIDITY:240,INVALID_INSTANCE:"invalid_instance"},Or={CLIENT_ERROR_RANGE_START:400,CLIENT_ERROR_RANGE_END:499,SERVER_ERROR_RANGE_START:500,SERVER_ERROR_RANGE_END:599},mr=[E.OPENID_SCOPE,E.PROFILE_SCOPE,E.OFFLINE_ACCESS_SCOPE],Ya=[...mr,E.EMAIL_SCOPE],Me={CONTENT_TYPE:"Content-Type",CONTENT_LENGTH:"Content-Length",RETRY_AFTER:"Retry-After",CCS_HEADER:"X-AnchorMailbox",WWWAuthenticate:"WWW-Authenticate",AuthenticationInfo:"Authentication-Info",X_MS_REQUEST_ID:"x-ms-request-id",X_MS_HTTP_VERSION:"x-ms-httpver"},Qa={ACTIVE_ACCOUNT_FILTERS:"active-account-filters"},Kt={COMMON:"common",ORGANIZATIONS:"organizations",CONSUMERS:"consumers"},Pr={ACCESS_TOKEN:"access_token",XMS_CC:"xms_cc"},Te={LOGIN:"login",SELECT_ACCOUNT:"select_account",CONSENT:"consent",NONE:"none",CREATE:"create",NO_SESSION:"no_session"},Ja={PLAIN:"plain",S256:"S256"},yr={QUERY:"query",FRAGMENT:"fragment"},mp={...yr},Gl={AUTHORIZATION_CODE_GRANT:"authorization_code",REFRESH_TOKEN_GRANT:"refresh_token"},Nr={MSSTS_ACCOUNT_TYPE:"MSSTS",ADFS_ACCOUNT_TYPE:"ADFS",GENERIC_ACCOUNT_TYPE:"Generic"},ve={CACHE_KEY_SEPARATOR:"-",CLIENT_INFO_SEPARATOR:"."},G={ID_TOKEN:"IdToken",ACCESS_TOKEN:"AccessToken",ACCESS_TOKEN_WITH_AUTH_SCHEME:"AccessToken_With_AuthScheme",REFRESH_TOKEN:"RefreshToken"},Cs="appmetadata",yp="client_info",tr="1",Xr={CACHE_KEY:"authority-metadata",REFRESH_TIME_SECONDS:3600*24},ze={CONFIG:"config",CACHE:"cache",NETWORK:"network",HARDCODED_VALUES:"hardcoded_values"},Ae={SCHEMA_VERSION:5,MAX_LAST_HEADER_BYTES:330,MAX_CACHED_ERRORS:50,CACHE_KEY:"server-telemetry",CATEGORY_SEPARATOR:"|",VALUE_SEPARATOR:",",OVERFLOW_TRUE:"1",OVERFLOW_FALSE:"0",UNKNOWN_ERROR:"unknown_error"},ne={BEARER:"Bearer",POP:"pop",SSH:"ssh-cert"},nr={DEFAULT_THROTTLE_TIME_SECONDS:60,DEFAULT_MAX_THROTTLE_TIME_SECONDS:3600,THROTTLING_PREFIX:"throttling",X_MS_LIB_CAPABILITY_VALUE:"retry-after, h429"},Xa={INVALID_GRANT_ERROR:"invalid_grant",CLIENT_MISMATCH_ERROR:"client_mismatch"},Mr={httpSuccess:200,httpBadRequest:400},mn={FAILED_AUTO_DETECTION:"1",INTERNAL_CACHE:"2",ENVIRONMENT_VARIABLE:"3",IMDS:"4"},ci={CONFIGURED_NO_AUTO_DETECTION:"2",AUTO_DETECTION_REQUESTED_SUCCESSFUL:"4",AUTO_DETECTION_REQUESTED_FAILED:"5"},en={NOT_APPLICABLE:"0",FORCE_REFRESH_OR_CLAIMS:"1",NO_CACHED_ACCESS_TOKEN:"2",CACHED_ACCESS_TOKEN_EXPIRED:"3",PROACTIVELY_REFRESHED:"4"},Cp={Pop:"pop"},Tp=300;/*! @azure/msal-common v15.3.0 2025-03-20 */const Ts="unexpected_error",Ap="post_request_failed";/*! @azure/msal-common v15.3.0 2025-03-20 */const Za={[Ts]:"Unexpected error in authentication.",[Ap]:"Post request failed from the network, could be a 4xx/5xx or a network unavailability. Please check the exact error code for details."};class ce extends Error{constructor(e,t,r){const o=t?`${e}: ${t}`:e;super(o),Object.setPrototypeOf(this,ce.prototype),this.errorCode=e||E.EMPTY_STRING,this.errorMessage=t||E.EMPTY_STRING,this.subError=r||E.EMPTY_STRING,this.name="AuthError"}setCorrelationId(e){this.correlationId=e}}function zl(n,e){return new ce(n,e?`${Za[n]} ${e}`:Za[n])}/*! @azure/msal-common v15.3.0 2025-03-20 */const As="client_info_decoding_error",jl="client_info_empty_error",Es="token_parsing_error",Vl="null_or_empty_token",Rt="endpoints_resolution_error",Wl="network_error",Yl="openid_config_error",Ql="hash_not_deserialized",Nn="invalid_state",Jl="state_mismatch",Zr="state_not_found",Xl="nonce_mismatch",ws="auth_time_not_found",Zl="max_age_transpired",Ep="multiple_matching_tokens",wp="multiple_matching_accounts",eh="multiple_matching_appMetadata",th="request_cannot_be_made",nh="cannot_remove_empty_scope",rh="cannot_append_scopeset",Ri="empty_input_scopeset",_p="device_code_polling_cancelled",Sp="device_code_expired",Ip="device_code_unknown_error",_s="no_account_in_silent_request",oh="invalid_cache_record",Ss="invalid_cache_environment",ki="no_account_found",Oi="no_crypto_object",Pi="unexpected_credential_type",vp="invalid_assertion",bp="invalid_client_credential",qt="token_refresh_required",Rp="user_timeout_reached",ih="token_claims_cnf_required_for_signedjwt",sh="authorization_code_missing_from_server_response",ah="binding_key_not_removed",ch="end_session_endpoint_not_supported",Is="key_id_missing",kp="no_network_connectivity",Op="user_canceled",Pp="missing_tenant_id_error",W="method_not_implemented",Np="nested_app_auth_bridge_disabled";/*! @azure/msal-common v15.3.0 2025-03-20 */const ec={[As]:"The client info could not be parsed/decoded correctly",[jl]:"The client info was empty",[Es]:"Token cannot be parsed",[Vl]:"The token is null or empty",[Rt]:"Endpoints cannot be resolved",[Wl]:"Network request failed",[Yl]:"Could not retrieve endpoints. Check your authority and verify the .well-known/openid-configuration endpoint returns the required endpoints.",[Ql]:"The hash parameters could not be deserialized",[Nn]:"State was not the expected format",[Jl]:"State mismatch error",[Zr]:"State not found",[Xl]:"Nonce mismatch error",[ws]:"Max Age was requested and the ID token is missing the auth_time variable. auth_time is an optional claim and is not enabled by default - it must be enabled. See https://aka.ms/msaljs/optional-claims for more information.",[Zl]:"Max Age is set to 0, or too much time has elapsed since the last end-user authentication.",[Ep]:"The cache contains multiple tokens satisfying the requirements. Call AcquireToken again providing more requirements such as authority or account.",[wp]:"The cache contains multiple accounts satisfying the given parameters. Please pass more info to obtain the correct account",[eh]:"The cache contains multiple appMetadata satisfying the given parameters. Please pass more info to obtain the correct appMetadata",[th]:"Token request cannot be made without authorization code or refresh token.",[nh]:"Cannot remove null or empty scope from ScopeSet",[rh]:"Cannot append ScopeSet",[Ri]:"Empty input ScopeSet cannot be processed",[_p]:"Caller has cancelled token endpoint polling during device code flow by setting DeviceCodeRequest.cancel = true.",[Sp]:"Device code is expired.",[Ip]:"Device code stopped polling for unknown reasons.",[_s]:"Please pass an account object, silent flow is not supported without account information",[oh]:"Cache record object was null or undefined.",[Ss]:"Invalid environment when attempting to create cache entry",[ki]:"No account found in cache for given key.",[Oi]:"No crypto object detected.",[Pi]:"Unexpected credential type.",[vp]:"Client assertion must meet requirements described in https://tools.ietf.org/html/rfc7515",[bp]:"Client credential (secret, certificate, or assertion) must not be empty when creating a confidential client. An application should at most have one credential",[qt]:"Cannot return token from cache because it must be refreshed. This may be due to one of the following reasons: forceRefresh parameter is set to true, claims have been requested, there is no cached access token or it is expired.",[Rp]:"User defined timeout for device code polling reached",[ih]:"Cannot generate a POP jwt if the token_claims are not populated",[sh]:"Server response does not contain an authorization code to proceed",[ah]:"Could not remove the credential's binding key from storage.",[ch]:"The provided authority does not support logout",[Is]:"A keyId value is missing from the requested bound token's cache record and is required to match the token to it's stored binding key.",[kp]:"No network connectivity. Check your internet connection.",[Op]:"User cancelled the flow.",[Pp]:"A tenant id - not common, organizations, or consumers - must be specified when using the client_credentials flow.",[W]:"This method has not been implemented",[Np]:"The nested app auth bridge is disabled"};class vs extends ce{constructor(e,t){super(e,t?`${ec[e]}: ${t}`:ec[e]),this.name="ClientAuthError",Object.setPrototypeOf(this,vs.prototype)}}function S(n,e){return new vs(n,e)}/*! @azure/msal-common v15.3.0 2025-03-20 */const eo={createNewGuid:()=>{throw S(W)},base64Decode:()=>{throw S(W)},base64Encode:()=>{throw S(W)},base64UrlEncode:()=>{throw S(W)},encodeKid:()=>{throw S(W)},async getPublicKeyThumbprint(){throw S(W)},async removeTokenBindingKey(){throw S(W)},async clearKeystore(){throw S(W)},async signJwt(){throw S(W)},async hashString(){throw S(W)}};/*! @azure/msal-common v15.3.0 2025-03-20 */var le;(function(n){n[n.Error=0]="Error",n[n.Warning=1]="Warning",n[n.Info=2]="Info",n[n.Verbose=3]="Verbose",n[n.Trace=4]="Trace"})(le||(le={}));class Gt{constructor(e,t,r){this.level=le.Info;const o=()=>{},i=e||Gt.createDefaultLoggerOptions();this.localCallback=i.loggerCallback||o,this.piiLoggingEnabled=i.piiLoggingEnabled||!1,this.level=typeof i.logLevel=="number"?i.logLevel:le.Info,this.correlationId=i.correlationId||E.EMPTY_STRING,this.packageName=t||E.EMPTY_STRING,this.packageVersion=r||E.EMPTY_STRING}static createDefaultLoggerOptions(){return{loggerCallback:()=>{},piiLoggingEnabled:!1,logLevel:le.Info}}clone(e,t,r){return new Gt({loggerCallback:this.localCallback,piiLoggingEnabled:this.piiLoggingEnabled,logLevel:this.level,correlationId:r||this.correlationId},e,t)}logMessage(e,t){if(t.logLevel>this.level||!this.piiLoggingEnabled&&t.containsPii)return;const i=`${`[${new Date().toUTCString()}] : [${t.correlationId||this.correlationId||""}]`} : ${this.packageName}@${this.packageVersion} : ${le[t.logLevel]} - ${e}`;this.executeCallback(t.logLevel,i,t.containsPii||!1)}executeCallback(e,t,r){this.localCallback&&this.localCallback(e,t,r)}error(e,t){this.logMessage(e,{logLevel:le.Error,containsPii:!1,correlationId:t||E.EMPTY_STRING})}errorPii(e,t){this.logMessage(e,{logLevel:le.Error,containsPii:!0,correlationId:t||E.EMPTY_STRING})}warning(e,t){this.logMessage(e,{logLevel:le.Warning,containsPii:!1,correlationId:t||E.EMPTY_STRING})}warningPii(e,t){this.logMessage(e,{logLevel:le.Warning,containsPii:!0,correlationId:t||E.EMPTY_STRING})}info(e,t){this.logMessage(e,{logLevel:le.Info,containsPii:!1,correlationId:t||E.EMPTY_STRING})}infoPii(e,t){this.logMessage(e,{logLevel:le.Info,containsPii:!0,correlationId:t||E.EMPTY_STRING})}verbose(e,t){this.logMessage(e,{logLevel:le.Verbose,containsPii:!1,correlationId:t||E.EMPTY_STRING})}verbosePii(e,t){this.logMessage(e,{logLevel:le.Verbose,containsPii:!0,correlationId:t||E.EMPTY_STRING})}trace(e,t){this.logMessage(e,{logLevel:le.Trace,containsPii:!1,correlationId:t||E.EMPTY_STRING})}tracePii(e,t){this.logMessage(e,{logLevel:le.Trace,containsPii:!0,correlationId:t||E.EMPTY_STRING})}isPiiLoggingEnabled(){return this.piiLoggingEnabled||!1}}/*! @azure/msal-common v15.3.0 2025-03-20 */const lh="@azure/msal-common",bs="15.3.0";/*! @azure/msal-common v15.3.0 2025-03-20 */const Rs={None:"none"};/*! @azure/msal-common v15.3.0 2025-03-20 */function Dn(n,e){const t=Mp(n);try{const r=e(t);return JSON.parse(r)}catch{throw S(Es)}}function Mp(n){if(!n)throw S(Vl);const t=/^([^\.\s]*)\.([^\.\s]+)\.([^\.\s]*)$/.exec(n);if(!t||t.length<4)throw S(Es);return t[2]}function hh(n,e){if(e===0||Date.now()-3e5>n+e)throw S(Zl)}/*! @azure/msal-common v15.3.0 2025-03-20 */function Je(){return Math.round(new Date().getTime()/1e3)}function tc(n){return n.getTime()/1e3}function vn(n){return n?new Date(Number(n)*1e3):new Date}function Ni(n,e){const t=Number(n)||0;return Je()+e>t}function xp(n){return Number(n)>Je()}/*! @azure/msal-common v15.3.0 2025-03-20 */function rr(n){return[Hp(n),Fp(n),Bp(n),Kp(n),qp(n)].join(ve.CACHE_KEY_SEPARATOR).toLowerCase()}function So(n,e,t,r,o){return{credentialType:G.ID_TOKEN,homeAccountId:n,environment:e,clientId:r,secret:t,realm:o}}function Io(n,e,t,r,o,i,s,a,c,h,l,d,g,y,m){var I,M;const A={homeAccountId:n,credentialType:G.ACCESS_TOKEN,secret:t,cachedAt:Je().toString(),expiresOn:s.toString(),extendedExpiresOn:a.toString(),environment:e,clientId:r,realm:o,target:i,tokenType:l||ne.BEARER};if(d&&(A.userAssertionHash=d),h&&(A.refreshOn=h.toString()),y&&(A.requestedClaims=y,A.requestedClaimsHash=m),((I=A.tokenType)==null?void 0:I.toLowerCase())!==ne.BEARER.toLowerCase())switch(A.credentialType=G.ACCESS_TOKEN_WITH_AUTH_SCHEME,A.tokenType){case ne.POP:const L=Dn(t,c);if(!((M=L==null?void 0:L.cnf)!=null&&M.kid))throw S(ih);A.keyId=L.cnf.kid;break;case ne.SSH:A.keyId=g}return A}function dh(n,e,t,r,o,i,s){const a={credentialType:G.REFRESH_TOKEN,homeAccountId:n,environment:e,clientId:r,secret:t};return i&&(a.userAssertionHash=i),o&&(a.familyId=o),s&&(a.expiresOn=s.toString()),a}function ks(n){return n.hasOwnProperty("homeAccountId")&&n.hasOwnProperty("environment")&&n.hasOwnProperty("credentialType")&&n.hasOwnProperty("clientId")&&n.hasOwnProperty("secret")}function Dp(n){return n?ks(n)&&n.hasOwnProperty("realm")&&n.hasOwnProperty("target")&&(n.credentialType===G.ACCESS_TOKEN||n.credentialType===G.ACCESS_TOKEN_WITH_AUTH_SCHEME):!1}function Lp(n){return n?ks(n)&&n.hasOwnProperty("realm")&&n.credentialType===G.ID_TOKEN:!1}function Up(n){return n?ks(n)&&n.credentialType===G.REFRESH_TOKEN:!1}function Hp(n){return[n.homeAccountId,n.environment].join(ve.CACHE_KEY_SEPARATOR).toLowerCase()}function Fp(n){const e=n.credentialType===G.REFRESH_TOKEN&&n.familyId||n.clientId;return[n.credentialType,e,n.realm||""].join(ve.CACHE_KEY_SEPARATOR).toLowerCase()}function Bp(n){return(n.target||"").toLowerCase()}function Kp(n){return(n.requestedClaimsHash||"").toLowerCase()}function qp(n){return n.tokenType&&n.tokenType.toLowerCase()!==ne.BEARER.toLowerCase()?n.tokenType.toLowerCase():""}function $p(n,e){const t=n.indexOf(Ae.CACHE_KEY)===0;let r=!0;return e&&(r=e.hasOwnProperty("failedRequests")&&e.hasOwnProperty("errors")&&e.hasOwnProperty("cacheHits")),t&&r}function Gp(n,e){let t=!1;n&&(t=n.indexOf(nr.THROTTLING_PREFIX)===0);let r=!0;return e&&(r=e.hasOwnProperty("throttleTime")),t&&r}function zp({environment:n,clientId:e}){return[Cs,n,e].join(ve.CACHE_KEY_SEPARATOR).toLowerCase()}function jp(n,e){return e?n.indexOf(Cs)===0&&e.hasOwnProperty("clientId")&&e.hasOwnProperty("environment"):!1}function Vp(n,e){return e?n.indexOf(Xr.CACHE_KEY)===0&&e.hasOwnProperty("aliases")&&e.hasOwnProperty("preferred_cache")&&e.hasOwnProperty("preferred_network")&&e.hasOwnProperty("canonical_authority")&&e.hasOwnProperty("authorization_endpoint")&&e.hasOwnProperty("token_endpoint")&&e.hasOwnProperty("issuer")&&e.hasOwnProperty("aliasesFromNetwork")&&e.hasOwnProperty("endpointsFromNetwork")&&e.hasOwnProperty("expiresAt")&&e.hasOwnProperty("jwks_uri"):!1}function nc(){return Je()+Xr.REFRESH_TIME_SECONDS}function xr(n,e,t){n.authorization_endpoint=e.authorization_endpoint,n.token_endpoint=e.token_endpoint,n.end_session_endpoint=e.end_session_endpoint,n.issuer=e.issuer,n.endpointsFromNetwork=t,n.jwks_uri=e.jwks_uri}function li(n,e,t){n.aliases=e.aliases,n.preferred_cache=e.preferred_cache,n.preferred_network=e.preferred_network,n.aliasesFromNetwork=t}function rc(n){return n.expiresAt<=Je()}/*! @azure/msal-common v15.3.0 2025-03-20 */const uh="redirect_uri_empty",Wp="claims_request_parsing_error",fh="authority_uri_insecure",Vn="url_parse_error",gh="empty_url_error",ph="empty_input_scopes_error",mh="invalid_prompt_value",vo="invalid_claims",yh="token_request_empty",Ch="logout_request_empty",Th="invalid_code_challenge_method",bo="pkce_params_missing",Os="invalid_cloud_discovery_metadata",Ah="invalid_authority_metadata",Eh="untrusted_authority",Ro="missing_ssh_jwk",wh="missing_ssh_kid",Yp="missing_nonce_authentication_header",Qp="invalid_authentication_header",_h="cannot_set_OIDCOptions",Sh="cannot_allow_platform_broker",Ih="authority_mismatch";/*! @azure/msal-common v15.3.0 2025-03-20 */const Jp={[uh]:"A redirect URI is required for all calls, and none has been set.",[Wp]:"Could not parse the given claims request object.",[fh]:"Authority URIs must use https.  Please see here for valid authority configuration options: https://docs.microsoft.com/en-us/azure/active-directory/develop/msal-js-initializing-client-applications#configuration-options",[Vn]:"URL could not be parsed into appropriate segments.",[gh]:"URL was empty or null.",[ph]:"Scopes cannot be passed as null, undefined or empty array because they are required to obtain an access token.",[mh]:"Please see here for valid configuration options: https://azuread.github.io/microsoft-authentication-library-for-js/ref/modules/_azure_msal_common.html#commonauthorizationurlrequest",[vo]:"Given claims parameter must be a stringified JSON object.",[yh]:"Token request was empty and not found in cache.",[Ch]:"The logout request was null or undefined.",[Th]:'code_challenge_method passed is invalid. Valid values are "plain" and "S256".',[bo]:"Both params: code_challenge and code_challenge_method are to be passed if to be sent in the request",[Os]:"Invalid cloudDiscoveryMetadata provided. Must be a stringified JSON object containing tenant_discovery_endpoint and metadata fields",[Ah]:"Invalid authorityMetadata provided. Must by a stringified JSON object containing authorization_endpoint, token_endpoint, issuer fields.",[Eh]:"The provided authority is not a trusted authority. Please include this authority in the knownAuthorities config parameter.",[Ro]:"Missing sshJwk in SSH certificate request. A stringified JSON Web Key is required when using the SSH authentication scheme.",[wh]:"Missing sshKid in SSH certificate request. A string that uniquely identifies the public SSH key is required when using the SSH authentication scheme.",[Yp]:"Unable to find an authentication header containing server nonce. Either the Authentication-Info or WWW-Authenticate headers must be present in order to obtain a server nonce.",[Qp]:"Invalid authentication header provided",[_h]:"Cannot set OIDCOptions parameter. Please change the protocol mode to OIDC or use a non-Microsoft authority.",[Sh]:"Cannot set allowPlatformBroker parameter to true when not in AAD protocol mode.",[Ih]:"Authority mismatch error. Authority provided in login request or PublicClientApplication config does not match the environment of the provided account. Please use a matching account or make an interactive request to login to this authority."};class Ps extends ce{constructor(e){super(e,Jp[e]),this.name="ClientConfigurationError",Object.setPrototypeOf(this,Ps.prototype)}}function te(n){return new Ps(n)}/*! @azure/msal-common v15.3.0 2025-03-20 */class Et{static isEmptyObj(e){if(e)try{const t=JSON.parse(e);return Object.keys(t).length===0}catch{}return!0}static startsWith(e,t){return e.indexOf(t)===0}static endsWith(e,t){return e.length>=t.length&&e.lastIndexOf(t)===e.length-t.length}static queryStringToObject(e){const t={},r=e.split("&"),o=i=>decodeURIComponent(i.replace(/\+/g," "));return r.forEach(i=>{if(i.trim()){const[s,a]=i.split(/=(.+)/g,2);s&&a&&(t[o(s)]=o(a))}}),t}static trimArrayEntries(e){return e.map(t=>t.trim())}static removeEmptyStringsFromArray(e){return e.filter(t=>!!t)}static jsonParseHelper(e){try{return JSON.parse(e)}catch{return null}}static matchPattern(e,t){return new RegExp(e.replace(/\\/g,"\\\\").replace(/\*/g,"[^ ]*").replace(/\?/g,"\\?")).test(t)}}/*! @azure/msal-common v15.3.0 2025-03-20 */class pe{constructor(e){const t=e?Et.trimArrayEntries([...e]):[],r=t?Et.removeEmptyStringsFromArray(t):[];if(!r||!r.length)throw te(ph);this.scopes=new Set,r.forEach(o=>this.scopes.add(o))}static fromString(e){const r=(e||E.EMPTY_STRING).split(" ");return new pe(r)}static createSearchScopes(e){const t=new pe(e);return t.containsOnlyOIDCScopes()?t.removeScope(E.OFFLINE_ACCESS_SCOPE):t.removeOIDCScopes(),t}containsScope(e){const t=this.printScopesLowerCase().split(" "),r=new pe(t);return e?r.scopes.has(e.toLowerCase()):!1}containsScopeSet(e){return!e||e.scopes.size<=0?!1:this.scopes.size>=e.scopes.size&&e.asArray().every(t=>this.containsScope(t))}containsOnlyOIDCScopes(){let e=0;return Ya.forEach(t=>{this.containsScope(t)&&(e+=1)}),this.scopes.size===e}appendScope(e){e&&this.scopes.add(e.trim())}appendScopes(e){try{e.forEach(t=>this.appendScope(t))}catch{throw S(rh)}}removeScope(e){if(!e)throw S(nh);this.scopes.delete(e.trim())}removeOIDCScopes(){Ya.forEach(e=>{this.scopes.delete(e)})}unionScopeSets(e){if(!e)throw S(Ri);const t=new Set;return e.scopes.forEach(r=>t.add(r.toLowerCase())),this.scopes.forEach(r=>t.add(r.toLowerCase())),t}intersectingScopeSets(e){if(!e)throw S(Ri);e.containsOnlyOIDCScopes()||e.removeOIDCScopes();const t=this.unionScopeSets(e),r=e.getScopeCount(),o=this.getScopeCount();return t.size<o+r}getScopeCount(){return this.scopes.size}asArray(){const e=[];return this.scopes.forEach(t=>e.push(t)),e}printScopes(){return this.scopes?this.asArray().join(" "):E.EMPTY_STRING}printScopesLowerCase(){return this.printScopes().toLowerCase()}}/*! @azure/msal-common v15.3.0 2025-03-20 */function to(n,e){if(!n)throw S(jl);try{const t=e(n);return JSON.parse(t)}catch{throw S(As)}}function bn(n){if(!n)throw S(As);const e=n.split(ve.CLIENT_INFO_SEPARATOR,2);return{uid:e[0],utid:e.length<2?E.EMPTY_STRING:e[1]}}/*! @azure/msal-common v15.3.0 2025-03-20 */function oc(n,e){return!!n&&!!e&&n===e.split(".")[1]}function Ns(n,e,t,r){if(r){const{oid:o,sub:i,tid:s,name:a,tfp:c,acr:h}=r,l=s||c||h||"";return{tenantId:l,localAccountId:o||i||"",name:a,isHomeTenant:oc(l,n)}}else return{tenantId:t,localAccountId:e,isHomeTenant:oc(t,n)}}function Ms(n,e,t,r){let o=n;if(e){const{isHomeTenant:i,...s}=e;o={...n,...s}}if(t){const{isHomeTenant:i,...s}=Ns(n.homeAccountId,n.localAccountId,n.tenantId,t);return o={...o,...s,idTokenClaims:t,idToken:r},o}return o}/*! @azure/msal-common v15.3.0 2025-03-20 */const Xe={Default:0,Adfs:1,Dsts:2,Ciam:3};/*! @azure/msal-common v15.3.0 2025-03-20 */function vh(n){return n&&(n.tid||n.tfp||n.acr)||null}/*! @azure/msal-common v15.3.0 2025-03-20 */const wt={AAD:"AAD",OIDC:"OIDC"};/*! @azure/msal-common v15.3.0 2025-03-20 */class Ue{generateAccountId(){return[this.homeAccountId,this.environment].join(ve.CACHE_KEY_SEPARATOR).toLowerCase()}generateAccountKey(){return Ue.generateAccountCacheKey({homeAccountId:this.homeAccountId,environment:this.environment,tenantId:this.realm,username:this.username,localAccountId:this.localAccountId})}getAccountInfo(){return{homeAccountId:this.homeAccountId,environment:this.environment,tenantId:this.realm,username:this.username,localAccountId:this.localAccountId,name:this.name,nativeAccountId:this.nativeAccountId,authorityType:this.authorityType,tenantProfiles:new Map((this.tenantProfiles||[]).map(e=>[e.tenantId,e]))}}isSingleTenant(){return!this.tenantProfiles}static generateAccountCacheKey(e){const t=e.homeAccountId.split(".")[1];return[e.homeAccountId,e.environment||"",t||e.tenantId||""].join(ve.CACHE_KEY_SEPARATOR).toLowerCase()}static createAccount(e,t,r){var h,l,d,g,y,m;const o=new Ue;t.authorityType===Xe.Adfs?o.authorityType=Nr.ADFS_ACCOUNT_TYPE:t.protocolMode===wt.AAD?o.authorityType=Nr.MSSTS_ACCOUNT_TYPE:o.authorityType=Nr.GENERIC_ACCOUNT_TYPE;let i;e.clientInfo&&r&&(i=to(e.clientInfo,r)),o.clientInfo=e.clientInfo,o.homeAccountId=e.homeAccountId,o.nativeAccountId=e.nativeAccountId;const s=e.environment||t&&t.getPreferredCache();if(!s)throw S(Ss);o.environment=s,o.realm=(i==null?void 0:i.utid)||vh(e.idTokenClaims)||"",o.localAccountId=(i==null?void 0:i.uid)||((h=e.idTokenClaims)==null?void 0:h.oid)||((l=e.idTokenClaims)==null?void 0:l.sub)||"";const a=((d=e.idTokenClaims)==null?void 0:d.preferred_username)||((g=e.idTokenClaims)==null?void 0:g.upn),c=(y=e.idTokenClaims)!=null&&y.emails?e.idTokenClaims.emails[0]:null;if(o.username=a||c||"",o.name=((m=e.idTokenClaims)==null?void 0:m.name)||"",o.cloudGraphHostName=e.cloudGraphHostName,o.msGraphHost=e.msGraphHost,e.tenantProfiles)o.tenantProfiles=e.tenantProfiles;else{const A=Ns(e.homeAccountId,o.localAccountId,o.realm,e.idTokenClaims);o.tenantProfiles=[A]}return o}static createFromAccountInfo(e,t,r){var i;const o=new Ue;return o.authorityType=e.authorityType||Nr.GENERIC_ACCOUNT_TYPE,o.homeAccountId=e.homeAccountId,o.localAccountId=e.localAccountId,o.nativeAccountId=e.nativeAccountId,o.realm=e.tenantId,o.environment=e.environment,o.username=e.username,o.name=e.name,o.cloudGraphHostName=t,o.msGraphHost=r,o.tenantProfiles=Array.from(((i=e.tenantProfiles)==null?void 0:i.values())||[]),o}static generateHomeAccountId(e,t,r,o,i){if(!(t===Xe.Adfs||t===Xe.Dsts)){if(e)try{const s=to(e,o.base64Decode);if(s.uid&&s.utid)return`${s.uid}.${s.utid}`}catch{}r.warning("No client info in response")}return(i==null?void 0:i.sub)||""}static isAccountEntity(e){return e?e.hasOwnProperty("homeAccountId")&&e.hasOwnProperty("environment")&&e.hasOwnProperty("realm")&&e.hasOwnProperty("localAccountId")&&e.hasOwnProperty("username")&&e.hasOwnProperty("authorityType"):!1}static accountInfoIsEqual(e,t,r){if(!e||!t)return!1;let o=!0;if(r){const i=e.idTokenClaims||{},s=t.idTokenClaims||{};o=i.iat===s.iat&&i.nonce===s.nonce}return e.homeAccountId===t.homeAccountId&&e.localAccountId===t.localAccountId&&e.username===t.username&&e.tenantId===t.tenantId&&e.environment===t.environment&&e.nativeAccountId===t.nativeAccountId&&o}}/*! @azure/msal-common v15.3.0 2025-03-20 */function bh(n){return n.startsWith("#/")?n.substring(2):n.startsWith("#")||n.startsWith("?")?n.substring(1):n}function no(n){if(!n||n.indexOf("=")<0)return null;try{const e=bh(n),t=Object.fromEntries(new URLSearchParams(e));if(t.code||t.error||t.error_description||t.state)return t}catch{throw S(Ql)}return null}function hr(n){const e=new Array;return n.forEach((t,r)=>{e.push(`${r}=${encodeURIComponent(t)}`)}),e.join("&")}/*! @azure/msal-common v15.3.0 2025-03-20 */class Q{get urlString(){return this._urlString}constructor(e){if(this._urlString=e,!this._urlString)throw te(gh);e.includes("#")||(this._urlString=Q.canonicalizeUri(e))}static canonicalizeUri(e){if(e){let t=e.toLowerCase();return Et.endsWith(t,"?")?t=t.slice(0,-1):Et.endsWith(t,"?/")&&(t=t.slice(0,-2)),Et.endsWith(t,"/")||(t+="/"),t}return e}validateAsUri(){let e;try{e=this.getUrlComponents()}catch{throw te(Vn)}if(!e.HostNameAndPort||!e.PathSegments)throw te(Vn);if(!e.Protocol||e.Protocol.toLowerCase()!=="https:")throw te(fh)}static appendQueryString(e,t){return t?e.indexOf("?")<0?`${e}?${t}`:`${e}&${t}`:e}static removeHashFromUrl(e){return Q.canonicalizeUri(e.split("#")[0])}replaceTenantPath(e){const t=this.getUrlComponents(),r=t.PathSegments;return e&&r.length!==0&&(r[0]===Kt.COMMON||r[0]===Kt.ORGANIZATIONS)&&(r[0]=e),Q.constructAuthorityUriFromObject(t)}getUrlComponents(){const e=RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?"),t=this.urlString.match(e);if(!t)throw te(Vn);const r={Protocol:t[1],HostNameAndPort:t[4],AbsolutePath:t[5],QueryString:t[7]};let o=r.AbsolutePath.split("/");return o=o.filter(i=>i&&i.length>0),r.PathSegments=o,r.QueryString&&r.QueryString.endsWith("/")&&(r.QueryString=r.QueryString.substring(0,r.QueryString.length-1)),r}static getDomainFromUrl(e){const t=RegExp("^([^:/?#]+://)?([^/?#]*)"),r=e.match(t);if(!r)throw te(Vn);return r[2]}static getAbsoluteUrl(e,t){if(e[0]===E.FORWARD_SLASH){const o=new Q(t).getUrlComponents();return o.Protocol+"//"+o.HostNameAndPort+e}return e}static constructAuthorityUriFromObject(e){return new Q(e.Protocol+"//"+e.HostNameAndPort+"/"+e.PathSegments.join("/"))}static hashContainsKnownProperties(e){return!!no(e)}}/*! @azure/msal-common v15.3.0 2025-03-20 */const Rh={endpointMetadata:{"login.microsoftonline.com":{token_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.microsoftonline.com/{tenantid}/discovery/v2.0/keys",issuer:"https://login.microsoftonline.com/{tenantid}/v2.0",authorization_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/logout"},"login.chinacloudapi.cn":{token_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.chinacloudapi.cn/{tenantid}/discovery/v2.0/keys",issuer:"https://login.partner.microsoftonline.cn/{tenantid}/v2.0",authorization_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/logout"},"login.microsoftonline.us":{token_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.microsoftonline.us/{tenantid}/discovery/v2.0/keys",issuer:"https://login.microsoftonline.us/{tenantid}/v2.0",authorization_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/logout"}},instanceDiscoveryMetadata:{metadata:[{preferred_network:"login.microsoftonline.com",preferred_cache:"login.windows.net",aliases:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"]},{preferred_network:"login.partner.microsoftonline.cn",preferred_cache:"login.partner.microsoftonline.cn",aliases:["login.partner.microsoftonline.cn","login.chinacloudapi.cn"]},{preferred_network:"login.microsoftonline.de",preferred_cache:"login.microsoftonline.de",aliases:["login.microsoftonline.de"]},{preferred_network:"login.microsoftonline.us",preferred_cache:"login.microsoftonline.us",aliases:["login.microsoftonline.us","login.usgovcloudapi.net"]},{preferred_network:"login-us.microsoftonline.com",preferred_cache:"login-us.microsoftonline.com",aliases:["login-us.microsoftonline.com"]}]}},ic=Rh.endpointMetadata,xs=Rh.instanceDiscoveryMetadata,kh=new Set;xs.metadata.forEach(n=>{n.aliases.forEach(e=>{kh.add(e)})});function Xp(n,e){var o;let t;const r=n.canonicalAuthority;if(r){const i=new Q(r).getUrlComponents().HostNameAndPort;t=sc(i,(o=n.cloudDiscoveryMetadata)==null?void 0:o.metadata,ze.CONFIG,e)||sc(i,xs.metadata,ze.HARDCODED_VALUES,e)||n.knownAuthorities}return t||[]}function sc(n,e,t,r){if(r==null||r.trace(`getAliasesFromMetadata called with source: ${t}`),n&&e){const o=ro(e,n);if(o)return r==null||r.trace(`getAliasesFromMetadata: found cloud discovery metadata in ${t}, returning aliases`),o.aliases;r==null||r.trace(`getAliasesFromMetadata: did not find cloud discovery metadata in ${t}`)}return null}function Zp(n){return ro(xs.metadata,n)}function ro(n,e){for(let t=0;t<n.length;t++){const r=n[t];if(r.aliases.includes(e))return r}return null}/*! @azure/msal-common v15.3.0 2025-03-20 */const Oh="cache_quota_exceeded",Ds="cache_error_unknown";/*! @azure/msal-common v15.3.0 2025-03-20 */const hi={[Oh]:"Exceeded cache storage capacity.",[Ds]:"Unexpected error occurred when using cache storage."};class Rn extends Error{constructor(e,t){const r=t||(hi[e]?hi[e]:hi[Ds]);super(`${e}: ${r}`),Object.setPrototypeOf(this,Rn.prototype),this.name="CacheError",this.errorCode=e,this.errorMessage=r}}/*! @azure/msal-common v15.3.0 2025-03-20 */class Mi{constructor(e,t,r,o){this.clientId=e,this.cryptoImpl=t,this.commonLogger=r.clone(lh,bs),this.staticAuthorityOptions=o}getAllAccounts(e){return this.buildTenantProfiles(this.getAccountsFilteredBy(e||{}),e)}getAccountInfoFilteredBy(e){const t=this.getAllAccounts(e);return t.length>1?t.sort(o=>o.idTokenClaims?-1:1)[0]:t.length===1?t[0]:null}getBaseAccountInfo(e){const t=this.getAccountsFilteredBy(e);return t.length>0?t[0].getAccountInfo():null}buildTenantProfiles(e,t){return e.flatMap(r=>this.getTenantProfilesFromAccountEntity(r,t==null?void 0:t.tenantId,t))}getTenantedAccountInfoByFilter(e,t,r,o){let i=null,s;if(o&&!this.tenantProfileMatchesFilter(r,o))return null;const a=this.getIdToken(e,t,r.tenantId);return a&&(s=Dn(a.secret,this.cryptoImpl.base64Decode),!this.idTokenClaimsMatchTenantProfileFilter(s,o))?null:(i=Ms(e,r,s,a==null?void 0:a.secret),i)}getTenantProfilesFromAccountEntity(e,t,r){const o=e.getAccountInfo();let i=o.tenantProfiles||new Map;const s=this.getTokenKeys();if(t){const c=i.get(t);if(c)i=new Map([[t,c]]);else return[]}const a=[];return i.forEach(c=>{const h=this.getTenantedAccountInfoByFilter(o,s,c,r);h&&a.push(h)}),a}tenantProfileMatchesFilter(e,t){return!(t.localAccountId&&!this.matchLocalAccountIdFromTenantProfile(e,t.localAccountId)||t.name&&e.name!==t.name||t.isHomeTenant!==void 0&&e.isHomeTenant!==t.isHomeTenant)}idTokenClaimsMatchTenantProfileFilter(e,t){return!(t&&(t.localAccountId&&!this.matchLocalAccountIdFromTokenClaims(e,t.localAccountId)||t.loginHint&&!this.matchLoginHintFromTokenClaims(e,t.loginHint)||t.username&&!this.matchUsername(e.preferred_username,t.username)||t.name&&!this.matchName(e,t.name)||t.sid&&!this.matchSid(e,t.sid)))}async saveCacheRecord(e,t,r){var o,i,s,a;if(!e)throw S(oh);try{e.account&&await this.setAccount(e.account,t),e.idToken&&(r==null?void 0:r.idToken)!==!1&&await this.setIdTokenCredential(e.idToken,t),e.accessToken&&(r==null?void 0:r.accessToken)!==!1&&await this.saveAccessToken(e.accessToken,t),e.refreshToken&&(r==null?void 0:r.refreshToken)!==!1&&await this.setRefreshTokenCredential(e.refreshToken,t),e.appMetadata&&this.setAppMetadata(e.appMetadata)}catch(c){throw(o=this.commonLogger)==null||o.error("CacheManager.saveCacheRecord: failed"),c instanceof Error?((i=this.commonLogger)==null||i.errorPii(`CacheManager.saveCacheRecord: ${c.message}`,t),c.name==="QuotaExceededError"||c.name==="NS_ERROR_DOM_QUOTA_REACHED"||c.message.includes("exceeded the quota")?((s=this.commonLogger)==null||s.error("CacheManager.saveCacheRecord: exceeded storage quota",t),new Rn(Oh)):new Rn(c.name,c.message)):((a=this.commonLogger)==null||a.errorPii(`CacheManager.saveCacheRecord: ${c}`,t),new Rn(Ds))}}async saveAccessToken(e,t){const r={clientId:e.clientId,credentialType:e.credentialType,environment:e.environment,homeAccountId:e.homeAccountId,realm:e.realm,tokenType:e.tokenType,requestedClaimsHash:e.requestedClaimsHash},o=this.getTokenKeys(),i=pe.fromString(e.target),s=[];o.accessToken.forEach(a=>{if(!this.accessTokenKeyMatchesFilter(a,r,!1))return;const c=this.getAccessTokenCredential(a);c&&this.credentialMatchesFilter(c,r)&&pe.fromString(c.target).intersectingScopeSets(i)&&s.push(this.removeAccessToken(a))}),await Promise.all(s),await this.setAccessTokenCredential(e,t)}getAccountsFilteredBy(e){const t=this.getAccountKeys(),r=[];return t.forEach(o=>{var c;if(!this.isAccountKey(o,e.homeAccountId))return;const i=this.getAccount(o,this.commonLogger);if(!i||e.homeAccountId&&!this.matchHomeAccountId(i,e.homeAccountId)||e.username&&!this.matchUsername(i.username,e.username)||e.environment&&!this.matchEnvironment(i,e.environment)||e.realm&&!this.matchRealm(i,e.realm)||e.nativeAccountId&&!this.matchNativeAccountId(i,e.nativeAccountId)||e.authorityType&&!this.matchAuthorityType(i,e.authorityType))return;const s={localAccountId:e==null?void 0:e.localAccountId,name:e==null?void 0:e.name},a=(c=i.tenantProfiles)==null?void 0:c.filter(h=>this.tenantProfileMatchesFilter(h,s));a&&a.length===0||r.push(i)}),r}isAccountKey(e,t,r){return!(e.split(ve.CACHE_KEY_SEPARATOR).length<3||t&&!e.toLowerCase().includes(t.toLowerCase())||r&&!e.toLowerCase().includes(r.toLowerCase()))}isCredentialKey(e){if(e.split(ve.CACHE_KEY_SEPARATOR).length<6)return!1;const t=e.toLowerCase();if(t.indexOf(G.ID_TOKEN.toLowerCase())===-1&&t.indexOf(G.ACCESS_TOKEN.toLowerCase())===-1&&t.indexOf(G.ACCESS_TOKEN_WITH_AUTH_SCHEME.toLowerCase())===-1&&t.indexOf(G.REFRESH_TOKEN.toLowerCase())===-1)return!1;if(t.indexOf(G.REFRESH_TOKEN.toLowerCase())>-1){const r=`${G.REFRESH_TOKEN}${ve.CACHE_KEY_SEPARATOR}${this.clientId}${ve.CACHE_KEY_SEPARATOR}`,o=`${G.REFRESH_TOKEN}${ve.CACHE_KEY_SEPARATOR}${tr}${ve.CACHE_KEY_SEPARATOR}`;if(t.indexOf(r.toLowerCase())===-1&&t.indexOf(o.toLowerCase())===-1)return!1}else if(t.indexOf(this.clientId.toLowerCase())===-1)return!1;return!0}credentialMatchesFilter(e,t){return!(t.clientId&&!this.matchClientId(e,t.clientId)||t.userAssertionHash&&!this.matchUserAssertionHash(e,t.userAssertionHash)||typeof t.homeAccountId=="string"&&!this.matchHomeAccountId(e,t.homeAccountId)||t.environment&&!this.matchEnvironment(e,t.environment)||t.realm&&!this.matchRealm(e,t.realm)||t.credentialType&&!this.matchCredentialType(e,t.credentialType)||t.familyId&&!this.matchFamilyId(e,t.familyId)||t.target&&!this.matchTarget(e,t.target)||(t.requestedClaimsHash||e.requestedClaimsHash)&&e.requestedClaimsHash!==t.requestedClaimsHash||e.credentialType===G.ACCESS_TOKEN_WITH_AUTH_SCHEME&&(t.tokenType&&!this.matchTokenType(e,t.tokenType)||t.tokenType===ne.SSH&&t.keyId&&!this.matchKeyId(e,t.keyId)))}getAppMetadataFilteredBy(e){const t=this.getKeys(),r={};return t.forEach(o=>{if(!this.isAppMetadata(o))return;const i=this.getAppMetadata(o);i&&(e.environment&&!this.matchEnvironment(i,e.environment)||e.clientId&&!this.matchClientId(i,e.clientId)||(r[o]=i))}),r}getAuthorityMetadataByAlias(e){const t=this.getAuthorityMetadataKeys();let r=null;return t.forEach(o=>{if(!this.isAuthorityMetadata(o)||o.indexOf(this.clientId)===-1)return;const i=this.getAuthorityMetadata(o);i&&i.aliases.indexOf(e)!==-1&&(r=i)}),r}async removeAllAccounts(){const e=this.getAccountKeys(),t=[];e.forEach(r=>{t.push(this.removeAccount(r))}),await Promise.all(t)}async removeAccount(e){const t=this.getAccount(e,this.commonLogger);t&&(await this.removeAccountContext(t),this.removeItem(e))}async removeAccountContext(e){const t=this.getTokenKeys(),r=e.generateAccountId(),o=[];t.idToken.forEach(i=>{i.indexOf(r)===0&&this.removeIdToken(i)}),t.accessToken.forEach(i=>{i.indexOf(r)===0&&o.push(this.removeAccessToken(i))}),t.refreshToken.forEach(i=>{i.indexOf(r)===0&&this.removeRefreshToken(i)}),await Promise.all(o)}async removeAccessToken(e){const t=this.getAccessTokenCredential(e);if(t){if(t.credentialType.toLowerCase()===G.ACCESS_TOKEN_WITH_AUTH_SCHEME.toLowerCase()&&t.tokenType===ne.POP){const o=t.keyId;if(o)try{await this.cryptoImpl.removeTokenBindingKey(o)}catch{throw S(ah)}}return this.removeItem(e)}}removeAppMetadata(){return this.getKeys().forEach(t=>{this.isAppMetadata(t)&&this.removeItem(t)}),!0}readAccountFromCache(e){const t=Ue.generateAccountCacheKey(e);return this.getAccount(t,this.commonLogger)}getIdToken(e,t,r,o,i){this.commonLogger.trace("CacheManager - getIdToken called");const s={homeAccountId:e.homeAccountId,environment:e.environment,credentialType:G.ID_TOKEN,clientId:this.clientId,realm:r},a=this.getIdTokensByFilter(s,t),c=a.size;if(c<1)return this.commonLogger.info("CacheManager:getIdToken - No token found"),null;if(c>1){let h=a;if(!r){const l=new Map;a.forEach((g,y)=>{g.realm===e.tenantId&&l.set(y,g)});const d=l.size;if(d<1)return this.commonLogger.info("CacheManager:getIdToken - Multiple ID tokens found for account but none match account entity tenant id, returning first result"),a.values().next().value;if(d===1)return this.commonLogger.info("CacheManager:getIdToken - Multiple ID tokens found for account, defaulting to home tenant profile"),l.values().next().value;h=l}return this.commonLogger.info("CacheManager:getIdToken - Multiple matching ID tokens found, clearing them"),h.forEach((l,d)=>{this.removeIdToken(d)}),o&&i&&o.addFields({multiMatchedID:a.size},i),null}return this.commonLogger.info("CacheManager:getIdToken - Returning ID token"),a.values().next().value}getIdTokensByFilter(e,t){const r=t&&t.idToken||this.getTokenKeys().idToken,o=new Map;return r.forEach(i=>{if(!this.idTokenKeyMatchesFilter(i,{clientId:this.clientId,...e}))return;const s=this.getIdTokenCredential(i);s&&this.credentialMatchesFilter(s,e)&&o.set(i,s)}),o}idTokenKeyMatchesFilter(e,t){const r=e.toLowerCase();return!(t.clientId&&r.indexOf(t.clientId.toLowerCase())===-1||t.homeAccountId&&r.indexOf(t.homeAccountId.toLowerCase())===-1)}removeIdToken(e){this.removeItem(e)}removeRefreshToken(e){this.removeItem(e)}getAccessToken(e,t,r,o,i,s){this.commonLogger.trace("CacheManager - getAccessToken called");const a=pe.createSearchScopes(t.scopes),c=t.authenticationScheme||ne.BEARER,h=c.toLowerCase()!==ne.BEARER.toLowerCase()?G.ACCESS_TOKEN_WITH_AUTH_SCHEME:G.ACCESS_TOKEN,l={homeAccountId:e.homeAccountId,environment:e.environment,credentialType:h,clientId:this.clientId,realm:o||e.tenantId,target:a,tokenType:c,keyId:t.sshKid,requestedClaimsHash:t.requestedClaimsHash},d=r&&r.accessToken||this.getTokenKeys().accessToken,g=[];d.forEach(m=>{if(this.accessTokenKeyMatchesFilter(m,l,!0)){const A=this.getAccessTokenCredential(m);A&&this.credentialMatchesFilter(A,l)&&g.push(A)}});const y=g.length;return y<1?(this.commonLogger.info("CacheManager:getAccessToken - No token found"),null):y>1?(this.commonLogger.info("CacheManager:getAccessToken - Multiple access tokens found, clearing them"),g.forEach(m=>{this.removeAccessToken(rr(m))}),i&&s&&i.addFields({multiMatchedAT:g.length},s),null):(this.commonLogger.info("CacheManager:getAccessToken - Returning access token"),g[0])}accessTokenKeyMatchesFilter(e,t,r){const o=e.toLowerCase();if(t.clientId&&o.indexOf(t.clientId.toLowerCase())===-1||t.homeAccountId&&o.indexOf(t.homeAccountId.toLowerCase())===-1||t.realm&&o.indexOf(t.realm.toLowerCase())===-1||t.requestedClaimsHash&&o.indexOf(t.requestedClaimsHash.toLowerCase())===-1)return!1;if(t.target){const i=t.target.asArray();for(let s=0;s<i.length;s++){if(r&&!o.includes(i[s].toLowerCase()))return!1;if(!r&&o.includes(i[s].toLowerCase()))return!0}}return!0}getAccessTokensByFilter(e){const t=this.getTokenKeys(),r=[];return t.accessToken.forEach(o=>{if(!this.accessTokenKeyMatchesFilter(o,e,!0))return;const i=this.getAccessTokenCredential(o);i&&this.credentialMatchesFilter(i,e)&&r.push(i)}),r}getRefreshToken(e,t,r,o,i){this.commonLogger.trace("CacheManager - getRefreshToken called");const s=t?tr:void 0,a={homeAccountId:e.homeAccountId,environment:e.environment,credentialType:G.REFRESH_TOKEN,clientId:this.clientId,familyId:s},c=r&&r.refreshToken||this.getTokenKeys().refreshToken,h=[];c.forEach(d=>{if(this.refreshTokenKeyMatchesFilter(d,a)){const g=this.getRefreshTokenCredential(d);g&&this.credentialMatchesFilter(g,a)&&h.push(g)}});const l=h.length;return l<1?(this.commonLogger.info("CacheManager:getRefreshToken - No refresh token found."),null):(l>1&&o&&i&&o.addFields({multiMatchedRT:l},i),this.commonLogger.info("CacheManager:getRefreshToken - returning refresh token"),h[0])}refreshTokenKeyMatchesFilter(e,t){const r=e.toLowerCase();return!(t.familyId&&r.indexOf(t.familyId.toLowerCase())===-1||!t.familyId&&t.clientId&&r.indexOf(t.clientId.toLowerCase())===-1||t.homeAccountId&&r.indexOf(t.homeAccountId.toLowerCase())===-1)}readAppMetadataFromCache(e){const t={environment:e,clientId:this.clientId},r=this.getAppMetadataFilteredBy(t),o=Object.keys(r).map(s=>r[s]),i=o.length;if(i<1)return null;if(i>1)throw S(eh);return o[0]}isAppMetadataFOCI(e){const t=this.readAppMetadataFromCache(e);return!!(t&&t.familyId===tr)}matchHomeAccountId(e,t){return typeof e.homeAccountId=="string"&&t===e.homeAccountId}matchLocalAccountIdFromTokenClaims(e,t){const r=e.oid||e.sub;return t===r}matchLocalAccountIdFromTenantProfile(e,t){return e.localAccountId===t}matchName(e,t){var r;return t.toLowerCase()===((r=e.name)==null?void 0:r.toLowerCase())}matchUsername(e,t){return!!(e&&typeof e=="string"&&(t==null?void 0:t.toLowerCase())===e.toLowerCase())}matchUserAssertionHash(e,t){return!!(e.userAssertionHash&&t===e.userAssertionHash)}matchEnvironment(e,t){if(this.staticAuthorityOptions){const o=Xp(this.staticAuthorityOptions,this.commonLogger);if(o.includes(t)&&o.includes(e.environment))return!0}const r=this.getAuthorityMetadataByAlias(t);return!!(r&&r.aliases.indexOf(e.environment)>-1)}matchCredentialType(e,t){return e.credentialType&&t.toLowerCase()===e.credentialType.toLowerCase()}matchClientId(e,t){return!!(e.clientId&&t===e.clientId)}matchFamilyId(e,t){return!!(e.familyId&&t===e.familyId)}matchRealm(e,t){var r;return((r=e.realm)==null?void 0:r.toLowerCase())===t.toLowerCase()}matchNativeAccountId(e,t){return!!(e.nativeAccountId&&t===e.nativeAccountId)}matchLoginHintFromTokenClaims(e,t){return e.login_hint===t||e.preferred_username===t||e.upn===t}matchSid(e,t){return e.sid===t}matchAuthorityType(e,t){return!!(e.authorityType&&t.toLowerCase()===e.authorityType.toLowerCase())}matchTarget(e,t){return e.credentialType!==G.ACCESS_TOKEN&&e.credentialType!==G.ACCESS_TOKEN_WITH_AUTH_SCHEME||!e.target?!1:pe.fromString(e.target).containsScopeSet(t)}matchTokenType(e,t){return!!(e.tokenType&&e.tokenType===t)}matchKeyId(e,t){return!!(e.keyId&&e.keyId===t)}isAppMetadata(e){return e.indexOf(Cs)!==-1}isAuthorityMetadata(e){return e.indexOf(Xr.CACHE_KEY)!==-1}generateAuthorityMetadataCacheKey(e){return`${Xr.CACHE_KEY}-${this.clientId}-${e}`}static toObject(e,t){for(const r in t)e[r]=t[r];return e}}class em extends Mi{async setAccount(){throw S(W)}getAccount(){throw S(W)}async setIdTokenCredential(){throw S(W)}getIdTokenCredential(){throw S(W)}async setAccessTokenCredential(){throw S(W)}getAccessTokenCredential(){throw S(W)}async setRefreshTokenCredential(){throw S(W)}getRefreshTokenCredential(){throw S(W)}setAppMetadata(){throw S(W)}getAppMetadata(){throw S(W)}setServerTelemetry(){throw S(W)}getServerTelemetry(){throw S(W)}setAuthorityMetadata(){throw S(W)}getAuthorityMetadata(){throw S(W)}getAuthorityMetadataKeys(){throw S(W)}setThrottlingCache(){throw S(W)}getThrottlingCache(){throw S(W)}removeItem(){throw S(W)}getKeys(){throw S(W)}getAccountKeys(){throw S(W)}getTokenKeys(){throw S(W)}}/*! @azure/msal-common v15.3.0 2025-03-20 */const Ph={tokenRenewalOffsetSeconds:Tp,preventCorsPreflight:!1},tm={loggerCallback:()=>{},piiLoggingEnabled:!1,logLevel:le.Info,correlationId:E.EMPTY_STRING},nm={claimsBasedCachingEnabled:!1},rm={async sendGetRequestAsync(){throw S(W)},async sendPostRequestAsync(){throw S(W)}},om={sku:E.SKU,version:bs,cpu:E.EMPTY_STRING,os:E.EMPTY_STRING},im={clientSecret:E.EMPTY_STRING,clientAssertion:void 0},sm={azureCloudInstance:Rs.None,tenant:`${E.DEFAULT_COMMON_TENANT}`},am={application:{appName:"",appVersion:""}};function cm({authOptions:n,systemOptions:e,loggerOptions:t,cacheOptions:r,storageInterface:o,networkInterface:i,cryptoInterface:s,clientCredentials:a,libraryInfo:c,telemetry:h,serverTelemetryManager:l,persistencePlugin:d,serializableCache:g}){const y={...tm,...t};return{authOptions:lm(n),systemOptions:{...Ph,...e},loggerOptions:y,cacheOptions:{...nm,...r},storageInterface:o||new em(n.clientId,eo,new Gt(y)),networkInterface:i||rm,cryptoInterface:s||eo,clientCredentials:a||im,libraryInfo:{...om,...c},telemetry:{...am,...h},serverTelemetryManager:l||null,persistencePlugin:d||null,serializableCache:g||null}}function lm(n){return{clientCapabilities:[],azureCloudOptions:sm,skipAuthorityMetadataCache:!1,instanceAware:!1,...n}}function Nh(n){return n.authOptions.authority.options.protocolMode===wt.OIDC}/*! @azure/msal-common v15.3.0 2025-03-20 */const We={HOME_ACCOUNT_ID:"home_account_id",UPN:"UPN"};/*! @azure/msal-common v15.3.0 2025-03-20 */const cn="client_id",Mh="redirect_uri",hm="response_type",dm="response_mode",um="grant_type",fm="claims",gm="scope",pm="refresh_token",mm="state",ym="nonce",Cm="prompt",Tm="code",Am="code_challenge",Em="code_challenge_method",wm="code_verifier",_m="client-request-id",Sm="x-client-SKU",Im="x-client-VER",vm="x-client-OS",bm="x-client-CPU",Rm="x-client-current-telemetry",km="x-client-last-telemetry",Om="x-ms-lib-capability",Pm="x-app-name",Nm="x-app-ver",Mm="post_logout_redirect_uri",xm="id_token_hint",Dm="client_secret",Lm="client_assertion",Um="client_assertion_type",xh="token_type",Dh="req_cnf",ac="return_spa_code",Hm="nativebroker",Fm="logout_hint",Bm="sid",Km="login_hint",qm="domain_hint",$m="x-client-xtra-sku",oo="brk_client_id",io="brk_redirect_uri",cc="instance_aware";/*! @azure/msal-common v15.3.0 2025-03-20 */function ko(n,e,t){if(!e)return;const r=n.get(cn);r&&n.has(oo)&&(t==null||t.addFields({embeddedClientId:r,embeddedRedirectUri:n.get(Mh)},e))}function Gm(n){n.set(hm,E.CODE_RESPONSE_TYPE)}function zm(n,e){n.set(dm,e||mp.QUERY)}function jm(n){n.set(Hm,"1")}function Ls(n,e,t=!0,r=mr){t&&!r.includes("openid")&&!e.includes("openid")&&r.push("openid");const o=t?[...e||[],...r]:e||[],i=new pe(o);n.set(gm,i.printScopes())}function Us(n,e){n.set(cn,e)}function Hs(n,e){n.set(Mh,e)}function Vm(n,e){n.set(Mm,e)}function Wm(n,e){n.set(xm,e)}function Ym(n,e){n.set(qm,e)}function Dr(n,e){n.set(Km,e)}function so(n,e){n.set(Me.CCS_HEADER,`UPN:${e}`)}function or(n,e){n.set(Me.CCS_HEADER,`Oid:${e.uid}@${e.utid}`)}function lc(n,e){n.set(Bm,e)}function Fs(n,e,t){const r=ny(e,t);try{JSON.parse(r)}catch{throw te(vo)}n.set(fm,r)}function Bs(n,e){n.set(_m,e)}function Ks(n,e){n.set(Sm,e.sku),n.set(Im,e.version),e.os&&n.set(vm,e.os),e.cpu&&n.set(bm,e.cpu)}function qs(n,e){e!=null&&e.appName&&n.set(Pm,e.appName),e!=null&&e.appVersion&&n.set(Nm,e.appVersion)}function Qm(n,e){n.set(Cm,e)}function Lh(n,e){e&&n.set(mm,e)}function Jm(n,e){n.set(ym,e)}function Xm(n,e,t){if(e&&t)n.set(Am,e),n.set(Em,t);else throw te(bo)}function Zm(n,e){n.set(Tm,e)}function ey(n,e){n.set(pm,e)}function ty(n,e){n.set(wm,e)}function Uh(n,e){n.set(Dm,e)}function Hh(n,e){e&&n.set(Lm,e)}function Fh(n,e){e&&n.set(Um,e)}function Bh(n,e){n.set(um,e)}function $s(n){n.set(yp,"1")}function Kh(n){n.has(cc)||n.set(cc,"true")}function kn(n,e){Object.entries(e).forEach(([t,r])=>{!n.has(t)&&r&&n.set(t,r)})}function ny(n,e){let t;if(!n)t={};else try{t=JSON.parse(n)}catch{throw te(vo)}return e&&e.length>0&&(t.hasOwnProperty(Pr.ACCESS_TOKEN)||(t[Pr.ACCESS_TOKEN]={}),t[Pr.ACCESS_TOKEN][Pr.XMS_CC]={values:e}),JSON.stringify(t)}function Gs(n,e){e&&(n.set(xh,ne.POP),n.set(Dh,e))}function qh(n,e){e&&(n.set(xh,ne.SSH),n.set(Dh,e))}function $h(n,e){n.set(Rm,e.generateCurrentRequestHeaderValue()),n.set(km,e.generateLastRequestHeaderValue())}function Gh(n){n.set(Om,nr.X_MS_LIB_CAPABILITY_VALUE)}function ry(n,e){n.set(Fm,e)}function Oo(n,e,t){n.has(oo)||n.set(oo,e),n.has(io)||n.set(io,t)}/*! @azure/msal-common v15.3.0 2025-03-20 */function oy(n){return n.hasOwnProperty("authorization_endpoint")&&n.hasOwnProperty("token_endpoint")&&n.hasOwnProperty("issuer")&&n.hasOwnProperty("jwks_uri")}/*! @azure/msal-common v15.3.0 2025-03-20 */function iy(n){return n.hasOwnProperty("tenant_discovery_endpoint")&&n.hasOwnProperty("metadata")}/*! @azure/msal-common v15.3.0 2025-03-20 */function sy(n){return n.hasOwnProperty("error")&&n.hasOwnProperty("error_description")}/*! @azure/msal-common v15.3.0 2025-03-20 */const p={AcquireTokenByCode:"acquireTokenByCode",AcquireTokenByRefreshToken:"acquireTokenByRefreshToken",AcquireTokenSilent:"acquireTokenSilent",AcquireTokenSilentAsync:"acquireTokenSilentAsync",AcquireTokenPopup:"acquireTokenPopup",AcquireTokenPreRedirect:"acquireTokenPreRedirect",AcquireTokenRedirect:"acquireTokenRedirect",CryptoOptsGetPublicKeyThumbprint:"cryptoOptsGetPublicKeyThumbprint",CryptoOptsSignJwt:"cryptoOptsSignJwt",SilentCacheClientAcquireToken:"silentCacheClientAcquireToken",SilentIframeClientAcquireToken:"silentIframeClientAcquireToken",AwaitConcurrentIframe:"awaitConcurrentIframe",SilentRefreshClientAcquireToken:"silentRefreshClientAcquireToken",SsoSilent:"ssoSilent",StandardInteractionClientGetDiscoveredAuthority:"standardInteractionClientGetDiscoveredAuthority",FetchAccountIdWithNativeBroker:"fetchAccountIdWithNativeBroker",NativeInteractionClientAcquireToken:"nativeInteractionClientAcquireToken",BaseClientCreateTokenRequestHeaders:"baseClientCreateTokenRequestHeaders",NetworkClientSendPostRequestAsync:"networkClientSendPostRequestAsync",RefreshTokenClientExecutePostToTokenEndpoint:"refreshTokenClientExecutePostToTokenEndpoint",AuthorizationCodeClientExecutePostToTokenEndpoint:"authorizationCodeClientExecutePostToTokenEndpoint",BrokerHandhshake:"brokerHandshake",AcquireTokenByRefreshTokenInBroker:"acquireTokenByRefreshTokenInBroker",AcquireTokenByBroker:"acquireTokenByBroker",RefreshTokenClientExecuteTokenRequest:"refreshTokenClientExecuteTokenRequest",RefreshTokenClientAcquireToken:"refreshTokenClientAcquireToken",RefreshTokenClientAcquireTokenWithCachedRefreshToken:"refreshTokenClientAcquireTokenWithCachedRefreshToken",RefreshTokenClientAcquireTokenByRefreshToken:"refreshTokenClientAcquireTokenByRefreshToken",RefreshTokenClientCreateTokenRequestBody:"refreshTokenClientCreateTokenRequestBody",AcquireTokenFromCache:"acquireTokenFromCache",SilentFlowClientAcquireCachedToken:"silentFlowClientAcquireCachedToken",SilentFlowClientGenerateResultFromCacheRecord:"silentFlowClientGenerateResultFromCacheRecord",AcquireTokenBySilentIframe:"acquireTokenBySilentIframe",InitializeBaseRequest:"initializeBaseRequest",InitializeSilentRequest:"initializeSilentRequest",InitializeClientApplication:"initializeClientApplication",InitializeCache:"initializeCache",SilentIframeClientTokenHelper:"silentIframeClientTokenHelper",SilentHandlerInitiateAuthRequest:"silentHandlerInitiateAuthRequest",SilentHandlerMonitorIframeForHash:"silentHandlerMonitorIframeForHash",SilentHandlerLoadFrame:"silentHandlerLoadFrame",SilentHandlerLoadFrameSync:"silentHandlerLoadFrameSync",StandardInteractionClientCreateAuthCodeClient:"standardInteractionClientCreateAuthCodeClient",StandardInteractionClientGetClientConfiguration:"standardInteractionClientGetClientConfiguration",StandardInteractionClientInitializeAuthorizationRequest:"standardInteractionClientInitializeAuthorizationRequest",GetAuthCodeUrl:"getAuthCodeUrl",GetStandardParams:"getStandardParams",HandleCodeResponseFromServer:"handleCodeResponseFromServer",HandleCodeResponse:"handleCodeResponse",UpdateTokenEndpointAuthority:"updateTokenEndpointAuthority",AuthClientAcquireToken:"authClientAcquireToken",AuthClientExecuteTokenRequest:"authClientExecuteTokenRequest",AuthClientCreateTokenRequestBody:"authClientCreateTokenRequestBody",PopTokenGenerateCnf:"popTokenGenerateCnf",PopTokenGenerateKid:"popTokenGenerateKid",HandleServerTokenResponse:"handleServerTokenResponse",DeserializeResponse:"deserializeResponse",AuthorityFactoryCreateDiscoveredInstance:"authorityFactoryCreateDiscoveredInstance",AuthorityResolveEndpointsAsync:"authorityResolveEndpointsAsync",AuthorityResolveEndpointsFromLocalSources:"authorityResolveEndpointsFromLocalSources",AuthorityGetCloudDiscoveryMetadataFromNetwork:"authorityGetCloudDiscoveryMetadataFromNetwork",AuthorityUpdateCloudDiscoveryMetadata:"authorityUpdateCloudDiscoveryMetadata",AuthorityGetEndpointMetadataFromNetwork:"authorityGetEndpointMetadataFromNetwork",AuthorityUpdateEndpointMetadata:"authorityUpdateEndpointMetadata",AuthorityUpdateMetadataWithRegionalInformation:"authorityUpdateMetadataWithRegionalInformation",RegionDiscoveryDetectRegion:"regionDiscoveryDetectRegion",RegionDiscoveryGetRegionFromIMDS:"regionDiscoveryGetRegionFromIMDS",RegionDiscoveryGetCurrentVersion:"regionDiscoveryGetCurrentVersion",AcquireTokenByCodeAsync:"acquireTokenByCodeAsync",GetEndpointMetadataFromNetwork:"getEndpointMetadataFromNetwork",GetCloudDiscoveryMetadataFromNetworkMeasurement:"getCloudDiscoveryMetadataFromNetworkMeasurement",HandleRedirectPromiseMeasurement:"handleRedirectPromise",HandleNativeRedirectPromiseMeasurement:"handleNativeRedirectPromise",UpdateCloudDiscoveryMetadataMeasurement:"updateCloudDiscoveryMetadataMeasurement",UsernamePasswordClientAcquireToken:"usernamePasswordClientAcquireToken",NativeMessageHandlerHandshake:"nativeMessageHandlerHandshake",NativeGenerateAuthResult:"nativeGenerateAuthResult",RemoveHiddenIframe:"removeHiddenIframe",ClearTokensAndKeysWithClaims:"clearTokensAndKeysWithClaims",CacheManagerGetRefreshToken:"cacheManagerGetRefreshToken",ImportExistingCache:"importExistingCache",SetUserData:"setUserData",LocalStorageUpdated:"localStorageUpdated",GeneratePkceCodes:"generatePkceCodes",GenerateCodeVerifier:"generateCodeVerifier",GenerateCodeChallengeFromVerifier:"generateCodeChallengeFromVerifier",Sha256Digest:"sha256Digest",GetRandomValues:"getRandomValues",GenerateHKDF:"generateHKDF",GenerateBaseKey:"generateBaseKey",Base64Decode:"base64Decode",UrlEncodeArr:"urlEncodeArr",Encrypt:"encrypt",Decrypt:"decrypt"},ay={InProgress:1};/*! @azure/msal-common v15.3.0 2025-03-20 */const xt=(n,e,t,r,o)=>(...i)=>{t.trace(`Executing function ${e}`);const s=r==null?void 0:r.startMeasurement(e,o);if(o){const a=e+"CallCount";r==null||r.incrementFields({[a]:1},o)}try{const a=n(...i);return s==null||s.end({success:!0}),t.trace(`Returning result from ${e}`),a}catch(a){t.trace(`Error occurred in ${e}`);try{t.trace(JSON.stringify(a))}catch{t.trace("Unable to print error message.")}throw s==null||s.end({success:!1},a),a}},_=(n,e,t,r,o)=>(...i)=>{t.trace(`Executing function ${e}`);const s=r==null?void 0:r.startMeasurement(e,o);if(o){const a=e+"CallCount";r==null||r.incrementFields({[a]:1},o)}return r==null||r.setPreQueueTime(e,o),n(...i).then(a=>(t.trace(`Returning result from ${e}`),s==null||s.end({success:!0}),a)).catch(a=>{t.trace(`Error occurred in ${e}`);try{t.trace(JSON.stringify(a))}catch{t.trace("Unable to print error message.")}throw s==null||s.end({success:!1},a),a})};/*! @azure/msal-common v15.3.0 2025-03-20 */class Po{constructor(e,t,r,o){this.networkInterface=e,this.logger=t,this.performanceClient=r,this.correlationId=o}async detectRegion(e,t){var o;(o=this.performanceClient)==null||o.addQueueMeasurement(p.RegionDiscoveryDetectRegion,this.correlationId);let r=e;if(r)t.region_source=mn.ENVIRONMENT_VARIABLE;else{const i=Po.IMDS_OPTIONS;try{const s=await _(this.getRegionFromIMDS.bind(this),p.RegionDiscoveryGetRegionFromIMDS,this.logger,this.performanceClient,this.correlationId)(E.IMDS_VERSION,i);if(s.status===Mr.httpSuccess&&(r=s.body,t.region_source=mn.IMDS),s.status===Mr.httpBadRequest){const a=await _(this.getCurrentVersion.bind(this),p.RegionDiscoveryGetCurrentVersion,this.logger,this.performanceClient,this.correlationId)(i);if(!a)return t.region_source=mn.FAILED_AUTO_DETECTION,null;const c=await _(this.getRegionFromIMDS.bind(this),p.RegionDiscoveryGetRegionFromIMDS,this.logger,this.performanceClient,this.correlationId)(a,i);c.status===Mr.httpSuccess&&(r=c.body,t.region_source=mn.IMDS)}}catch{return t.region_source=mn.FAILED_AUTO_DETECTION,null}}return r||(t.region_source=mn.FAILED_AUTO_DETECTION),r||null}async getRegionFromIMDS(e,t){var r;return(r=this.performanceClient)==null||r.addQueueMeasurement(p.RegionDiscoveryGetRegionFromIMDS,this.correlationId),this.networkInterface.sendGetRequestAsync(`${E.IMDS_ENDPOINT}?api-version=${e}&format=text`,t,E.IMDS_TIMEOUT)}async getCurrentVersion(e){var t;(t=this.performanceClient)==null||t.addQueueMeasurement(p.RegionDiscoveryGetCurrentVersion,this.correlationId);try{const r=await this.networkInterface.sendGetRequestAsync(`${E.IMDS_ENDPOINT}?format=json`,e);return r.status===Mr.httpBadRequest&&r.body&&r.body["newest-versions"]&&r.body["newest-versions"].length>0?r.body["newest-versions"][0]:null}catch{return null}}}Po.IMDS_OPTIONS={headers:{Metadata:"true"}};/*! @azure/msal-common v15.3.0 2025-03-20 */class _e{constructor(e,t,r,o,i,s,a,c){this.canonicalAuthority=e,this._canonicalAuthority.validateAsUri(),this.networkInterface=t,this.cacheManager=r,this.authorityOptions=o,this.regionDiscoveryMetadata={region_used:void 0,region_source:void 0,region_outcome:void 0},this.logger=i,this.performanceClient=a,this.correlationId=s,this.managedIdentity=c||!1,this.regionDiscovery=new Po(t,this.logger,this.performanceClient,this.correlationId)}getAuthorityType(e){if(e.HostNameAndPort.endsWith(E.CIAM_AUTH_URL))return Xe.Ciam;const t=e.PathSegments;if(t.length)switch(t[0].toLowerCase()){case E.ADFS:return Xe.Adfs;case E.DSTS:return Xe.Dsts}return Xe.Default}get authorityType(){return this.getAuthorityType(this.canonicalAuthorityUrlComponents)}get protocolMode(){return this.authorityOptions.protocolMode}get options(){return this.authorityOptions}get canonicalAuthority(){return this._canonicalAuthority.urlString}set canonicalAuthority(e){this._canonicalAuthority=new Q(e),this._canonicalAuthority.validateAsUri(),this._canonicalAuthorityUrlComponents=null}get canonicalAuthorityUrlComponents(){return this._canonicalAuthorityUrlComponents||(this._canonicalAuthorityUrlComponents=this._canonicalAuthority.getUrlComponents()),this._canonicalAuthorityUrlComponents}get hostnameAndPort(){return this.canonicalAuthorityUrlComponents.HostNameAndPort.toLowerCase()}get tenant(){return this.canonicalAuthorityUrlComponents.PathSegments[0]}get authorizationEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.authorization_endpoint);throw S(Rt)}get tokenEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.token_endpoint);throw S(Rt)}get deviceCodeEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.token_endpoint.replace("/token","/devicecode"));throw S(Rt)}get endSessionEndpoint(){if(this.discoveryComplete()){if(!this.metadata.end_session_endpoint)throw S(ch);return this.replacePath(this.metadata.end_session_endpoint)}else throw S(Rt)}get selfSignedJwtAudience(){if(this.discoveryComplete())return this.replacePath(this.metadata.issuer);throw S(Rt)}get jwksUri(){if(this.discoveryComplete())return this.replacePath(this.metadata.jwks_uri);throw S(Rt)}canReplaceTenant(e){return e.PathSegments.length===1&&!_e.reservedTenantDomains.has(e.PathSegments[0])&&this.getAuthorityType(e)===Xe.Default&&this.protocolMode===wt.AAD}replaceTenant(e){return e.replace(/{tenant}|{tenantid}/g,this.tenant)}replacePath(e){let t=e;const o=new Q(this.metadata.canonical_authority).getUrlComponents(),i=o.PathSegments;return this.canonicalAuthorityUrlComponents.PathSegments.forEach((a,c)=>{let h=i[c];if(c===0&&this.canReplaceTenant(o)){const l=new Q(this.metadata.authorization_endpoint).getUrlComponents().PathSegments[0];h!==l&&(this.logger.verbose(`Replacing tenant domain name ${h} with id ${l}`),h=l)}a!==h&&(t=t.replace(`/${h}/`,`/${a}/`))}),this.replaceTenant(t)}get defaultOpenIdConfigurationEndpoint(){const e=this.hostnameAndPort;return this.canonicalAuthority.endsWith("v2.0/")||this.authorityType===Xe.Adfs||this.protocolMode!==wt.AAD&&!this.isAliasOfKnownMicrosoftAuthority(e)?`${this.canonicalAuthority}.well-known/openid-configuration`:`${this.canonicalAuthority}v2.0/.well-known/openid-configuration`}discoveryComplete(){return!!this.metadata}async resolveEndpointsAsync(){var o,i;(o=this.performanceClient)==null||o.addQueueMeasurement(p.AuthorityResolveEndpointsAsync,this.correlationId);const e=this.getCurrentMetadataEntity(),t=await _(this.updateCloudDiscoveryMetadata.bind(this),p.AuthorityUpdateCloudDiscoveryMetadata,this.logger,this.performanceClient,this.correlationId)(e);this.canonicalAuthority=this.canonicalAuthority.replace(this.hostnameAndPort,e.preferred_network);const r=await _(this.updateEndpointMetadata.bind(this),p.AuthorityUpdateEndpointMetadata,this.logger,this.performanceClient,this.correlationId)(e);this.updateCachedMetadata(e,t,{source:r}),(i=this.performanceClient)==null||i.addFields({cloudDiscoverySource:t,authorityEndpointSource:r},this.correlationId)}getCurrentMetadataEntity(){let e=this.cacheManager.getAuthorityMetadataByAlias(this.hostnameAndPort);return e||(e={aliases:[],preferred_cache:this.hostnameAndPort,preferred_network:this.hostnameAndPort,canonical_authority:this.canonicalAuthority,authorization_endpoint:"",token_endpoint:"",end_session_endpoint:"",issuer:"",aliasesFromNetwork:!1,endpointsFromNetwork:!1,expiresAt:nc(),jwks_uri:""}),e}updateCachedMetadata(e,t,r){t!==ze.CACHE&&(r==null?void 0:r.source)!==ze.CACHE&&(e.expiresAt=nc(),e.canonical_authority=this.canonicalAuthority);const o=this.cacheManager.generateAuthorityMetadataCacheKey(e.preferred_cache);this.cacheManager.setAuthorityMetadata(o,e),this.metadata=e}async updateEndpointMetadata(e){var o,i,s;(o=this.performanceClient)==null||o.addQueueMeasurement(p.AuthorityUpdateEndpointMetadata,this.correlationId);const t=this.updateEndpointMetadataFromLocalSources(e);if(t){if(t.source===ze.HARDCODED_VALUES&&(i=this.authorityOptions.azureRegionConfiguration)!=null&&i.azureRegion&&t.metadata){const a=await _(this.updateMetadataWithRegionalInformation.bind(this),p.AuthorityUpdateMetadataWithRegionalInformation,this.logger,this.performanceClient,this.correlationId)(t.metadata);xr(e,a,!1),e.canonical_authority=this.canonicalAuthority}return t.source}let r=await _(this.getEndpointMetadataFromNetwork.bind(this),p.AuthorityGetEndpointMetadataFromNetwork,this.logger,this.performanceClient,this.correlationId)();if(r)return(s=this.authorityOptions.azureRegionConfiguration)!=null&&s.azureRegion&&(r=await _(this.updateMetadataWithRegionalInformation.bind(this),p.AuthorityUpdateMetadataWithRegionalInformation,this.logger,this.performanceClient,this.correlationId)(r)),xr(e,r,!0),ze.NETWORK;throw S(Yl,this.defaultOpenIdConfigurationEndpoint)}updateEndpointMetadataFromLocalSources(e){this.logger.verbose("Attempting to get endpoint metadata from authority configuration");const t=this.getEndpointMetadataFromConfig();if(t)return this.logger.verbose("Found endpoint metadata in authority configuration"),xr(e,t,!1),{source:ze.CONFIG};if(this.logger.verbose("Did not find endpoint metadata in the config... Attempting to get endpoint metadata from the hardcoded values."),this.authorityOptions.skipAuthorityMetadataCache)this.logger.verbose("Skipping hardcoded metadata cache since skipAuthorityMetadataCache is set to true. Attempting to get endpoint metadata from the network metadata cache.");else{const o=this.getEndpointMetadataFromHardcodedValues();if(o)return xr(e,o,!1),{source:ze.HARDCODED_VALUES,metadata:o};this.logger.verbose("Did not find endpoint metadata in hardcoded values... Attempting to get endpoint metadata from the network metadata cache.")}const r=rc(e);return this.isAuthoritySameType(e)&&e.endpointsFromNetwork&&!r?(this.logger.verbose("Found endpoint metadata in the cache."),{source:ze.CACHE}):(r&&this.logger.verbose("The metadata entity is expired."),null)}isAuthoritySameType(e){return new Q(e.canonical_authority).getUrlComponents().PathSegments.length===this.canonicalAuthorityUrlComponents.PathSegments.length}getEndpointMetadataFromConfig(){if(this.authorityOptions.authorityMetadata)try{return JSON.parse(this.authorityOptions.authorityMetadata)}catch{throw te(Ah)}return null}async getEndpointMetadataFromNetwork(){var r;(r=this.performanceClient)==null||r.addQueueMeasurement(p.AuthorityGetEndpointMetadataFromNetwork,this.correlationId);const e={},t=this.defaultOpenIdConfigurationEndpoint;this.logger.verbose(`Authority.getEndpointMetadataFromNetwork: attempting to retrieve OAuth endpoints from ${t}`);try{const o=await this.networkInterface.sendGetRequestAsync(t,e);return oy(o.body)?o.body:(this.logger.verbose("Authority.getEndpointMetadataFromNetwork: could not parse response as OpenID configuration"),null)}catch(o){return this.logger.verbose(`Authority.getEndpointMetadataFromNetwork: ${o}`),null}}getEndpointMetadataFromHardcodedValues(){return this.hostnameAndPort in ic?ic[this.hostnameAndPort]:null}async updateMetadataWithRegionalInformation(e){var r,o,i;(r=this.performanceClient)==null||r.addQueueMeasurement(p.AuthorityUpdateMetadataWithRegionalInformation,this.correlationId);const t=(o=this.authorityOptions.azureRegionConfiguration)==null?void 0:o.azureRegion;if(t){if(t!==E.AZURE_REGION_AUTO_DISCOVER_FLAG)return this.regionDiscoveryMetadata.region_outcome=ci.CONFIGURED_NO_AUTO_DETECTION,this.regionDiscoveryMetadata.region_used=t,_e.replaceWithRegionalInformation(e,t);const s=await _(this.regionDiscovery.detectRegion.bind(this.regionDiscovery),p.RegionDiscoveryDetectRegion,this.logger,this.performanceClient,this.correlationId)((i=this.authorityOptions.azureRegionConfiguration)==null?void 0:i.environmentRegion,this.regionDiscoveryMetadata);if(s)return this.regionDiscoveryMetadata.region_outcome=ci.AUTO_DETECTION_REQUESTED_SUCCESSFUL,this.regionDiscoveryMetadata.region_used=s,_e.replaceWithRegionalInformation(e,s);this.regionDiscoveryMetadata.region_outcome=ci.AUTO_DETECTION_REQUESTED_FAILED}return e}async updateCloudDiscoveryMetadata(e){var o;(o=this.performanceClient)==null||o.addQueueMeasurement(p.AuthorityUpdateCloudDiscoveryMetadata,this.correlationId);const t=this.updateCloudDiscoveryMetadataFromLocalSources(e);if(t)return t;const r=await _(this.getCloudDiscoveryMetadataFromNetwork.bind(this),p.AuthorityGetCloudDiscoveryMetadataFromNetwork,this.logger,this.performanceClient,this.correlationId)();if(r)return li(e,r,!0),ze.NETWORK;throw te(Eh)}updateCloudDiscoveryMetadataFromLocalSources(e){this.logger.verbose("Attempting to get cloud discovery metadata  from authority configuration"),this.logger.verbosePii(`Known Authorities: ${this.authorityOptions.knownAuthorities||E.NOT_APPLICABLE}`),this.logger.verbosePii(`Authority Metadata: ${this.authorityOptions.authorityMetadata||E.NOT_APPLICABLE}`),this.logger.verbosePii(`Canonical Authority: ${e.canonical_authority||E.NOT_APPLICABLE}`);const t=this.getCloudDiscoveryMetadataFromConfig();if(t)return this.logger.verbose("Found cloud discovery metadata in authority configuration"),li(e,t,!1),ze.CONFIG;if(this.logger.verbose("Did not find cloud discovery metadata in the config... Attempting to get cloud discovery metadata from the hardcoded values."),this.options.skipAuthorityMetadataCache)this.logger.verbose("Skipping hardcoded cloud discovery metadata cache since skipAuthorityMetadataCache is set to true. Attempting to get cloud discovery metadata from the network metadata cache.");else{const o=Zp(this.hostnameAndPort);if(o)return this.logger.verbose("Found cloud discovery metadata from hardcoded values."),li(e,o,!1),ze.HARDCODED_VALUES;this.logger.verbose("Did not find cloud discovery metadata in hardcoded values... Attempting to get cloud discovery metadata from the network metadata cache.")}const r=rc(e);return this.isAuthoritySameType(e)&&e.aliasesFromNetwork&&!r?(this.logger.verbose("Found cloud discovery metadata in the cache."),ze.CACHE):(r&&this.logger.verbose("The metadata entity is expired."),null)}getCloudDiscoveryMetadataFromConfig(){if(this.authorityType===Xe.Ciam)return this.logger.verbose("CIAM authorities do not support cloud discovery metadata, generate the aliases from authority host."),_e.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort);if(this.authorityOptions.cloudDiscoveryMetadata){this.logger.verbose("The cloud discovery metadata has been provided as a network response, in the config.");try{this.logger.verbose("Attempting to parse the cloud discovery metadata.");const e=JSON.parse(this.authorityOptions.cloudDiscoveryMetadata),t=ro(e.metadata,this.hostnameAndPort);if(this.logger.verbose("Parsed the cloud discovery metadata."),t)return this.logger.verbose("There is returnable metadata attached to the parsed cloud discovery metadata."),t;this.logger.verbose("There is no metadata attached to the parsed cloud discovery metadata.")}catch{throw this.logger.verbose("Unable to parse the cloud discovery metadata. Throwing Invalid Cloud Discovery Metadata Error."),te(Os)}}return this.isInKnownAuthorities()?(this.logger.verbose("The host is included in knownAuthorities. Creating new cloud discovery metadata from the host."),_e.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort)):null}async getCloudDiscoveryMetadataFromNetwork(){var o;(o=this.performanceClient)==null||o.addQueueMeasurement(p.AuthorityGetCloudDiscoveryMetadataFromNetwork,this.correlationId);const e=`${E.AAD_INSTANCE_DISCOVERY_ENDPT}${this.canonicalAuthority}oauth2/v2.0/authorize`,t={};let r=null;try{const i=await this.networkInterface.sendGetRequestAsync(e,t);let s,a;if(iy(i.body))s=i.body,a=s.metadata,this.logger.verbosePii(`tenant_discovery_endpoint is: ${s.tenant_discovery_endpoint}`);else if(sy(i.body)){if(this.logger.warning(`A CloudInstanceDiscoveryErrorResponse was returned. The cloud instance discovery network request's status code is: ${i.status}`),s=i.body,s.error===E.INVALID_INSTANCE)return this.logger.error("The CloudInstanceDiscoveryErrorResponse error is invalid_instance."),null;this.logger.warning(`The CloudInstanceDiscoveryErrorResponse error is ${s.error}`),this.logger.warning(`The CloudInstanceDiscoveryErrorResponse error description is ${s.error_description}`),this.logger.warning("Setting the value of the CloudInstanceDiscoveryMetadata (returned from the network) to []"),a=[]}else return this.logger.error("AAD did not return a CloudInstanceDiscoveryResponse or CloudInstanceDiscoveryErrorResponse"),null;this.logger.verbose("Attempting to find a match between the developer's authority and the CloudInstanceDiscoveryMetadata returned from the network request."),r=ro(a,this.hostnameAndPort)}catch(i){if(i instanceof ce)this.logger.error(`There was a network error while attempting to get the cloud discovery instance metadata.
Error: ${i.errorCode}
Error Description: ${i.errorMessage}`);else{const s=i;this.logger.error(`A non-MSALJS error was thrown while attempting to get the cloud instance discovery metadata.
Error: ${s.name}
Error Description: ${s.message}`)}return null}return r||(this.logger.warning("The developer's authority was not found within the CloudInstanceDiscoveryMetadata returned from the network request."),this.logger.verbose("Creating custom Authority for custom domain scenario."),r=_e.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort)),r}isInKnownAuthorities(){return this.authorityOptions.knownAuthorities.filter(t=>t&&Q.getDomainFromUrl(t).toLowerCase()===this.hostnameAndPort).length>0}static generateAuthority(e,t){let r;if(t&&t.azureCloudInstance!==Rs.None){const o=t.tenant?t.tenant:E.DEFAULT_COMMON_TENANT;r=`${t.azureCloudInstance}/${o}/`}return r||e}static createCloudDiscoveryMetadataFromHost(e){return{preferred_network:e,preferred_cache:e,aliases:[e]}}getPreferredCache(){if(this.managedIdentity)return E.DEFAULT_AUTHORITY_HOST;if(this.discoveryComplete())return this.metadata.preferred_cache;throw S(Rt)}isAlias(e){return this.metadata.aliases.indexOf(e)>-1}isAliasOfKnownMicrosoftAuthority(e){return kh.has(e)}static isPublicCloudAuthority(e){return E.KNOWN_PUBLIC_CLOUDS.indexOf(e)>=0}static buildRegionalAuthorityString(e,t,r){const o=new Q(e);o.validateAsUri();const i=o.getUrlComponents();let s=`${t}.${i.HostNameAndPort}`;this.isPublicCloudAuthority(i.HostNameAndPort)&&(s=`${t}.${E.REGIONAL_AUTH_PUBLIC_CLOUD_SUFFIX}`);const a=Q.constructAuthorityUriFromObject({...o.getUrlComponents(),HostNameAndPort:s}).urlString;return r?`${a}?${r}`:a}static replaceWithRegionalInformation(e,t){const r={...e};return r.authorization_endpoint=_e.buildRegionalAuthorityString(r.authorization_endpoint,t),r.token_endpoint=_e.buildRegionalAuthorityString(r.token_endpoint,t),r.end_session_endpoint&&(r.end_session_endpoint=_e.buildRegionalAuthorityString(r.end_session_endpoint,t)),r}static transformCIAMAuthority(e){let t=e;const o=new Q(e).getUrlComponents();if(o.PathSegments.length===0&&o.HostNameAndPort.endsWith(E.CIAM_AUTH_URL)){const i=o.HostNameAndPort.split(".")[0];t=`${t}${i}${E.AAD_TENANT_DOMAIN_SUFFIX}`}return t}}_e.reservedTenantDomains=new Set(["{tenant}","{tenantid}",Kt.COMMON,Kt.CONSUMERS,Kt.ORGANIZATIONS]);function cy(n){var o;const r=(o=new Q(n).getUrlComponents().PathSegments.slice(-1)[0])==null?void 0:o.toLowerCase();switch(r){case Kt.COMMON:case Kt.ORGANIZATIONS:case Kt.CONSUMERS:return;default:return r}}function zh(n){return n.endsWith(E.FORWARD_SLASH)?n:`${n}${E.FORWARD_SLASH}`}function ly(n){const e=n.cloudDiscoveryMetadata;let t;if(e)try{t=JSON.parse(e)}catch{throw te(Os)}return{canonicalAuthority:n.authority?zh(n.authority):void 0,knownAuthorities:n.knownAuthorities,cloudDiscoveryMetadata:t}}/*! @azure/msal-common v15.3.0 2025-03-20 */async function jh(n,e,t,r,o,i,s){s==null||s.addQueueMeasurement(p.AuthorityFactoryCreateDiscoveredInstance,i);const a=_e.transformCIAMAuthority(zh(n)),c=new _e(a,e,t,r,o,i,s);try{return await _(c.resolveEndpointsAsync.bind(c),p.AuthorityResolveEndpointsAsync,o,s,i)(),c}catch{throw S(Rt)}}/*! @azure/msal-common v15.3.0 2025-03-20 */class Wt extends ce{constructor(e,t,r,o,i){super(e,t,r),this.name="ServerError",this.errorNo=o,this.status=i,Object.setPrototypeOf(this,Wt.prototype)}}/*! @azure/msal-common v15.3.0 2025-03-20 */function No(n,e,t){var r;return{clientId:n,authority:e.authority,scopes:e.scopes,homeAccountIdentifier:t,claims:e.claims,authenticationScheme:e.authenticationScheme,resourceRequestMethod:e.resourceRequestMethod,resourceRequestUri:e.resourceRequestUri,shrClaims:e.shrClaims,sshKid:e.sshKid,embeddedClientId:e.embeddedClientId||((r=e.tokenBodyParameters)==null?void 0:r.clientId)}}/*! @azure/msal-common v15.3.0 2025-03-20 */class pt{static generateThrottlingStorageKey(e){return`${nr.THROTTLING_PREFIX}.${JSON.stringify(e)}`}static preProcess(e,t){var i;const r=pt.generateThrottlingStorageKey(t),o=e.getThrottlingCache(r);if(o){if(o.throttleTime<Date.now()){e.removeItem(r);return}throw new Wt(((i=o.errorCodes)==null?void 0:i.join(" "))||E.EMPTY_STRING,o.errorMessage,o.subError)}}static postProcess(e,t,r){if(pt.checkResponseStatus(r)||pt.checkResponseForRetryAfter(r)){const o={throttleTime:pt.calculateThrottleTime(parseInt(r.headers[Me.RETRY_AFTER])),error:r.body.error,errorCodes:r.body.error_codes,errorMessage:r.body.error_description,subError:r.body.suberror};e.setThrottlingCache(pt.generateThrottlingStorageKey(t),o)}}static checkResponseStatus(e){return e.status===429||e.status>=500&&e.status<600}static checkResponseForRetryAfter(e){return e.headers?e.headers.hasOwnProperty(Me.RETRY_AFTER)&&(e.status<200||e.status>=300):!1}static calculateThrottleTime(e){const t=e<=0?0:e,r=Date.now()/1e3;return Math.floor(Math.min(r+(t||nr.DEFAULT_THROTTLE_TIME_SECONDS),r+nr.DEFAULT_MAX_THROTTLE_TIME_SECONDS)*1e3)}static removeThrottle(e,t,r,o){const i=No(t,r,o),s=this.generateThrottlingStorageKey(i);e.removeItem(s)}}/*! @azure/msal-common v15.3.0 2025-03-20 */class Mo extends ce{constructor(e,t,r){super(e.errorCode,e.errorMessage,e.subError),Object.setPrototypeOf(this,Mo.prototype),this.name="NetworkError",this.error=e,this.httpStatus=t,this.responseHeaders=r}}function hc(n,e,t){return new Mo(n,e,t)}/*! @azure/msal-common v15.3.0 2025-03-20 */class zs{constructor(e,t){this.config=cm(e),this.logger=new Gt(this.config.loggerOptions,lh,bs),this.cryptoUtils=this.config.cryptoInterface,this.cacheManager=this.config.storageInterface,this.networkClient=this.config.networkInterface,this.serverTelemetryManager=this.config.serverTelemetryManager,this.authority=this.config.authOptions.authority,this.performanceClient=t}createTokenRequestHeaders(e){const t={};if(t[Me.CONTENT_TYPE]=E.URL_FORM_CONTENT_TYPE,!this.config.systemOptions.preventCorsPreflight&&e)switch(e.type){case We.HOME_ACCOUNT_ID:try{const r=bn(e.credential);t[Me.CCS_HEADER]=`Oid:${r.uid}@${r.utid}`}catch(r){this.logger.verbose("Could not parse home account ID for CCS Header: "+r)}break;case We.UPN:t[Me.CCS_HEADER]=`UPN: ${e.credential}`;break}return t}async executePostToTokenEndpoint(e,t,r,o,i,s){var c;s&&((c=this.performanceClient)==null||c.addQueueMeasurement(s,i));const a=await this.sendPostRequest(o,e,{body:t,headers:r},i);return this.config.serverTelemetryManager&&a.status<500&&a.status!==429&&this.config.serverTelemetryManager.clearTelemetryCache(),a}async sendPostRequest(e,t,r,o){var s,a,c;pt.preProcess(this.cacheManager,e);let i;try{i=await _(this.networkClient.sendPostRequestAsync.bind(this.networkClient),p.NetworkClientSendPostRequestAsync,this.logger,this.performanceClient,o)(t,r);const h=i.headers||{};(a=this.performanceClient)==null||a.addFields({refreshTokenSize:((s=i.body.refresh_token)==null?void 0:s.length)||0,httpVerToken:h[Me.X_MS_HTTP_VERSION]||"",requestId:h[Me.X_MS_REQUEST_ID]||""},o)}catch(h){if(h instanceof Mo){const l=h.responseHeaders;throw l&&((c=this.performanceClient)==null||c.addFields({httpVerToken:l[Me.X_MS_HTTP_VERSION]||"",requestId:l[Me.X_MS_REQUEST_ID]||"",contentTypeHeader:l[Me.CONTENT_TYPE]||void 0,contentLengthHeader:l[Me.CONTENT_LENGTH]||void 0,httpStatus:h.httpStatus},o)),h.error}throw h instanceof ce?h:S(Wl)}return pt.postProcess(this.cacheManager,e,i),i}async updateAuthority(e,t){var i;(i=this.performanceClient)==null||i.addQueueMeasurement(p.UpdateTokenEndpointAuthority,t);const r=`https://${e}/${this.authority.tenant}/`,o=await jh(r,this.networkClient,this.cacheManager,this.authority.options,this.logger,t,this.performanceClient);this.authority=o}createTokenQueryParameters(e){const t=new Map;return e.embeddedClientId&&Oo(t,this.config.authOptions.clientId,this.config.authOptions.redirectUri),e.tokenQueryParameters&&kn(t,e.tokenQueryParameters),Bs(t,e.correlationId),ko(t,e.correlationId,this.performanceClient),hr(t)}}/*! @azure/msal-common v15.3.0 2025-03-20 */const ao="no_tokens_found",Vh="native_account_unavailable",js="refresh_token_expired",hy="interaction_required",dy="consent_required",uy="login_required",xo="bad_token";/*! @azure/msal-common v15.3.0 2025-03-20 */const dc=[hy,dy,uy,xo],fy=["message_only","additional_action","basic_action","user_password_expired","consent_required","bad_token"],gy={[ao]:"No refresh token found in the cache. Please sign-in.",[Vh]:"The requested account is not available in the native broker. It may have been deleted or logged out. Please sign-in again using an interactive API.",[js]:"Refresh token has expired.",[xo]:"Identity provider returned bad_token due to an expired or invalid refresh token. Please invoke an interactive API to resolve."};class nt extends ce{constructor(e,t,r,o,i,s,a,c){super(e,t,r),Object.setPrototypeOf(this,nt.prototype),this.timestamp=o||E.EMPTY_STRING,this.traceId=i||E.EMPTY_STRING,this.correlationId=s||E.EMPTY_STRING,this.claims=a||E.EMPTY_STRING,this.name="InteractionRequiredAuthError",this.errorNo=c}}function Wh(n,e,t){const r=!!n&&dc.indexOf(n)>-1,o=!!t&&fy.indexOf(t)>-1,i=!!e&&dc.some(s=>e.indexOf(s)>-1);return r||i||o}function xi(n){return new nt(n,gy[n])}/*! @azure/msal-common v15.3.0 2025-03-20 */class tt{static setRequestState(e,t,r){const o=tt.generateLibraryState(e,r);return t?`${o}${E.RESOURCE_DELIM}${t}`:o}static generateLibraryState(e,t){if(!e)throw S(Oi);const r={id:e.createNewGuid()};t&&(r.meta=t);const o=JSON.stringify(r);return e.base64Encode(o)}static parseRequestState(e,t){if(!e)throw S(Oi);if(!t)throw S(Nn);try{const r=t.split(E.RESOURCE_DELIM),o=r[0],i=r.length>1?r.slice(1).join(E.RESOURCE_DELIM):E.EMPTY_STRING,s=e.base64Decode(o),a=JSON.parse(s);return{userRequestState:i||E.EMPTY_STRING,libraryState:a}}catch{throw S(Nn)}}}/*! @azure/msal-common v15.3.0 2025-03-20 */const py={SW:"sw"};class Mn{constructor(e,t){this.cryptoUtils=e,this.performanceClient=t}async generateCnf(e,t){var i;(i=this.performanceClient)==null||i.addQueueMeasurement(p.PopTokenGenerateCnf,e.correlationId);const r=await _(this.generateKid.bind(this),p.PopTokenGenerateCnf,t,this.performanceClient,e.correlationId)(e),o=this.cryptoUtils.base64UrlEncode(JSON.stringify(r));return{kid:r.kid,reqCnfString:o}}async generateKid(e){var r;return(r=this.performanceClient)==null||r.addQueueMeasurement(p.PopTokenGenerateKid,e.correlationId),{kid:await this.cryptoUtils.getPublicKeyThumbprint(e),xms_ksl:py.SW}}async signPopToken(e,t,r){return this.signPayload(e,t,r)}async signPayload(e,t,r,o){const{resourceRequestMethod:i,resourceRequestUri:s,shrClaims:a,shrNonce:c,shrOptions:h}=r,l=s?new Q(s):void 0,d=l==null?void 0:l.getUrlComponents();return this.cryptoUtils.signJwt({at:e,ts:Je(),m:i==null?void 0:i.toUpperCase(),u:d==null?void 0:d.HostNameAndPort,nonce:c||this.cryptoUtils.createNewGuid(),p:d==null?void 0:d.AbsolutePath,q:d!=null&&d.QueryString?[[],d.QueryString]:void 0,client_claims:a||void 0,...o},t,h,r.correlationId)}}/*! @azure/msal-common v15.3.0 2025-03-20 */class my{constructor(e,t){this.cache=e,this.hasChanged=t}get cacheHasChanged(){return this.hasChanged}get tokenCache(){return this.cache}}/*! @azure/msal-common v15.3.0 2025-03-20 */class xn{constructor(e,t,r,o,i,s,a){this.clientId=e,this.cacheStorage=t,this.cryptoObj=r,this.logger=o,this.serializableCache=i,this.persistencePlugin=s,this.performanceClient=a}validateTokenResponse(e,t){var r;if(e.error||e.error_description||e.suberror){const o=`Error(s): ${e.error_codes||E.NOT_AVAILABLE} - Timestamp: ${e.timestamp||E.NOT_AVAILABLE} - Description: ${e.error_description||E.NOT_AVAILABLE} - Correlation ID: ${e.correlation_id||E.NOT_AVAILABLE} - Trace ID: ${e.trace_id||E.NOT_AVAILABLE}`,i=(r=e.error_codes)!=null&&r.length?e.error_codes[0]:void 0,s=new Wt(e.error,o,e.suberror,i,e.status);if(t&&e.status&&e.status>=Or.SERVER_ERROR_RANGE_START&&e.status<=Or.SERVER_ERROR_RANGE_END){this.logger.warning(`executeTokenRequest:validateTokenResponse - AAD is currently unavailable and the access token is unable to be refreshed.
${s}`);return}else if(t&&e.status&&e.status>=Or.CLIENT_ERROR_RANGE_START&&e.status<=Or.CLIENT_ERROR_RANGE_END){this.logger.warning(`executeTokenRequest:validateTokenResponse - AAD is currently available but is unable to refresh the access token.
${s}`);return}throw Wh(e.error,e.error_description,e.suberror)?new nt(e.error,e.error_description,e.suberror,e.timestamp||E.EMPTY_STRING,e.trace_id||E.EMPTY_STRING,e.correlation_id||E.EMPTY_STRING,e.claims||E.EMPTY_STRING,i):s}}async handleServerTokenResponse(e,t,r,o,i,s,a,c,h){var m;(m=this.performanceClient)==null||m.addQueueMeasurement(p.HandleServerTokenResponse,e.correlation_id);let l;if(e.id_token){if(l=Dn(e.id_token||E.EMPTY_STRING,this.cryptoObj.base64Decode),i&&i.nonce&&l.nonce!==i.nonce)throw S(Xl);if(o.maxAge||o.maxAge===0){const A=l.auth_time;if(!A)throw S(ws);hh(A,o.maxAge)}}this.homeAccountIdentifier=Ue.generateHomeAccountId(e.client_info||E.EMPTY_STRING,t.authorityType,this.logger,this.cryptoObj,l);let d;i&&i.state&&(d=tt.parseRequestState(this.cryptoObj,i.state)),e.key_id=e.key_id||o.sshKid||void 0;const g=this.generateCacheRecord(e,t,r,o,l,s,i);let y;try{if(this.persistencePlugin&&this.serializableCache&&(this.logger.verbose("Persistence enabled, calling beforeCacheAccess"),y=new my(this.serializableCache,!0),await this.persistencePlugin.beforeCacheAccess(y)),a&&!c&&g.account){const A=g.account.generateAccountKey();if(!this.cacheStorage.getAccount(A))return this.logger.warning("Account used to refresh tokens not in persistence, refreshed tokens will not be stored in the cache"),await xn.generateAuthenticationResult(this.cryptoObj,t,g,!1,o,l,d,void 0,h)}await this.cacheStorage.saveCacheRecord(g,o.correlationId,o.storeInCache)}finally{this.persistencePlugin&&this.serializableCache&&y&&(this.logger.verbose("Persistence enabled, calling afterCacheAccess"),await this.persistencePlugin.afterCacheAccess(y))}return xn.generateAuthenticationResult(this.cryptoObj,t,g,!1,o,l,d,e,h)}generateCacheRecord(e,t,r,o,i,s,a){const c=t.getPreferredCache();if(!c)throw S(Ss);const h=vh(i);let l,d;e.id_token&&i&&(l=So(this.homeAccountIdentifier,c,e.id_token,this.clientId,h||""),d=Vs(this.cacheStorage,t,this.homeAccountIdentifier,this.cryptoObj.base64Decode,i,e.client_info,c,h,a,void 0,this.logger));let g=null;if(e.access_token){const A=e.scope?pe.fromString(e.scope):new pe(o.scopes||[]),I=(typeof e.expires_in=="string"?parseInt(e.expires_in,10):e.expires_in)||0,M=(typeof e.ext_expires_in=="string"?parseInt(e.ext_expires_in,10):e.ext_expires_in)||0,L=(typeof e.refresh_in=="string"?parseInt(e.refresh_in,10):e.refresh_in)||void 0,H=r+I,D=H+M,V=L&&L>0?r+L:void 0;g=Io(this.homeAccountIdentifier,c,e.access_token,this.clientId,h||t.tenant||"",A.printScopes(),H,D,this.cryptoObj.base64Decode,V,e.token_type,s,e.key_id,o.claims,o.requestedClaimsHash)}let y=null;if(e.refresh_token){let A;if(e.refresh_token_expires_in){const I=typeof e.refresh_token_expires_in=="string"?parseInt(e.refresh_token_expires_in,10):e.refresh_token_expires_in;A=r+I}y=dh(this.homeAccountIdentifier,c,e.refresh_token,this.clientId,e.foci,s,A)}let m=null;return e.foci&&(m={clientId:this.clientId,environment:c,familyId:e.foci}),{account:d,idToken:l,accessToken:g,refreshToken:y,appMetadata:m}}static async generateAuthenticationResult(e,t,r,o,i,s,a,c,h){var H,D,V,me,ge;let l=E.EMPTY_STRING,d=[],g=null,y,m,A=E.EMPTY_STRING;if(r.accessToken){if(r.accessToken.tokenType===ne.POP&&!i.popKid){const ke=new Mn(e),{secret:St,keyId:it}=r.accessToken;if(!it)throw S(Is);l=await ke.signPopToken(St,it,i)}else l=r.accessToken.secret;d=pe.fromString(r.accessToken.target).asArray(),g=vn(r.accessToken.expiresOn),y=vn(r.accessToken.extendedExpiresOn),r.accessToken.refreshOn&&(m=vn(r.accessToken.refreshOn))}r.appMetadata&&(A=r.appMetadata.familyId===tr?tr:"");const I=(s==null?void 0:s.oid)||(s==null?void 0:s.sub)||"",M=(s==null?void 0:s.tid)||"";c!=null&&c.spa_accountid&&r.account&&(r.account.nativeAccountId=c==null?void 0:c.spa_accountid);const L=r.account?Ms(r.account.getAccountInfo(),void 0,s,(H=r.idToken)==null?void 0:H.secret):null;return{authority:t.canonicalAuthority,uniqueId:I,tenantId:M,scopes:d,account:L,idToken:((D=r==null?void 0:r.idToken)==null?void 0:D.secret)||"",idTokenClaims:s||{},accessToken:l,fromCache:o,expiresOn:g,extExpiresOn:y,refreshOn:m,correlationId:i.correlationId,requestId:h||E.EMPTY_STRING,familyId:A,tokenType:((V=r.accessToken)==null?void 0:V.tokenType)||E.EMPTY_STRING,state:a?a.userRequestState:E.EMPTY_STRING,cloudGraphHostName:((me=r.account)==null?void 0:me.cloudGraphHostName)||E.EMPTY_STRING,msGraphHost:((ge=r.account)==null?void 0:ge.msGraphHost)||E.EMPTY_STRING,code:c==null?void 0:c.spa_code,fromNativeBroker:!1}}}function Vs(n,e,t,r,o,i,s,a,c,h,l){l==null||l.verbose("setCachedAccount called");const g=n.getAccountKeys().find(M=>M.startsWith(t));let y=null;g&&(y=n.getAccount(g));const m=y||Ue.createAccount({homeAccountId:t,idTokenClaims:o,clientInfo:i,environment:s,cloudGraphHostName:c==null?void 0:c.cloud_graph_host_name,msGraphHost:c==null?void 0:c.msgraph_host,nativeAccountId:h},e,r),A=m.tenantProfiles||[],I=a||m.realm;if(I&&!A.find(M=>M.tenantId===I)){const M=Ns(t,m.localAccountId,I,o);A.push(M)}return m.tenantProfiles=A,m}/*! @azure/msal-common v15.3.0 2025-03-20 */class yy{static validateRedirectUri(e){if(!e)throw te(uh)}static validatePrompt(e){const t=[];for(const r in Te)t.push(Te[r]);if(t.indexOf(e)<0)throw te(mh)}static validateClaims(e){try{JSON.parse(e)}catch{throw te(vo)}}static validateCodeChallengeParams(e,t){if(!e||!t)throw te(bo);this.validateCodeChallengeMethod(t)}static validateCodeChallengeMethod(e){if([Ja.PLAIN,Ja.S256].indexOf(e)<0)throw te(Th)}}/*! @azure/msal-common v15.3.0 2025-03-20 */async function Yh(n,e,t){return typeof n=="string"?n:n({clientId:e,tokenEndpoint:t})}/*! @azure/msal-common v15.3.0 2025-03-20 */class Qh extends zs{constructor(e,t){var r;super(e,t),this.includeRedirectUri=!0,this.oidcDefaultScopes=(r=this.config.authOptions.authority.options.OIDCOptions)==null?void 0:r.defaultScopes}async acquireToken(e,t){var a,c;if((a=this.performanceClient)==null||a.addQueueMeasurement(p.AuthClientAcquireToken,e.correlationId),!e.code)throw S(th);const r=Je(),o=await _(this.executeTokenRequest.bind(this),p.AuthClientExecuteTokenRequest,this.logger,this.performanceClient,e.correlationId)(this.authority,e),i=(c=o.headers)==null?void 0:c[Me.X_MS_REQUEST_ID],s=new xn(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin,this.performanceClient);return s.validateTokenResponse(o.body),_(s.handleServerTokenResponse.bind(s),p.HandleServerTokenResponse,this.logger,this.performanceClient,e.correlationId)(o.body,this.authority,r,e,t,void 0,void 0,void 0,i)}getLogoutUri(e){if(!e)throw te(Ch);const t=this.createLogoutUrlQueryString(e);return Q.appendQueryString(this.authority.endSessionEndpoint,t)}async executeTokenRequest(e,t){var h;(h=this.performanceClient)==null||h.addQueueMeasurement(p.AuthClientExecuteTokenRequest,t.correlationId);const r=this.createTokenQueryParameters(t),o=Q.appendQueryString(e.tokenEndpoint,r),i=await _(this.createTokenRequestBody.bind(this),p.AuthClientCreateTokenRequestBody,this.logger,this.performanceClient,t.correlationId)(t);let s;if(t.clientInfo)try{const l=to(t.clientInfo,this.cryptoUtils.base64Decode);s={credential:`${l.uid}${ve.CLIENT_INFO_SEPARATOR}${l.utid}`,type:We.HOME_ACCOUNT_ID}}catch(l){this.logger.verbose("Could not parse client info for CCS Header: "+l)}const a=this.createTokenRequestHeaders(s||t.ccsCredential),c=No(this.config.authOptions.clientId,t);return _(this.executePostToTokenEndpoint.bind(this),p.AuthorizationCodeClientExecutePostToTokenEndpoint,this.logger,this.performanceClient,t.correlationId)(o,i,a,c,t.correlationId,p.AuthorizationCodeClientExecutePostToTokenEndpoint)}async createTokenRequestBody(e){var o,i;(o=this.performanceClient)==null||o.addQueueMeasurement(p.AuthClientCreateTokenRequestBody,e.correlationId);const t=new Map;if(Us(t,e.embeddedClientId||((i=e.tokenBodyParameters)==null?void 0:i[cn])||this.config.authOptions.clientId),this.includeRedirectUri?Hs(t,e.redirectUri):yy.validateRedirectUri(e.redirectUri),Ls(t,e.scopes,!0,this.oidcDefaultScopes),Zm(t,e.code),Ks(t,this.config.libraryInfo),qs(t,this.config.telemetry.application),Gh(t),this.serverTelemetryManager&&!Nh(this.config)&&$h(t,this.serverTelemetryManager),e.codeVerifier&&ty(t,e.codeVerifier),this.config.clientCredentials.clientSecret&&Uh(t,this.config.clientCredentials.clientSecret),this.config.clientCredentials.clientAssertion){const s=this.config.clientCredentials.clientAssertion;Hh(t,await Yh(s.assertion,this.config.authOptions.clientId,e.resourceRequestUri)),Fh(t,s.assertionType)}if(Bh(t,Gl.AUTHORIZATION_CODE_GRANT),$s(t),e.authenticationScheme===ne.POP){const s=new Mn(this.cryptoUtils,this.performanceClient);let a;e.popKid?a=this.cryptoUtils.encodeKid(e.popKid):a=(await _(s.generateCnf.bind(s),p.PopTokenGenerateCnf,this.logger,this.performanceClient,e.correlationId)(e,this.logger)).reqCnfString,Gs(t,a)}else if(e.authenticationScheme===ne.SSH)if(e.sshJwk)qh(t,e.sshJwk);else throw te(Ro);(!Et.isEmptyObj(e.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&Fs(t,e.claims,this.config.authOptions.clientCapabilities);let r;if(e.clientInfo)try{const s=to(e.clientInfo,this.cryptoUtils.base64Decode);r={credential:`${s.uid}${ve.CLIENT_INFO_SEPARATOR}${s.utid}`,type:We.HOME_ACCOUNT_ID}}catch(s){this.logger.verbose("Could not parse client info for CCS Header: "+s)}else r=e.ccsCredential;if(this.config.systemOptions.preventCorsPreflight&&r)switch(r.type){case We.HOME_ACCOUNT_ID:try{const s=bn(r.credential);or(t,s)}catch(s){this.logger.verbose("Could not parse home account ID for CCS Header: "+s)}break;case We.UPN:so(t,r.credential);break}return e.embeddedClientId&&Oo(t,this.config.authOptions.clientId,this.config.authOptions.redirectUri),e.tokenBodyParameters&&kn(t,e.tokenBodyParameters),e.enableSpaAuthorizationCode&&(!e.tokenBodyParameters||!e.tokenBodyParameters[ac])&&kn(t,{[ac]:"1"}),ko(t,e.correlationId,this.performanceClient),hr(t)}createLogoutUrlQueryString(e){const t=new Map;return e.postLogoutRedirectUri&&Vm(t,e.postLogoutRedirectUri),e.correlationId&&Bs(t,e.correlationId),e.idTokenHint&&Wm(t,e.idTokenHint),e.state&&Lh(t,e.state),e.logoutHint&&ry(t,e.logoutHint),e.extraQueryParameters&&kn(t,e.extraQueryParameters),this.config.authOptions.instanceAware&&Kh(t),hr(t)}}/*! @azure/msal-common v15.3.0 2025-03-20 */const Cy=300;class Ty extends zs{constructor(e,t){super(e,t)}async acquireToken(e){var s,a;(s=this.performanceClient)==null||s.addQueueMeasurement(p.RefreshTokenClientAcquireToken,e.correlationId);const t=Je(),r=await _(this.executeTokenRequest.bind(this),p.RefreshTokenClientExecuteTokenRequest,this.logger,this.performanceClient,e.correlationId)(e,this.authority),o=(a=r.headers)==null?void 0:a[Me.X_MS_REQUEST_ID],i=new xn(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin);return i.validateTokenResponse(r.body),_(i.handleServerTokenResponse.bind(i),p.HandleServerTokenResponse,this.logger,this.performanceClient,e.correlationId)(r.body,this.authority,t,e,void 0,void 0,!0,e.forceCache,o)}async acquireTokenByRefreshToken(e){var r;if(!e)throw te(yh);if((r=this.performanceClient)==null||r.addQueueMeasurement(p.RefreshTokenClientAcquireTokenByRefreshToken,e.correlationId),!e.account)throw S(_s);if(this.cacheManager.isAppMetadataFOCI(e.account.environment))try{return await _(this.acquireTokenWithCachedRefreshToken.bind(this),p.RefreshTokenClientAcquireTokenWithCachedRefreshToken,this.logger,this.performanceClient,e.correlationId)(e,!0)}catch(o){const i=o instanceof nt&&o.errorCode===ao,s=o instanceof Wt&&o.errorCode===Xa.INVALID_GRANT_ERROR&&o.subError===Xa.CLIENT_MISMATCH_ERROR;if(i||s)return _(this.acquireTokenWithCachedRefreshToken.bind(this),p.RefreshTokenClientAcquireTokenWithCachedRefreshToken,this.logger,this.performanceClient,e.correlationId)(e,!1);throw o}return _(this.acquireTokenWithCachedRefreshToken.bind(this),p.RefreshTokenClientAcquireTokenWithCachedRefreshToken,this.logger,this.performanceClient,e.correlationId)(e,!1)}async acquireTokenWithCachedRefreshToken(e,t){var i,s,a;(i=this.performanceClient)==null||i.addQueueMeasurement(p.RefreshTokenClientAcquireTokenWithCachedRefreshToken,e.correlationId);const r=xt(this.cacheManager.getRefreshToken.bind(this.cacheManager),p.CacheManagerGetRefreshToken,this.logger,this.performanceClient,e.correlationId)(e.account,t,void 0,this.performanceClient,e.correlationId);if(!r)throw xi(ao);if(r.expiresOn&&Ni(r.expiresOn,e.refreshTokenExpirationOffsetSeconds||Cy))throw(s=this.performanceClient)==null||s.addFields({rtExpiresOnMs:Number(r.expiresOn)},e.correlationId),xi(js);const o={...e,refreshToken:r.secret,authenticationScheme:e.authenticationScheme||ne.BEARER,ccsCredential:{credential:e.account.homeAccountId,type:We.HOME_ACCOUNT_ID}};try{return await _(this.acquireToken.bind(this),p.RefreshTokenClientAcquireToken,this.logger,this.performanceClient,e.correlationId)(o)}catch(c){if(c instanceof nt&&((a=this.performanceClient)==null||a.addFields({rtExpiresOnMs:Number(r.expiresOn)},e.correlationId),c.subError===xo)){this.logger.verbose("acquireTokenWithRefreshToken: bad refresh token, removing from cache");const h=rr(r);this.cacheManager.removeRefreshToken(h)}throw c}}async executeTokenRequest(e,t){var c;(c=this.performanceClient)==null||c.addQueueMeasurement(p.RefreshTokenClientExecuteTokenRequest,e.correlationId);const r=this.createTokenQueryParameters(e),o=Q.appendQueryString(t.tokenEndpoint,r),i=await _(this.createTokenRequestBody.bind(this),p.RefreshTokenClientCreateTokenRequestBody,this.logger,this.performanceClient,e.correlationId)(e),s=this.createTokenRequestHeaders(e.ccsCredential),a=No(this.config.authOptions.clientId,e);return _(this.executePostToTokenEndpoint.bind(this),p.RefreshTokenClientExecutePostToTokenEndpoint,this.logger,this.performanceClient,e.correlationId)(o,i,s,a,e.correlationId,p.RefreshTokenClientExecutePostToTokenEndpoint)}async createTokenRequestBody(e){var r,o,i;(r=this.performanceClient)==null||r.addQueueMeasurement(p.RefreshTokenClientCreateTokenRequestBody,e.correlationId);const t=new Map;if(Us(t,e.embeddedClientId||((o=e.tokenBodyParameters)==null?void 0:o[cn])||this.config.authOptions.clientId),e.redirectUri&&Hs(t,e.redirectUri),Ls(t,e.scopes,!0,(i=this.config.authOptions.authority.options.OIDCOptions)==null?void 0:i.defaultScopes),Bh(t,Gl.REFRESH_TOKEN_GRANT),$s(t),Ks(t,this.config.libraryInfo),qs(t,this.config.telemetry.application),Gh(t),this.serverTelemetryManager&&!Nh(this.config)&&$h(t,this.serverTelemetryManager),ey(t,e.refreshToken),this.config.clientCredentials.clientSecret&&Uh(t,this.config.clientCredentials.clientSecret),this.config.clientCredentials.clientAssertion){const s=this.config.clientCredentials.clientAssertion;Hh(t,await Yh(s.assertion,this.config.authOptions.clientId,e.resourceRequestUri)),Fh(t,s.assertionType)}if(e.authenticationScheme===ne.POP){const s=new Mn(this.cryptoUtils,this.performanceClient);let a;e.popKid?a=this.cryptoUtils.encodeKid(e.popKid):a=(await _(s.generateCnf.bind(s),p.PopTokenGenerateCnf,this.logger,this.performanceClient,e.correlationId)(e,this.logger)).reqCnfString,Gs(t,a)}else if(e.authenticationScheme===ne.SSH)if(e.sshJwk)qh(t,e.sshJwk);else throw te(Ro);if((!Et.isEmptyObj(e.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&Fs(t,e.claims,this.config.authOptions.clientCapabilities),this.config.systemOptions.preventCorsPreflight&&e.ccsCredential)switch(e.ccsCredential.type){case We.HOME_ACCOUNT_ID:try{const s=bn(e.ccsCredential.credential);or(t,s)}catch(s){this.logger.verbose("Could not parse home account ID for CCS Header: "+s)}break;case We.UPN:so(t,e.ccsCredential.credential);break}return e.embeddedClientId&&Oo(t,this.config.authOptions.clientId,this.config.authOptions.redirectUri),e.tokenBodyParameters&&kn(t,e.tokenBodyParameters),ko(t,e.correlationId,this.performanceClient),hr(t)}}/*! @azure/msal-common v15.3.0 2025-03-20 */class Ay extends zs{constructor(e,t){super(e,t)}async acquireCachedToken(e){var c;(c=this.performanceClient)==null||c.addQueueMeasurement(p.SilentFlowClientAcquireCachedToken,e.correlationId);let t=en.NOT_APPLICABLE;if(e.forceRefresh||!this.config.cacheOptions.claimsBasedCachingEnabled&&!Et.isEmptyObj(e.claims))throw this.setCacheOutcome(en.FORCE_REFRESH_OR_CLAIMS,e.correlationId),S(qt);if(!e.account)throw S(_s);const r=e.account.tenantId||cy(e.authority),o=this.cacheManager.getTokenKeys(),i=this.cacheManager.getAccessToken(e.account,e,o,r,this.performanceClient,e.correlationId);if(i){if(xp(i.cachedAt)||Ni(i.expiresOn,this.config.systemOptions.tokenRenewalOffsetSeconds))throw this.setCacheOutcome(en.CACHED_ACCESS_TOKEN_EXPIRED,e.correlationId),S(qt);i.refreshOn&&Ni(i.refreshOn,0)&&(t=en.PROACTIVELY_REFRESHED)}else throw this.setCacheOutcome(en.NO_CACHED_ACCESS_TOKEN,e.correlationId),S(qt);const s=e.authority||this.authority.getPreferredCache(),a={account:this.cacheManager.readAccountFromCache(e.account),accessToken:i,idToken:this.cacheManager.getIdToken(e.account,o,r,this.performanceClient,e.correlationId),refreshToken:null,appMetadata:this.cacheManager.readAppMetadataFromCache(s)};return this.setCacheOutcome(t,e.correlationId),this.config.serverTelemetryManager&&this.config.serverTelemetryManager.incrementCacheHits(),[await _(this.generateResultFromCacheRecord.bind(this),p.SilentFlowClientGenerateResultFromCacheRecord,this.logger,this.performanceClient,e.correlationId)(a,e),t]}setCacheOutcome(e,t){var r,o;(r=this.serverTelemetryManager)==null||r.setCacheOutcome(e),(o=this.performanceClient)==null||o.addFields({cacheOutcome:e},t),e!==en.NOT_APPLICABLE&&this.logger.info(`Token refresh is required due to cache outcome: ${e}`)}async generateResultFromCacheRecord(e,t){var o;(o=this.performanceClient)==null||o.addQueueMeasurement(p.SilentFlowClientGenerateResultFromCacheRecord,t.correlationId);let r;if(e.idToken&&(r=Dn(e.idToken.secret,this.config.cryptoInterface.base64Decode)),t.maxAge||t.maxAge===0){const i=r==null?void 0:r.auth_time;if(!i)throw S(ws);hh(i,t.maxAge)}return xn.generateAuthenticationResult(this.cryptoUtils,this.authority,e,!0,t,r)}}/*! @azure/msal-common v15.3.0 2025-03-20 */const Ey={sendGetRequestAsync:()=>Promise.reject(S(W)),sendPostRequestAsync:()=>Promise.reject(S(W))};/*! @azure/msal-common v15.3.0 2025-03-20 */function wy(n,e,t,r){var a,c;const o=e.correlationId,i=new Map;Us(i,e.embeddedClientId||((a=e.extraQueryParameters)==null?void 0:a[cn])||n.clientId);const s=[...e.scopes||[],...e.extraScopesToConsent||[]];if(Ls(i,s,!0,(c=n.authority.options.OIDCOptions)==null?void 0:c.defaultScopes),Hs(i,e.redirectUri),Bs(i,o),zm(i,e.responseMode),$s(i),e.prompt&&(Qm(i,e.prompt),r==null||r.addFields({prompt:e.prompt},o)),e.domainHint&&(Ym(i,e.domainHint),r==null||r.addFields({domainHintFromRequest:!0},o)),e.prompt!==Te.SELECT_ACCOUNT)if(e.sid&&e.prompt===Te.NONE)t.verbose("createAuthCodeUrlQueryString: Prompt is none, adding sid from request"),lc(i,e.sid),r==null||r.addFields({sidFromRequest:!0},o);else if(e.account){const h=vy(e.account);let l=by(e.account);if(l&&e.domainHint&&(t.warning('AuthorizationCodeClient.createAuthCodeUrlQueryString: "domainHint" param is set, skipping opaque "login_hint" claim. Please consider not passing domainHint'),l=null),l){t.verbose("createAuthCodeUrlQueryString: login_hint claim present on account"),Dr(i,l),r==null||r.addFields({loginHintFromClaim:!0},o);try{const d=bn(e.account.homeAccountId);or(i,d)}catch{t.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}else if(h&&e.prompt===Te.NONE){t.verbose("createAuthCodeUrlQueryString: Prompt is none, adding sid from account"),lc(i,h),r==null||r.addFields({sidFromClaim:!0},o);try{const d=bn(e.account.homeAccountId);or(i,d)}catch{t.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}else if(e.loginHint)t.verbose("createAuthCodeUrlQueryString: Adding login_hint from request"),Dr(i,e.loginHint),so(i,e.loginHint),r==null||r.addFields({loginHintFromRequest:!0},o);else if(e.account.username){t.verbose("createAuthCodeUrlQueryString: Adding login_hint from account"),Dr(i,e.account.username),r==null||r.addFields({loginHintFromUpn:!0},o);try{const d=bn(e.account.homeAccountId);or(i,d)}catch{t.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}}else e.loginHint&&(t.verbose("createAuthCodeUrlQueryString: No account, adding login_hint from request"),Dr(i,e.loginHint),so(i,e.loginHint),r==null||r.addFields({loginHintFromRequest:!0},o));else t.verbose("createAuthCodeUrlQueryString: Prompt is select_account, ignoring account hints");return e.nonce&&Jm(i,e.nonce),e.state&&Lh(i,e.state),(e.claims||n.clientCapabilities&&n.clientCapabilities.length>0)&&Fs(i,e.claims,n.clientCapabilities),e.embeddedClientId&&Oo(i,n.clientId,n.redirectUri),e.extraQueryParameters&&kn(i,e.extraQueryParameters),n.instanceAware&&Kh(i),i}function _y(n,e){const t=hr(e);return Q.appendQueryString(n.authorizationEndpoint,t)}function Jh(n,e){if(Sy(n,e),!n.code)throw S(sh);return n}function Sy(n,e){if(!n.state||!e)throw n.state?S(Zr,"Cached State"):S(Zr,"Server State");let t,r;try{t=decodeURIComponent(n.state)}catch{throw S(Nn,n.state)}try{r=decodeURIComponent(e)}catch{throw S(Nn,n.state)}if(t!==r)throw S(Jl);if(n.error||n.error_description||n.suberror){const o=Iy(n);throw Wh(n.error,n.error_description,n.suberror)?new nt(n.error||"",n.error_description,n.suberror,n.timestamp||"",n.trace_id||"",n.correlation_id||"",n.claims||"",o):new Wt(n.error||"",n.error_description,n.suberror,o)}}function Iy(n){var r,o;const e="code=",t=(r=n.error_uri)==null?void 0:r.lastIndexOf(e);return t&&t>=0?(o=n.error_uri)==null?void 0:o.substring(t+e.length):void 0}function vy(n){var e;return((e=n.idTokenClaims)==null?void 0:e.sid)||null}function by(n){var e;return((e=n.idTokenClaims)==null?void 0:e.login_hint)||null}/*! @azure/msal-common v15.3.0 2025-03-20 */const uc=",",Xh="|";function Ry(n){const{skus:e,libraryName:t,libraryVersion:r,extensionName:o,extensionVersion:i}=n,s=new Map([[0,[t,r]],[2,[o,i]]]);let a=[];if(e!=null&&e.length){if(a=e.split(uc),a.length<4)return e}else a=Array.from({length:4},()=>Xh);return s.forEach((c,h)=>{var l,d;c.length===2&&((l=c[0])!=null&&l.length)&&((d=c[1])!=null&&d.length)&&ky({skuArr:a,index:h,skuName:c[0],skuVersion:c[1]})}),a.join(uc)}function ky(n){const{skuArr:e,index:t,skuName:r,skuVersion:o}=n;t>=e.length||(e[t]=[r,o].join(Xh))}class dr{constructor(e,t){this.cacheOutcome=en.NOT_APPLICABLE,this.cacheManager=t,this.apiId=e.apiId,this.correlationId=e.correlationId,this.wrapperSKU=e.wrapperSKU||E.EMPTY_STRING,this.wrapperVer=e.wrapperVer||E.EMPTY_STRING,this.telemetryCacheKey=Ae.CACHE_KEY+ve.CACHE_KEY_SEPARATOR+e.clientId}generateCurrentRequestHeaderValue(){const e=`${this.apiId}${Ae.VALUE_SEPARATOR}${this.cacheOutcome}`,t=[this.wrapperSKU,this.wrapperVer],r=this.getNativeBrokerErrorCode();r!=null&&r.length&&t.push(`broker_error=${r}`);const o=t.join(Ae.VALUE_SEPARATOR),i=this.getRegionDiscoveryFields(),s=[e,i].join(Ae.VALUE_SEPARATOR);return[Ae.SCHEMA_VERSION,s,o].join(Ae.CATEGORY_SEPARATOR)}generateLastRequestHeaderValue(){const e=this.getLastRequests(),t=dr.maxErrorsToSend(e),r=e.failedRequests.slice(0,2*t).join(Ae.VALUE_SEPARATOR),o=e.errors.slice(0,t).join(Ae.VALUE_SEPARATOR),i=e.errors.length,s=t<i?Ae.OVERFLOW_TRUE:Ae.OVERFLOW_FALSE,a=[i,s].join(Ae.VALUE_SEPARATOR);return[Ae.SCHEMA_VERSION,e.cacheHits,r,o,a].join(Ae.CATEGORY_SEPARATOR)}cacheFailedRequest(e){const t=this.getLastRequests();t.errors.length>=Ae.MAX_CACHED_ERRORS&&(t.failedRequests.shift(),t.failedRequests.shift(),t.errors.shift()),t.failedRequests.push(this.apiId,this.correlationId),e instanceof Error&&e&&e.toString()?e instanceof ce?e.subError?t.errors.push(e.subError):e.errorCode?t.errors.push(e.errorCode):t.errors.push(e.toString()):t.errors.push(e.toString()):t.errors.push(Ae.UNKNOWN_ERROR),this.cacheManager.setServerTelemetry(this.telemetryCacheKey,t)}incrementCacheHits(){const e=this.getLastRequests();return e.cacheHits+=1,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,e),e.cacheHits}getLastRequests(){const e={failedRequests:[],errors:[],cacheHits:0};return this.cacheManager.getServerTelemetry(this.telemetryCacheKey)||e}clearTelemetryCache(){const e=this.getLastRequests(),t=dr.maxErrorsToSend(e),r=e.errors.length;if(t===r)this.cacheManager.removeItem(this.telemetryCacheKey);else{const o={failedRequests:e.failedRequests.slice(t*2),errors:e.errors.slice(t),cacheHits:0};this.cacheManager.setServerTelemetry(this.telemetryCacheKey,o)}}static maxErrorsToSend(e){let t,r=0,o=0;const i=e.errors.length;for(t=0;t<i;t++){const s=e.failedRequests[2*t]||E.EMPTY_STRING,a=e.failedRequests[2*t+1]||E.EMPTY_STRING,c=e.errors[t]||E.EMPTY_STRING;if(o+=s.toString().length+a.toString().length+c.length+3,o<Ae.MAX_LAST_HEADER_BYTES)r+=1;else break}return r}getRegionDiscoveryFields(){const e=[];return e.push(this.regionUsed||E.EMPTY_STRING),e.push(this.regionSource||E.EMPTY_STRING),e.push(this.regionOutcome||E.EMPTY_STRING),e.join(",")}updateRegionDiscoveryMetadata(e){this.regionUsed=e.region_used,this.regionSource=e.region_source,this.regionOutcome=e.region_outcome}setCacheOutcome(e){this.cacheOutcome=e}setNativeBrokerErrorCode(e){const t=this.getLastRequests();t.nativeBrokerErrorCode=e,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,t)}getNativeBrokerErrorCode(){return this.getLastRequests().nativeBrokerErrorCode}clearNativeBrokerErrorCode(){const e=this.getLastRequests();delete e.nativeBrokerErrorCode,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,e)}static makeExtraSkuString(e){return Ry(e)}}/*! @azure/msal-common v15.3.0 2025-03-20 */const Zh="missing_kid_error",ed="missing_alg_error";/*! @azure/msal-common v15.3.0 2025-03-20 */const Oy={[Zh]:"The JOSE Header for the requested JWT, JWS or JWK object requires a keyId to be configured as the 'kid' header claim. No 'kid' value was provided.",[ed]:"The JOSE Header for the requested JWT, JWS or JWK object requires an algorithm to be specified as the 'alg' header claim. No 'alg' value was provided."};class Ws extends ce{constructor(e,t){super(e,t),this.name="JoseHeaderError",Object.setPrototypeOf(this,Ws.prototype)}}function fc(n){return new Ws(n,Oy[n])}/*! @azure/msal-common v15.3.0 2025-03-20 */class Ys{constructor(e){this.typ=e.typ,this.alg=e.alg,this.kid=e.kid}static getShrHeaderString(e){if(!e.kid)throw fc(Zh);if(!e.alg)throw fc(ed);const t=new Ys({typ:e.typ||Cp.Pop,kid:e.kid,alg:e.alg});return JSON.stringify(t)}}/*! @azure/msal-common v15.3.0 2025-03-20 */class gc{startMeasurement(){}endMeasurement(){}flushMeasurement(){return null}}class Py{generateId(){return"callback-id"}startMeasurement(e,t){return{end:()=>null,discard:()=>{},add:()=>{},increment:()=>{},event:{eventId:this.generateId(),status:ay.InProgress,authority:"",libraryName:"",libraryVersion:"",clientId:"",name:e,startTimeMs:Date.now(),correlationId:t||""},measurement:new gc}}startPerformanceMeasurement(){return new gc}calculateQueuedTime(){return 0}addQueueMeasurement(){}setPreQueueTime(){}endMeasurement(){return null}discardMeasurements(){}removePerformanceCallback(){return!0}addPerformanceCallback(){return""}emitEvents(){}addFields(){}incrementFields(){}cacheEventByCorrelationId(){}}/*! @azure/msal-browser v4.8.0 2025-03-20 */const Qs="pkce_not_created",Di="crypto_nonexistent",Do="empty_navigate_uri",td="hash_empty_error",Js="no_state_in_hash",nd="hash_does_not_contain_known_properties",rd="unable_to_parse_state",od="state_interaction_type_mismatch",id="interaction_in_progress",sd="popup_window_error",ad="empty_window_error",ln="user_cancelled",Ny="monitor_popup_timeout",cd="monitor_window_timeout",ld="redirect_in_iframe",hd="block_iframe_reload",dd="block_nested_popups",My="iframe_closed_prematurely",Lo="silent_logout_unsupported",ud="no_account_error",xy="silent_prompt_value_error",fd="no_token_request_cache_error",gd="unable_to_parse_token_request_cache_error",Xs="no_cached_authority_error",Dy="auth_request_not_set_error",Ly="invalid_cache_type",Uo="non_browser_environment",Cn="database_not_open",co="no_network_connectivity",pd="post_request_failed",md="get_request_failed",Li="failed_to_parse_response",yd="unable_to_load_token",Zs="crypto_key_not_found",Cd="auth_code_required",Td="auth_code_or_nativeAccountId_required",Ad="spa_code_and_nativeAccountId_present",ea="database_unavailable",Ed="unable_to_acquire_token_from_native_platform",wd="native_handshake_timeout",_d="native_extension_not_installed",Cr="native_connection_not_established",lo="uninitialized_public_client_application",Sd="native_prompt_not_supported",Id="invalid_base64_string",vd="invalid_pop_token_request",bd="failed_to_build_headers",Rd="failed_to_parse_headers";/*! @azure/msal-browser v4.8.0 2025-03-20 */const vt="For more visit: aka.ms/msaljs/browser-errors",Uy={[Qs]:"The PKCE code challenge and verifier could not be generated.",[Di]:"The crypto object or function is not available.",[Do]:"Navigation URI is empty. Please check stack trace for more info.",[td]:`Hash value cannot be processed because it is empty. Please verify that your redirectUri is not clearing the hash. ${vt}`,[Js]:"Hash does not contain state. Please verify that the request originated from msal.",[nd]:`Hash does not contain known properites. Please verify that your redirectUri is not changing the hash.  ${vt}`,[rd]:"Unable to parse state. Please verify that the request originated from msal.",[od]:"Hash contains state but the interaction type does not match the caller.",[id]:`Interaction is currently in progress. Please ensure that this interaction has been completed before calling an interactive API.   ${vt}`,[sd]:"Error opening popup window. This can happen if you are using IE or if popups are blocked in the browser.",[ad]:"window.open returned null or undefined window object.",[ln]:"User cancelled the flow.",[Ny]:`Token acquisition in popup failed due to timeout.  ${vt}`,[cd]:`Token acquisition in iframe failed due to timeout.  ${vt}`,[ld]:"Redirects are not supported for iframed or brokered applications. Please ensure you are using MSAL.js in a top frame of the window if using the redirect APIs, or use the popup APIs.",[hd]:`Request was blocked inside an iframe because MSAL detected an authentication response.  ${vt}`,[dd]:"Request was blocked inside a popup because MSAL detected it was running in a popup.",[My]:"The iframe being monitored was closed prematurely.",[Lo]:"Silent logout not supported. Please call logoutRedirect or logoutPopup instead.",[ud]:"No account object provided to acquireTokenSilent and no active account has been set. Please call setActiveAccount or provide an account on the request.",[xy]:"The value given for the prompt value is not valid for silent requests - must be set to 'none' or 'no_session'.",[fd]:"No token request found in cache.",[gd]:"The cached token request could not be parsed.",[Xs]:"No cached authority found.",[Dy]:"Auth Request not set. Please ensure initiateAuthRequest was called from the InteractionHandler",[Ly]:"Invalid cache type",[Uo]:"Login and token requests are not supported in non-browser environments.",[Cn]:"Database is not open!",[co]:"No network connectivity. Check your internet connection.",[pd]:"Network request failed: If the browser threw a CORS error, check that the redirectUri is registered in the Azure App Portal as type 'SPA'",[md]:"Network request failed. Please check the network trace to determine root cause.",[Li]:"Failed to parse network response. Check network trace.",[yd]:"Error loading token to cache.",[Zs]:"Cryptographic Key or Keypair not found in browser storage.",[Cd]:"An authorization code must be provided (as the `code` property on the request) to this flow.",[Td]:"An authorization code or nativeAccountId must be provided to this flow.",[Ad]:"Request cannot contain both spa code and native account id.",[ea]:"IndexedDB, which is required for persistent cryptographic key storage, is unavailable. This may be caused by browser privacy features which block persistent storage in third-party contexts.",[Ed]:`Unable to acquire token from native platform.  ${vt}`,[wd]:"Timed out while attempting to establish connection to browser extension",[_d]:"Native extension is not installed. If you think this is a mistake call the initialize function.",[Cr]:`Connection to native platform has not been established. Please install a compatible browser extension and run initialize().  ${vt}`,[lo]:`You must call and await the initialize function before attempting to call any other MSAL API.  ${vt}`,[Sd]:"The provided prompt is not supported by the native platform. This request should be routed to the web based flow.",[Id]:"Invalid base64 encoded string.",[vd]:"Invalid PoP token request. The request should not have both a popKid value and signPopToken set to true.",[bd]:"Failed to build request headers object.",[Rd]:"Failed to parse response headers"};class Tr extends ce{constructor(e,t){super(e,Uy[e],t),Object.setPrototypeOf(this,Tr.prototype),this.name="BrowserAuthError"}}function x(n,e){return new Tr(n,e)}/*! @azure/msal-browser v4.8.0 2025-03-20 */const Be={INVALID_GRANT_ERROR:"invalid_grant",POPUP_WIDTH:483,POPUP_HEIGHT:600,POPUP_NAME_PREFIX:"msal",DEFAULT_POLL_INTERVAL_MS:30,MSAL_SKU:"msal.js.browser"},An={CHANNEL_ID:"53ee284d-920a-4b59-9d30-a60315b26836",PREFERRED_EXTENSION_ID:"ppnbnpeolgkicgegkbkbjmhlideopiji",MATS_TELEMETRY:"MATS"},tn={HandshakeRequest:"Handshake",HandshakeResponse:"HandshakeResponse",GetToken:"GetToken",Response:"Response"},we={LocalStorage:"localStorage",SessionStorage:"sessionStorage",MemoryStorage:"memoryStorage"},pc={GET:"GET",POST:"POST"},ee={AUTHORITY:"authority",ACQUIRE_TOKEN_ACCOUNT:"acquireToken.account",SESSION_STATE:"session.state",REQUEST_STATE:"request.state",NONCE_IDTOKEN:"nonce.id_token",ORIGIN_URI:"request.origin",RENEW_STATUS:"token.renew.status",URL_HASH:"urlHash",REQUEST_PARAMS:"request.params",SCOPES:"scopes",INTERACTION_STATUS_KEY:"interaction.status",CCS_CREDENTIAL:"ccs.credential",CORRELATION_ID:"request.correlationId",NATIVE_REQUEST:"request.native",REDIRECT_CONTEXT:"request.redirect.context"},Ft={ACCOUNT_KEYS:"msal.account.keys",TOKEN_KEYS:"msal.token.keys"},Lr={WRAPPER_SKU:"wrapper.sku",WRAPPER_VER:"wrapper.version"},ae={acquireTokenRedirect:861,acquireTokenPopup:862,ssoSilent:863,acquireTokenSilent_authCode:864,handleRedirectPromise:865,acquireTokenByCode:866,acquireTokenSilent_silentFlow:61,logout:961,logoutPopup:962};var U;(function(n){n.Redirect="redirect",n.Popup="popup",n.Silent="silent",n.None="none"})(U||(U={}));const mc={scopes:mr},kd="jwk",Ui="msal.db",Hy=1,Fy=`${Ui}.keys`,Ne={Default:0,AccessToken:1,AccessTokenAndRefreshToken:2,RefreshToken:3,RefreshTokenAndNetwork:4,Skip:5},By=[Ne.Default,Ne.Skip,Ne.RefreshTokenAndNetwork],Ky="msal.browser.log.level",qy="msal.browser.log.pii";/*! @azure/msal-browser v4.8.0 2025-03-20 */function Ur(n){return encodeURIComponent(ta(n).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_"))}function hn(n){return Od(n).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function ta(n){return Od(new TextEncoder().encode(n))}function Od(n){const e=Array.from(n,t=>String.fromCodePoint(t)).join("");return btoa(e)}/*! @azure/msal-browser v4.8.0 2025-03-20 */function Mt(n){return new TextDecoder().decode(ho(n))}function ho(n){let e=n.replace(/-/g,"+").replace(/_/g,"/");switch(e.length%4){case 0:break;case 2:e+="==";break;case 3:e+="=";break;default:throw x(Id)}const t=atob(e);return Uint8Array.from(t,r=>r.codePointAt(0)||0)}/*! @azure/msal-browser v4.8.0 2025-03-20 */const $y="RSASSA-PKCS1-v1_5",Ho="AES-GCM",Pd="HKDF",na="SHA-256",Gy=2048,zy=new Uint8Array([1,0,1]),yc="0123456789abcdef",Cc=new Uint32Array(1),Nd="raw",Md="encrypt",xd="decrypt",jy="deriveKey",Vy="crypto_subtle_undefined",ra={name:$y,hash:na,modulusLength:Gy,publicExponent:zy};function Wy(n){if(!window)throw x(Uo);if(!window.crypto)throw x(Di);if(!n&&!window.crypto.subtle)throw x(Di,Vy)}async function Dd(n,e,t){e==null||e.addQueueMeasurement(p.Sha256Digest,t);const o=new TextEncoder().encode(n);return window.crypto.subtle.digest(na,o)}function Yy(n){return window.crypto.getRandomValues(n)}function di(){return window.crypto.getRandomValues(Cc),Cc[0]}function rt(){const n=Date.now(),e=di()*1024+(di()&1023),t=new Uint8Array(16),r=Math.trunc(e/2**30),o=e&2**30-1,i=di();t[0]=n/2**40,t[1]=n/2**32,t[2]=n/2**24,t[3]=n/2**16,t[4]=n/2**8,t[5]=n,t[6]=112|r>>>8,t[7]=r,t[8]=128|o>>>24,t[9]=o>>>16,t[10]=o>>>8,t[11]=o,t[12]=i>>>24,t[13]=i>>>16,t[14]=i>>>8,t[15]=i;let s="";for(let a=0;a<t.length;a++)s+=yc.charAt(t[a]>>>4),s+=yc.charAt(t[a]&15),(a===3||a===5||a===7||a===9)&&(s+="-");return s}async function Qy(n,e){return window.crypto.subtle.generateKey(ra,n,e)}async function ui(n){return window.crypto.subtle.exportKey(kd,n)}async function Jy(n,e,t){return window.crypto.subtle.importKey(kd,n,ra,e,t)}async function Xy(n,e){return window.crypto.subtle.sign(ra,n,e)}async function Zy(){const n=await window.crypto.subtle.generateKey({name:Ho,length:256},!0,[Md,xd]);return window.crypto.subtle.exportKey(Nd,n)}async function Tc(n){return window.crypto.subtle.importKey(Nd,n,Pd,!1,[jy])}async function Ld(n,e,t){return window.crypto.subtle.deriveKey({name:Pd,salt:e,hash:na,info:new TextEncoder().encode(t)},n,{name:Ho,length:256},!1,[Md,xd])}async function eC(n,e,t){const r=new TextEncoder().encode(e),o=window.crypto.getRandomValues(new Uint8Array(16)),i=await Ld(n,o,t),s=await window.crypto.subtle.encrypt({name:Ho,iv:new Uint8Array(12)},i,r);return{data:hn(new Uint8Array(s)),nonce:hn(o)}}async function tC(n,e,t,r){const o=ho(r),i=await Ld(n,ho(e),t),s=await window.crypto.subtle.decrypt({name:Ho,iv:new Uint8Array(12)},i,o);return new TextDecoder().decode(s)}async function Ud(n){const e=await Dd(n),t=new Uint8Array(e);return hn(t)}/*! @azure/msal-browser v4.8.0 2025-03-20 */const Fo="storage_not_supported",Hd="stubbed_public_client_application_called",oa="in_mem_redirect_unavailable";/*! @azure/msal-browser v4.8.0 2025-03-20 */const qr={[Fo]:"Given storage configuration option was not supported.",[Hd]:"Stub instance of Public Client Application was called. If using msal-react, please ensure context is not used without a provider. For more visit: aka.ms/msaljs/browser-errors",[oa]:"Redirect cannot be supported. In-memory storage was selected and storeAuthStateInCookie=false, which would cause the library to be unable to handle the incoming hash. If you would like to use the redirect API, please use session/localStorage or set storeAuthStateInCookie=true."};qr[Fo],qr[Hd],qr[oa];class ia extends ce{constructor(e,t){super(e,t),this.name="BrowserConfigurationAuthError",Object.setPrototypeOf(this,ia.prototype)}}function sa(n){return new ia(n,qr[n])}/*! @azure/msal-browser v4.8.0 2025-03-20 */function nC(n){n.location.hash="",typeof n.history.replaceState=="function"&&n.history.replaceState(null,"",`${n.location.origin}${n.location.pathname}${n.location.search}`)}function rC(n){const e=n.split("#");e.shift(),window.location.hash=e.length>0?e.join("#"):""}function aa(){return window.parent!==window}function oC(){return typeof window<"u"&&!!window.opener&&window.opener!==window&&typeof window.name=="string"&&window.name.indexOf(`${Be.POPUP_NAME_PREFIX}.`)===0}function Pt(){return typeof window<"u"&&window.location?window.location.href.split("?")[0].split("#")[0]:""}function iC(){const e=new Q(window.location.href).getUrlComponents();return`${e.Protocol}//${e.HostNameAndPort}/`}function sC(){if(Q.hashContainsKnownProperties(window.location.hash)&&aa())throw x(hd)}function aC(n){if(aa()&&!n)throw x(ld)}function cC(){if(oC())throw x(dd)}function Fd(){if(typeof window>"u")throw x(Uo)}function Bd(n){if(!n)throw x(lo)}function ca(n){Fd(),sC(),cC(),Bd(n)}function Ac(n,e){if(ca(n),aC(e.system.allowRedirectInIframe),e.cache.cacheLocation===we.MemoryStorage&&!e.cache.storeAuthStateInCookie)throw sa(oa)}function Kd(n){const e=document.createElement("link");e.rel="preconnect",e.href=new URL(n).origin,e.crossOrigin="anonymous",document.head.appendChild(e),window.setTimeout(()=>{try{document.head.removeChild(e)}catch{}},1e4)}function lC(){return rt()}/*! @azure/msal-browser v4.8.0 2025-03-20 */class uo{navigateInternal(e,t){return uo.defaultNavigateWindow(e,t)}navigateExternal(e,t){return uo.defaultNavigateWindow(e,t)}static defaultNavigateWindow(e,t){return t.noHistory?window.location.replace(e):window.location.assign(e),new Promise(r=>{setTimeout(()=>{r(!0)},t.timeout)})}}/*! @azure/msal-browser v4.8.0 2025-03-20 */class hC{async sendGetRequestAsync(e,t){let r,o={},i=0;const s=Ec(t);try{r=await fetch(e,{method:pc.GET,headers:s})}catch{throw x(window.navigator.onLine?md:co)}o=wc(r.headers);try{return i=r.status,{headers:o,body:await r.json(),status:i}}catch{throw hc(x(Li),i,o)}}async sendPostRequestAsync(e,t){const r=t&&t.body||"",o=Ec(t);let i,s=0,a={};try{i=await fetch(e,{method:pc.POST,headers:o,body:r})}catch{throw x(window.navigator.onLine?pd:co)}a=wc(i.headers);try{return s=i.status,{headers:a,body:await i.json(),status:s}}catch{throw hc(x(Li),s,a)}}}function Ec(n){try{const e=new Headers;if(!(n&&n.headers))return e;const t=n.headers;return Object.entries(t).forEach(([r,o])=>{e.append(r,o)}),e}catch{throw x(bd)}}function wc(n){try{const e={};return n.forEach((t,r)=>{e[r]=t}),e}catch{throw x(Rd)}}/*! @azure/msal-browser v4.8.0 2025-03-20 */const dC=6e4,Hi=1e4,uC=3e4,fC=2e3;function gC({auth:n,cache:e,system:t,telemetry:r},o){const i={clientId:E.EMPTY_STRING,authority:`${E.DEFAULT_AUTHORITY}`,knownAuthorities:[],cloudDiscoveryMetadata:E.EMPTY_STRING,authorityMetadata:E.EMPTY_STRING,redirectUri:typeof window<"u"?Pt():"",postLogoutRedirectUri:E.EMPTY_STRING,navigateToLoginRequestUrl:!0,clientCapabilities:[],protocolMode:wt.AAD,OIDCOptions:{serverResponseType:yr.FRAGMENT,defaultScopes:[E.OPENID_SCOPE,E.PROFILE_SCOPE,E.OFFLINE_ACCESS_SCOPE]},azureCloudOptions:{azureCloudInstance:Rs.None,tenant:E.EMPTY_STRING},skipAuthorityMetadataCache:!1,supportsNestedAppAuth:!1,instanceAware:!1},s={cacheLocation:we.SessionStorage,temporaryCacheLocation:we.SessionStorage,storeAuthStateInCookie:!1,secureCookies:!1,cacheMigrationEnabled:!!(e&&e.cacheLocation===we.LocalStorage),claimsBasedCachingEnabled:!1},a={loggerCallback:()=>{},logLevel:le.Info,piiLoggingEnabled:!1},h={...{...Ph,loggerOptions:a,networkClient:o?new hC:Ey,navigationClient:new uo,loadFrameTimeout:0,windowHashTimeout:(t==null?void 0:t.loadFrameTimeout)||dC,iframeHashTimeout:(t==null?void 0:t.loadFrameTimeout)||Hi,navigateFrameWait:0,redirectNavigationTimeout:uC,asyncPopups:!1,allowRedirectInIframe:!1,allowPlatformBroker:!1,nativeBrokerHandshakeTimeout:(t==null?void 0:t.nativeBrokerHandshakeTimeout)||fC,pollIntervalMilliseconds:Be.DEFAULT_POLL_INTERVAL_MS},...t,loggerOptions:(t==null?void 0:t.loggerOptions)||a},l={application:{appName:E.EMPTY_STRING,appVersion:E.EMPTY_STRING},client:new Py};if((n==null?void 0:n.protocolMode)!==wt.OIDC&&(n!=null&&n.OIDCOptions)&&new Gt(h.loggerOptions).warning(JSON.stringify(te(_h))),n!=null&&n.protocolMode&&n.protocolMode!==wt.AAD&&(h!=null&&h.allowPlatformBroker))throw te(Sh);return{auth:{...i,...n,OIDCOptions:{...i.OIDCOptions,...n==null?void 0:n.OIDCOptions}},cache:{...s,...e},system:h,telemetry:{...l,...r}}}/*! @azure/msal-browser v4.8.0 2025-03-20 */const pC="@azure/msal-browser",Ar="4.8.0";/*! @azure/msal-browser v4.8.0 2025-03-20 */class la{static loggerCallback(e,t){switch(e){case le.Error:console.error(t);return;case le.Info:console.info(t);return;case le.Verbose:console.debug(t);return;case le.Warning:console.warn(t);return;default:console.log(t);return}}constructor(e){var c;this.browserEnvironment=typeof window<"u",this.config=gC(e,this.browserEnvironment);let t;try{t=window[we.SessionStorage]}catch{}const r=t==null?void 0:t.getItem(Ky),o=(c=t==null?void 0:t.getItem(qy))==null?void 0:c.toLowerCase(),i=o==="true"?!0:o==="false"?!1:void 0,s={...this.config.system.loggerOptions},a=r&&Object.keys(le).includes(r)?le[r]:void 0;a&&(s.loggerCallback=la.loggerCallback,s.logLevel=a),i!==void 0&&(s.piiLoggingEnabled=i),this.logger=new Gt(s,pC,Ar),this.available=!1}getConfig(){return this.config}getLogger(){return this.logger}isAvailable(){return this.available}isBrowserEnvironment(){return this.browserEnvironment}}/*! @azure/msal-browser v4.8.0 2025-03-20 */class dn extends la{getModuleName(){return dn.MODULE_NAME}getId(){return dn.ID}async initialize(){return this.available=typeof window<"u",this.available}}dn.MODULE_NAME="";dn.ID="StandardOperatingContext";/*! @azure/msal-browser v4.8.0 2025-03-20 */class mC{constructor(){this.dbName=Ui,this.version=Hy,this.tableName=Fy,this.dbOpen=!1}async open(){return new Promise((e,t)=>{const r=window.indexedDB.open(this.dbName,this.version);r.addEventListener("upgradeneeded",o=>{o.target.result.createObjectStore(this.tableName)}),r.addEventListener("success",o=>{const i=o;this.db=i.target.result,this.dbOpen=!0,e()}),r.addEventListener("error",()=>t(x(ea)))})}closeConnection(){const e=this.db;e&&this.dbOpen&&(e.close(),this.dbOpen=!1)}async validateDbIsOpen(){if(!this.dbOpen)return this.open()}async getItem(e){return await this.validateDbIsOpen(),new Promise((t,r)=>{if(!this.db)return r(x(Cn));const s=this.db.transaction([this.tableName],"readonly").objectStore(this.tableName).get(e);s.addEventListener("success",a=>{const c=a;this.closeConnection(),t(c.target.result)}),s.addEventListener("error",a=>{this.closeConnection(),r(a)})})}async setItem(e,t){return await this.validateDbIsOpen(),new Promise((r,o)=>{if(!this.db)return o(x(Cn));const a=this.db.transaction([this.tableName],"readwrite").objectStore(this.tableName).put(t,e);a.addEventListener("success",()=>{this.closeConnection(),r()}),a.addEventListener("error",c=>{this.closeConnection(),o(c)})})}async removeItem(e){return await this.validateDbIsOpen(),new Promise((t,r)=>{if(!this.db)return r(x(Cn));const s=this.db.transaction([this.tableName],"readwrite").objectStore(this.tableName).delete(e);s.addEventListener("success",()=>{this.closeConnection(),t()}),s.addEventListener("error",a=>{this.closeConnection(),r(a)})})}async getKeys(){return await this.validateDbIsOpen(),new Promise((e,t)=>{if(!this.db)return t(x(Cn));const i=this.db.transaction([this.tableName],"readonly").objectStore(this.tableName).getAllKeys();i.addEventListener("success",s=>{const a=s;this.closeConnection(),e(a.target.result)}),i.addEventListener("error",s=>{this.closeConnection(),t(s)})})}async containsKey(e){return await this.validateDbIsOpen(),new Promise((t,r)=>{if(!this.db)return r(x(Cn));const s=this.db.transaction([this.tableName],"readonly").objectStore(this.tableName).count(e);s.addEventListener("success",a=>{const c=a;this.closeConnection(),t(c.target.result===1)}),s.addEventListener("error",a=>{this.closeConnection(),r(a)})})}async deleteDatabase(){return this.db&&this.dbOpen&&this.closeConnection(),new Promise((e,t)=>{const r=window.indexedDB.deleteDatabase(Ui),o=setTimeout(()=>t(!1),200);r.addEventListener("success",()=>(clearTimeout(o),e(!0))),r.addEventListener("blocked",()=>(clearTimeout(o),e(!0))),r.addEventListener("error",()=>(clearTimeout(o),t(!1)))})}}/*! @azure/msal-browser v4.8.0 2025-03-20 */class Bo{constructor(){this.cache=new Map}async initialize(){}getItem(e){return this.cache.get(e)||null}getUserData(e){return this.getItem(e)}setItem(e,t){this.cache.set(e,t)}async setUserData(e,t){this.setItem(e,t)}removeItem(e){this.cache.delete(e)}getKeys(){const e=[];return this.cache.forEach((t,r)=>{e.push(r)}),e}containsKey(e){return this.cache.has(e)}clear(){this.cache.clear()}}/*! @azure/msal-browser v4.8.0 2025-03-20 */class yC{constructor(e){this.inMemoryCache=new Bo,this.indexedDBCache=new mC,this.logger=e}handleDatabaseAccessError(e){if(e instanceof Tr&&e.errorCode===ea)this.logger.error("Could not access persistent storage. This may be caused by browser privacy features which block persistent storage in third-party contexts.");else throw e}async getItem(e){const t=this.inMemoryCache.getItem(e);if(!t)try{return this.logger.verbose("Queried item not found in in-memory cache, now querying persistent storage."),await this.indexedDBCache.getItem(e)}catch(r){this.handleDatabaseAccessError(r)}return t}async setItem(e,t){this.inMemoryCache.setItem(e,t);try{await this.indexedDBCache.setItem(e,t)}catch(r){this.handleDatabaseAccessError(r)}}async removeItem(e){this.inMemoryCache.removeItem(e);try{await this.indexedDBCache.removeItem(e)}catch(t){this.handleDatabaseAccessError(t)}}async getKeys(){const e=this.inMemoryCache.getKeys();if(e.length===0)try{return this.logger.verbose("In-memory cache is empty, now querying persistent storage."),await this.indexedDBCache.getKeys()}catch(t){this.handleDatabaseAccessError(t)}return e}async containsKey(e){const t=this.inMemoryCache.containsKey(e);if(!t)try{return this.logger.verbose("Key not found in in-memory cache, now querying persistent storage."),await this.indexedDBCache.containsKey(e)}catch(r){this.handleDatabaseAccessError(r)}return t}clearInMemory(){this.logger.verbose("Deleting in-memory keystore"),this.inMemoryCache.clear(),this.logger.verbose("In-memory keystore deleted")}async clearPersistent(){try{this.logger.verbose("Deleting persistent keystore");const e=await this.indexedDBCache.deleteDatabase();return e&&this.logger.verbose("Persistent keystore deleted"),e}catch(e){return this.handleDatabaseAccessError(e),!1}}}/*! @azure/msal-browser v4.8.0 2025-03-20 */class un{constructor(e,t,r){this.logger=e,Wy(r??!1),this.cache=new yC(this.logger),this.performanceClient=t}createNewGuid(){return rt()}base64Encode(e){return ta(e)}base64Decode(e){return Mt(e)}base64UrlEncode(e){return Ur(e)}encodeKid(e){return this.base64UrlEncode(JSON.stringify({kid:e}))}async getPublicKeyThumbprint(e){var l;const t=(l=this.performanceClient)==null?void 0:l.startMeasurement(p.CryptoOptsGetPublicKeyThumbprint,e.correlationId),r=await Qy(un.EXTRACTABLE,un.POP_KEY_USAGES),o=await ui(r.publicKey),i={e:o.e,kty:o.kty,n:o.n},s=_c(i),a=await this.hashString(s),c=await ui(r.privateKey),h=await Jy(c,!1,["sign"]);return await this.cache.setItem(a,{privateKey:h,publicKey:r.publicKey,requestMethod:e.resourceRequestMethod,requestUri:e.resourceRequestUri}),t&&t.end({success:!0}),a}async removeTokenBindingKey(e){return await this.cache.removeItem(e),!await this.cache.containsKey(e)}async clearKeystore(){this.cache.clearInMemory();try{return await this.cache.clearPersistent(),!0}catch(e){return e instanceof Error?this.logger.error(`Clearing keystore failed with error: ${e.message}`):this.logger.error("Clearing keystore failed with unknown error"),!1}}async signJwt(e,t,r,o){var H;const i=(H=this.performanceClient)==null?void 0:H.startMeasurement(p.CryptoOptsSignJwt,o),s=await this.cache.getItem(t);if(!s)throw x(Zs);const a=await ui(s.publicKey),c=_c(a),h=Ur(JSON.stringify({kid:t})),l=Ys.getShrHeaderString({...r==null?void 0:r.header,alg:a.alg,kid:h}),d=Ur(l);e.cnf={jwk:JSON.parse(c)};const g=Ur(JSON.stringify(e)),y=`${d}.${g}`,A=new TextEncoder().encode(y),I=await Xy(s.privateKey,A),M=hn(new Uint8Array(I)),L=`${y}.${M}`;return i&&i.end({success:!0}),L}async hashString(e){return Ud(e)}}un.POP_KEY_USAGES=["sign","verify"];un.EXTRACTABLE=!0;function _c(n){return JSON.stringify(n,Object.keys(n).sort())}/*! @azure/msal-browser v4.8.0 2025-03-20 */const CC=24*60*60*1e3,Fi={Lax:"Lax",None:"None"};class qd{initialize(){return Promise.resolve()}getItem(e){const t=`${encodeURIComponent(e)}`,r=document.cookie.split(";");for(let o=0;o<r.length;o++){const i=r[o],[s,...a]=decodeURIComponent(i).trim().split("="),c=a.join("=");if(s===t)return c}return""}getUserData(){throw S(W)}setItem(e,t,r,o=!0,i=Fi.Lax){let s=`${encodeURIComponent(e)}=${encodeURIComponent(t)};path=/;SameSite=${i};`;if(r){const a=TC(r);s+=`expires=${a};`}(o||i===Fi.None)&&(s+="Secure;"),document.cookie=s}async setUserData(){return Promise.reject(S(W))}removeItem(e){this.setItem(e,"",-1)}getKeys(){const e=document.cookie.split(";"),t=[];return e.forEach(r=>{const o=decodeURIComponent(r).trim().split("=");t.push(o[0])}),t}containsKey(e){return this.getKeys().includes(e)}}function TC(n){const e=new Date;return new Date(e.getTime()+n*CC).toUTCString()}/*! @azure/msal-browser v4.8.0 2025-03-20 */function Bi(n){const e=n.getItem(Ft.ACCOUNT_KEYS);return e?JSON.parse(e):[]}function Ki(n,e){const t=e.getItem(`${Ft.TOKEN_KEYS}.${n}`);if(t){const r=JSON.parse(t);if(r&&r.hasOwnProperty("idToken")&&r.hasOwnProperty("accessToken")&&r.hasOwnProperty("refreshToken"))return r}return{idToken:[],accessToken:[],refreshToken:[]}}/*! @azure/msal-browser v4.8.0 2025-03-20 */const Sc="msal.cache.encryption",AC="msal.broadcast.cache";class EC{constructor(e,t,r){if(!window.localStorage)throw sa(Fo);this.memoryStorage=new Bo,this.initialized=!1,this.clientId=e,this.logger=t,this.performanceClient=r,this.broadcast=new BroadcastChannel(AC)}async initialize(e){this.initialized=!0;const t=new qd,r=t.getItem(Sc);let o={key:"",id:""};if(r)try{o=JSON.parse(r)}catch{}if(o.key&&o.id){const i=xt(ho,p.Base64Decode,this.logger,this.performanceClient,e)(o.key);this.encryptionCookie={id:o.id,key:await _(Tc,p.GenerateHKDF,this.logger,this.performanceClient,e)(i)},await _(this.importExistingCache.bind(this),p.ImportExistingCache,this.logger,this.performanceClient,e)(e)}else{this.clear();const i=rt(),s=await _(Zy,p.GenerateBaseKey,this.logger,this.performanceClient,e)(),a=xt(hn,p.UrlEncodeArr,this.logger,this.performanceClient,e)(new Uint8Array(s));this.encryptionCookie={id:i,key:await _(Tc,p.GenerateHKDF,this.logger,this.performanceClient,e)(s)};const c={id:i,key:a};t.setItem(Sc,JSON.stringify(c),0,!0,Fi.None)}this.broadcast.addEventListener("message",this.updateCache.bind(this))}getItem(e){return window.localStorage.getItem(e)}getUserData(e){if(!this.initialized)throw x(lo);return this.memoryStorage.getItem(e)}setItem(e,t){window.localStorage.setItem(e,t)}async setUserData(e,t,r){if(!this.initialized||!this.encryptionCookie)throw x(lo);const{data:o,nonce:i}=await _(eC,p.Encrypt,this.logger,this.performanceClient,r)(this.encryptionCookie.key,t,this.getContext(e)),s={id:this.encryptionCookie.id,nonce:i,data:o};this.memoryStorage.setItem(e,t),this.setItem(e,JSON.stringify(s)),this.broadcast.postMessage({key:e,value:t,context:this.getContext(e)})}removeItem(e){this.memoryStorage.containsKey(e)&&(this.memoryStorage.removeItem(e),this.broadcast.postMessage({key:e,value:null,context:this.getContext(e)})),window.localStorage.removeItem(e)}getKeys(){return Object.keys(window.localStorage)}containsKey(e){return window.localStorage.hasOwnProperty(e)}clear(){this.memoryStorage.clear(),Bi(this).forEach(r=>this.removeItem(r));const t=Ki(this.clientId,this);t.idToken.forEach(r=>this.removeItem(r)),t.accessToken.forEach(r=>this.removeItem(r)),t.refreshToken.forEach(r=>this.removeItem(r)),this.getKeys().forEach(r=>{(r.startsWith(E.CACHE_PREFIX)||r.indexOf(this.clientId)!==-1)&&this.removeItem(r)})}async importExistingCache(e){if(!this.encryptionCookie)return;let t=Bi(this);t=await this.importArray(t,e),this.setItem(Ft.ACCOUNT_KEYS,JSON.stringify(t));const r=Ki(this.clientId,this);r.idToken=await this.importArray(r.idToken,e),r.accessToken=await this.importArray(r.accessToken,e),r.refreshToken=await this.importArray(r.refreshToken,e),this.setItem(`${Ft.TOKEN_KEYS}.${this.clientId}`,JSON.stringify(r))}async getItemFromEncryptedCache(e,t){if(!this.encryptionCookie)return null;const r=this.getItem(e);if(!r)return null;let o;try{o=JSON.parse(r)}catch{return null}return!o.id||!o.nonce||!o.data?(this.performanceClient.incrementFields({unencryptedCacheCount:1},t),null):o.id!==this.encryptionCookie.id?(this.performanceClient.incrementFields({encryptedCacheExpiredCount:1},t),null):_(tC,p.Decrypt,this.logger,this.performanceClient,t)(this.encryptionCookie.key,o.nonce,this.getContext(e),o.data)}async importArray(e,t){const r=[],o=[];return e.forEach(i=>{const s=this.getItemFromEncryptedCache(i,t).then(a=>{a?(this.memoryStorage.setItem(i,a),r.push(i)):this.removeItem(i)});o.push(s)}),await Promise.all(o),r}getContext(e){let t="";return e.includes(this.clientId)&&(t=this.clientId),t}updateCache(e){this.logger.trace("Updating internal cache from broadcast event");const t=this.performanceClient.startMeasurement(p.LocalStorageUpdated);t.add({isBackground:!0});const{key:r,value:o,context:i}=e.data;if(!r){this.logger.error("Broadcast event missing key"),t.end({success:!1,errorCode:"noKey"});return}if(i&&i!==this.clientId){this.logger.trace(`Ignoring broadcast event from clientId: ${i}`),t.end({success:!1,errorCode:"contextMismatch"});return}o?(this.memoryStorage.setItem(r,o),this.logger.verbose("Updated item in internal cache")):(this.memoryStorage.removeItem(r),this.logger.verbose("Removed item from internal cache")),t.end({success:!0})}}/*! @azure/msal-browser v4.8.0 2025-03-20 */class wC{constructor(){if(!window.sessionStorage)throw sa(Fo)}async initialize(){}getItem(e){return window.sessionStorage.getItem(e)}getUserData(e){return this.getItem(e)}setItem(e,t){window.sessionStorage.setItem(e,t)}async setUserData(e,t){this.setItem(e,t)}removeItem(e){window.sessionStorage.removeItem(e)}getKeys(){return Object.keys(window.sessionStorage)}containsKey(e){return window.sessionStorage.hasOwnProperty(e)}}/*! @azure/msal-browser v4.8.0 2025-03-20 */function $d(n,e){if(!e)return null;try{return tt.parseRequestState(n,e).libraryState.meta}catch{throw S(Nn)}}/*! @azure/msal-browser v4.8.0 2025-03-20 */const B={INITIALIZE_START:"msal:initializeStart",INITIALIZE_END:"msal:initializeEnd",ACCOUNT_ADDED:"msal:accountAdded",ACCOUNT_REMOVED:"msal:accountRemoved",ACTIVE_ACCOUNT_CHANGED:"msal:activeAccountChanged",LOGIN_START:"msal:loginStart",LOGIN_SUCCESS:"msal:loginSuccess",LOGIN_FAILURE:"msal:loginFailure",ACQUIRE_TOKEN_START:"msal:acquireTokenStart",ACQUIRE_TOKEN_SUCCESS:"msal:acquireTokenSuccess",ACQUIRE_TOKEN_FAILURE:"msal:acquireTokenFailure",ACQUIRE_TOKEN_NETWORK_START:"msal:acquireTokenFromNetworkStart",SSO_SILENT_START:"msal:ssoSilentStart",SSO_SILENT_SUCCESS:"msal:ssoSilentSuccess",SSO_SILENT_FAILURE:"msal:ssoSilentFailure",ACQUIRE_TOKEN_BY_CODE_START:"msal:acquireTokenByCodeStart",ACQUIRE_TOKEN_BY_CODE_SUCCESS:"msal:acquireTokenByCodeSuccess",ACQUIRE_TOKEN_BY_CODE_FAILURE:"msal:acquireTokenByCodeFailure",HANDLE_REDIRECT_START:"msal:handleRedirectStart",HANDLE_REDIRECT_END:"msal:handleRedirectEnd",POPUP_OPENED:"msal:popupOpened",LOGOUT_START:"msal:logoutStart",LOGOUT_SUCCESS:"msal:logoutSuccess",LOGOUT_FAILURE:"msal:logoutFailure",LOGOUT_END:"msal:logoutEnd",RESTORE_FROM_BFCACHE:"msal:restoreFromBFCache"};/*! @azure/msal-browser v4.8.0 2025-03-20 */class qi extends Mi{constructor(e,t,r,o,i,s,a){super(e,r,o,a),this.cacheConfig=t,this.logger=o,this.internalStorage=new Bo,this.browserStorage=Ic(e,t.cacheLocation,o,i),this.temporaryCacheStorage=Ic(e,t.temporaryCacheLocation,o,i),this.cookieStorage=new qd,this.performanceClient=i,this.eventHandler=s}async initialize(e){await this.browserStorage.initialize(e)}validateAndParseJson(e){try{const t=JSON.parse(e);return t&&typeof t=="object"?t:null}catch{return null}}getAccount(e){this.logger.trace("BrowserCacheManager.getAccount called");const t=this.browserStorage.getUserData(e);if(!t)return this.removeAccountKeyFromMap(e),null;const r=this.validateAndParseJson(t);return!r||!Ue.isAccountEntity(r)?(this.removeAccountKeyFromMap(e),null):Mi.toObject(new Ue,r)}async setAccount(e,t){this.logger.trace("BrowserCacheManager.setAccount called");const r=e.generateAccountKey();await _(this.browserStorage.setUserData.bind(this.browserStorage),p.SetUserData,this.logger,this.performanceClient)(r,JSON.stringify(e),t);const o=this.addAccountKeyToMap(r);this.cacheConfig.cacheLocation===we.LocalStorage&&o&&this.eventHandler.emitEvent(B.ACCOUNT_ADDED,void 0,e.getAccountInfo())}getAccountKeys(){return Bi(this.browserStorage)}addAccountKeyToMap(e){this.logger.trace("BrowserCacheManager.addAccountKeyToMap called"),this.logger.tracePii(`BrowserCacheManager.addAccountKeyToMap called with key: ${e}`);const t=this.getAccountKeys();return t.indexOf(e)===-1?(t.push(e),this.browserStorage.setItem(Ft.ACCOUNT_KEYS,JSON.stringify(t)),this.logger.verbose("BrowserCacheManager.addAccountKeyToMap account key added"),!0):(this.logger.verbose("BrowserCacheManager.addAccountKeyToMap account key already exists in map"),!1)}removeAccountKeyFromMap(e){this.logger.trace("BrowserCacheManager.removeAccountKeyFromMap called"),this.logger.tracePii(`BrowserCacheManager.removeAccountKeyFromMap called with key: ${e}`);const t=this.getAccountKeys(),r=t.indexOf(e);r>-1?(t.splice(r,1),this.browserStorage.setItem(Ft.ACCOUNT_KEYS,JSON.stringify(t)),this.logger.trace("BrowserCacheManager.removeAccountKeyFromMap account key removed")):this.logger.trace("BrowserCacheManager.removeAccountKeyFromMap key not found in existing map")}async removeAccount(e){super.removeAccount(e),this.removeAccountKeyFromMap(e)}async removeAccountContext(e){await super.removeAccountContext(e),this.cacheConfig.cacheLocation===we.LocalStorage&&this.eventHandler.emitEvent(B.ACCOUNT_REMOVED,void 0,e.getAccountInfo())}removeIdToken(e){super.removeIdToken(e),this.removeTokenKey(e,G.ID_TOKEN)}async removeAccessToken(e){super.removeAccessToken(e),this.removeTokenKey(e,G.ACCESS_TOKEN)}removeRefreshToken(e){super.removeRefreshToken(e),this.removeTokenKey(e,G.REFRESH_TOKEN)}getTokenKeys(){return Ki(this.clientId,this.browserStorage)}addTokenKey(e,t){this.logger.trace("BrowserCacheManager addTokenKey called");const r=this.getTokenKeys();switch(t){case G.ID_TOKEN:r.idToken.indexOf(e)===-1&&(this.logger.info("BrowserCacheManager: addTokenKey - idToken added to map"),r.idToken.push(e));break;case G.ACCESS_TOKEN:r.accessToken.indexOf(e)===-1&&(this.logger.info("BrowserCacheManager: addTokenKey - accessToken added to map"),r.accessToken.push(e));break;case G.REFRESH_TOKEN:r.refreshToken.indexOf(e)===-1&&(this.logger.info("BrowserCacheManager: addTokenKey - refreshToken added to map"),r.refreshToken.push(e));break;default:throw this.logger.error(`BrowserCacheManager:addTokenKey - CredentialType provided invalid. CredentialType: ${t}`),S(Pi)}this.browserStorage.setItem(`${Ft.TOKEN_KEYS}.${this.clientId}`,JSON.stringify(r))}removeTokenKey(e,t){this.logger.trace("BrowserCacheManager removeTokenKey called");const r=this.getTokenKeys();switch(t){case G.ID_TOKEN:this.logger.infoPii(`BrowserCacheManager: removeTokenKey - attempting to remove idToken with key: ${e} from map`);const o=r.idToken.indexOf(e);o>-1?(this.logger.info("BrowserCacheManager: removeTokenKey - idToken removed from map"),r.idToken.splice(o,1)):this.logger.info("BrowserCacheManager: removeTokenKey - idToken does not exist in map. Either it was previously removed or it was never added.");break;case G.ACCESS_TOKEN:this.logger.infoPii(`BrowserCacheManager: removeTokenKey - attempting to remove accessToken with key: ${e} from map`);const i=r.accessToken.indexOf(e);i>-1?(this.logger.info("BrowserCacheManager: removeTokenKey - accessToken removed from map"),r.accessToken.splice(i,1)):this.logger.info("BrowserCacheManager: removeTokenKey - accessToken does not exist in map. Either it was previously removed or it was never added.");break;case G.REFRESH_TOKEN:this.logger.infoPii(`BrowserCacheManager: removeTokenKey - attempting to remove refreshToken with key: ${e} from map`);const s=r.refreshToken.indexOf(e);s>-1?(this.logger.info("BrowserCacheManager: removeTokenKey - refreshToken removed from map"),r.refreshToken.splice(s,1)):this.logger.info("BrowserCacheManager: removeTokenKey - refreshToken does not exist in map. Either it was previously removed or it was never added.");break;default:throw this.logger.error(`BrowserCacheManager:removeTokenKey - CredentialType provided invalid. CredentialType: ${t}`),S(Pi)}this.browserStorage.setItem(`${Ft.TOKEN_KEYS}.${this.clientId}`,JSON.stringify(r))}getIdTokenCredential(e){const t=this.browserStorage.getUserData(e);if(!t)return this.logger.trace("BrowserCacheManager.getIdTokenCredential: called, no cache hit"),this.removeTokenKey(e,G.ID_TOKEN),null;const r=this.validateAndParseJson(t);return!r||!Lp(r)?(this.logger.trace("BrowserCacheManager.getIdTokenCredential: called, no cache hit"),this.removeTokenKey(e,G.ID_TOKEN),null):(this.logger.trace("BrowserCacheManager.getIdTokenCredential: cache hit"),r)}async setIdTokenCredential(e,t){this.logger.trace("BrowserCacheManager.setIdTokenCredential called");const r=rr(e);await _(this.browserStorage.setUserData.bind(this.browserStorage),p.SetUserData,this.logger,this.performanceClient)(r,JSON.stringify(e),t),this.addTokenKey(r,G.ID_TOKEN)}getAccessTokenCredential(e){const t=this.browserStorage.getUserData(e);if(!t)return this.logger.trace("BrowserCacheManager.getAccessTokenCredential: called, no cache hit"),this.removeTokenKey(e,G.ACCESS_TOKEN),null;const r=this.validateAndParseJson(t);return!r||!Dp(r)?(this.logger.trace("BrowserCacheManager.getAccessTokenCredential: called, no cache hit"),this.removeTokenKey(e,G.ACCESS_TOKEN),null):(this.logger.trace("BrowserCacheManager.getAccessTokenCredential: cache hit"),r)}async setAccessTokenCredential(e,t){this.logger.trace("BrowserCacheManager.setAccessTokenCredential called");const r=rr(e);await _(this.browserStorage.setUserData.bind(this.browserStorage),p.SetUserData,this.logger,this.performanceClient)(r,JSON.stringify(e),t),this.addTokenKey(r,G.ACCESS_TOKEN)}getRefreshTokenCredential(e){const t=this.browserStorage.getUserData(e);if(!t)return this.logger.trace("BrowserCacheManager.getRefreshTokenCredential: called, no cache hit"),this.removeTokenKey(e,G.REFRESH_TOKEN),null;const r=this.validateAndParseJson(t);return!r||!Up(r)?(this.logger.trace("BrowserCacheManager.getRefreshTokenCredential: called, no cache hit"),this.removeTokenKey(e,G.REFRESH_TOKEN),null):(this.logger.trace("BrowserCacheManager.getRefreshTokenCredential: cache hit"),r)}async setRefreshTokenCredential(e,t){this.logger.trace("BrowserCacheManager.setRefreshTokenCredential called");const r=rr(e);await _(this.browserStorage.setUserData.bind(this.browserStorage),p.SetUserData,this.logger,this.performanceClient)(r,JSON.stringify(e),t),this.addTokenKey(r,G.REFRESH_TOKEN)}getAppMetadata(e){const t=this.browserStorage.getItem(e);if(!t)return this.logger.trace("BrowserCacheManager.getAppMetadata: called, no cache hit"),null;const r=this.validateAndParseJson(t);return!r||!jp(e,r)?(this.logger.trace("BrowserCacheManager.getAppMetadata: called, no cache hit"),null):(this.logger.trace("BrowserCacheManager.getAppMetadata: cache hit"),r)}setAppMetadata(e){this.logger.trace("BrowserCacheManager.setAppMetadata called");const t=zp(e);this.browserStorage.setItem(t,JSON.stringify(e))}getServerTelemetry(e){const t=this.browserStorage.getItem(e);if(!t)return this.logger.trace("BrowserCacheManager.getServerTelemetry: called, no cache hit"),null;const r=this.validateAndParseJson(t);return!r||!$p(e,r)?(this.logger.trace("BrowserCacheManager.getServerTelemetry: called, no cache hit"),null):(this.logger.trace("BrowserCacheManager.getServerTelemetry: cache hit"),r)}setServerTelemetry(e,t){this.logger.trace("BrowserCacheManager.setServerTelemetry called"),this.browserStorage.setItem(e,JSON.stringify(t))}getAuthorityMetadata(e){const t=this.internalStorage.getItem(e);if(!t)return this.logger.trace("BrowserCacheManager.getAuthorityMetadata: called, no cache hit"),null;const r=this.validateAndParseJson(t);return r&&Vp(e,r)?(this.logger.trace("BrowserCacheManager.getAuthorityMetadata: cache hit"),r):null}getAuthorityMetadataKeys(){return this.internalStorage.getKeys().filter(t=>this.isAuthorityMetadata(t))}setWrapperMetadata(e,t){this.internalStorage.setItem(Lr.WRAPPER_SKU,e),this.internalStorage.setItem(Lr.WRAPPER_VER,t)}getWrapperMetadata(){const e=this.internalStorage.getItem(Lr.WRAPPER_SKU)||E.EMPTY_STRING,t=this.internalStorage.getItem(Lr.WRAPPER_VER)||E.EMPTY_STRING;return[e,t]}setAuthorityMetadata(e,t){this.logger.trace("BrowserCacheManager.setAuthorityMetadata called"),this.internalStorage.setItem(e,JSON.stringify(t))}getActiveAccount(){const e=this.generateCacheKey(Qa.ACTIVE_ACCOUNT_FILTERS),t=this.browserStorage.getItem(e);if(!t)return this.logger.trace("BrowserCacheManager.getActiveAccount: No active account filters found"),null;const r=this.validateAndParseJson(t);return r?(this.logger.trace("BrowserCacheManager.getActiveAccount: Active account filters schema found"),this.getAccountInfoFilteredBy({homeAccountId:r.homeAccountId,localAccountId:r.localAccountId,tenantId:r.tenantId})):(this.logger.trace("BrowserCacheManager.getActiveAccount: No active account found"),null)}setActiveAccount(e){const t=this.generateCacheKey(Qa.ACTIVE_ACCOUNT_FILTERS);if(e){this.logger.verbose("setActiveAccount: Active account set");const r={homeAccountId:e.homeAccountId,localAccountId:e.localAccountId,tenantId:e.tenantId};this.browserStorage.setItem(t,JSON.stringify(r))}else this.logger.verbose("setActiveAccount: No account passed, active account not set"),this.browserStorage.removeItem(t);this.eventHandler.emitEvent(B.ACTIVE_ACCOUNT_CHANGED)}getThrottlingCache(e){const t=this.browserStorage.getItem(e);if(!t)return this.logger.trace("BrowserCacheManager.getThrottlingCache: called, no cache hit"),null;const r=this.validateAndParseJson(t);return!r||!Gp(e,r)?(this.logger.trace("BrowserCacheManager.getThrottlingCache: called, no cache hit"),null):(this.logger.trace("BrowserCacheManager.getThrottlingCache: cache hit"),r)}setThrottlingCache(e,t){this.logger.trace("BrowserCacheManager.setThrottlingCache called"),this.browserStorage.setItem(e,JSON.stringify(t))}getTemporaryCache(e,t){const r=t?this.generateCacheKey(e):e;if(this.cacheConfig.storeAuthStateInCookie){const i=this.cookieStorage.getItem(r);if(i)return this.logger.trace("BrowserCacheManager.getTemporaryCache: storeAuthStateInCookies set to true, retrieving from cookies"),i}const o=this.temporaryCacheStorage.getItem(r);if(!o){if(this.cacheConfig.cacheLocation===we.LocalStorage){const i=this.browserStorage.getItem(r);if(i)return this.logger.trace("BrowserCacheManager.getTemporaryCache: Temporary cache item found in local storage"),i}return this.logger.trace("BrowserCacheManager.getTemporaryCache: No cache item found in local storage"),null}return this.logger.trace("BrowserCacheManager.getTemporaryCache: Temporary cache item returned"),o}setTemporaryCache(e,t,r){const o=r?this.generateCacheKey(e):e;this.temporaryCacheStorage.setItem(o,t),this.cacheConfig.storeAuthStateInCookie&&(this.logger.trace("BrowserCacheManager.setTemporaryCache: storeAuthStateInCookie set to true, setting item cookie"),this.cookieStorage.setItem(o,t,void 0,this.cacheConfig.secureCookies))}removeItem(e){this.browserStorage.removeItem(e)}removeTemporaryItem(e){this.temporaryCacheStorage.removeItem(e),this.cacheConfig.storeAuthStateInCookie&&(this.logger.trace("BrowserCacheManager.removeItem: storeAuthStateInCookie is true, clearing item cookie"),this.cookieStorage.removeItem(e))}getKeys(){return this.browserStorage.getKeys()}async clear(){await this.removeAllAccounts(),this.removeAppMetadata(),this.temporaryCacheStorage.getKeys().forEach(e=>{(e.indexOf(E.CACHE_PREFIX)!==-1||e.indexOf(this.clientId)!==-1)&&this.removeTemporaryItem(e)}),this.browserStorage.getKeys().forEach(e=>{(e.indexOf(E.CACHE_PREFIX)!==-1||e.indexOf(this.clientId)!==-1)&&this.browserStorage.removeItem(e)}),this.internalStorage.clear()}async clearTokensAndKeysWithClaims(e,t){e.addQueueMeasurement(p.ClearTokensAndKeysWithClaims,t);const r=this.getTokenKeys(),o=[];r.accessToken.forEach(i=>{const s=this.getAccessTokenCredential(i);s!=null&&s.requestedClaimsHash&&i.includes(s.requestedClaimsHash.toLowerCase())&&o.push(this.removeAccessToken(i))}),await Promise.all(o),o.length>0&&this.logger.warning(`${o.length} access tokens with claims in the cache keys have been removed from the cache.`)}generateCacheKey(e){return this.validateAndParseJson(e)?JSON.stringify(e):Et.startsWith(e,E.CACHE_PREFIX)?e:`${E.CACHE_PREFIX}.${this.clientId}.${e}`}generateAuthorityKey(e){const{libraryState:{id:t}}=tt.parseRequestState(this.cryptoImpl,e);return this.generateCacheKey(`${ee.AUTHORITY}.${t}`)}generateNonceKey(e){const{libraryState:{id:t}}=tt.parseRequestState(this.cryptoImpl,e);return this.generateCacheKey(`${ee.NONCE_IDTOKEN}.${t}`)}generateStateKey(e){const{libraryState:{id:t}}=tt.parseRequestState(this.cryptoImpl,e);return this.generateCacheKey(`${ee.REQUEST_STATE}.${t}`)}getCachedAuthority(e){const t=this.generateStateKey(e),r=this.getTemporaryCache(t);if(!r)return null;const o=this.generateAuthorityKey(r);return this.getTemporaryCache(o)}updateCacheEntries(e,t,r,o,i){this.logger.trace("BrowserCacheManager.updateCacheEntries called");const s=this.generateStateKey(e);this.setTemporaryCache(s,e,!1);const a=this.generateNonceKey(e);this.setTemporaryCache(a,t,!1);const c=this.generateAuthorityKey(e);if(this.setTemporaryCache(c,r,!1),i){const h={credential:i.homeAccountId,type:We.HOME_ACCOUNT_ID};this.setTemporaryCache(ee.CCS_CREDENTIAL,JSON.stringify(h),!0)}else if(o){const h={credential:o,type:We.UPN};this.setTemporaryCache(ee.CCS_CREDENTIAL,JSON.stringify(h),!0)}}resetRequestCache(e){this.logger.trace("BrowserCacheManager.resetRequestCache called"),e&&(this.temporaryCacheStorage.getKeys().forEach(t=>{t.indexOf(e)!==-1&&this.removeTemporaryItem(t)}),this.removeTemporaryItem(this.generateStateKey(e)),this.removeTemporaryItem(this.generateNonceKey(e)),this.removeTemporaryItem(this.generateAuthorityKey(e))),this.removeTemporaryItem(this.generateCacheKey(ee.REQUEST_PARAMS)),this.removeTemporaryItem(this.generateCacheKey(ee.ORIGIN_URI)),this.removeTemporaryItem(this.generateCacheKey(ee.URL_HASH)),this.removeTemporaryItem(this.generateCacheKey(ee.CORRELATION_ID)),this.removeTemporaryItem(this.generateCacheKey(ee.CCS_CREDENTIAL)),this.removeTemporaryItem(this.generateCacheKey(ee.NATIVE_REQUEST)),this.setInteractionInProgress(!1)}cleanRequestByState(e){if(this.logger.trace("BrowserCacheManager.cleanRequestByState called"),e){const t=this.generateStateKey(e),r=this.temporaryCacheStorage.getItem(t);this.logger.infoPii(`BrowserCacheManager.cleanRequestByState: Removing temporary cache items for state: ${r}`),this.resetRequestCache(r||E.EMPTY_STRING)}}cleanRequestByInteractionType(e){this.logger.trace("BrowserCacheManager.cleanRequestByInteractionType called"),this.temporaryCacheStorage.getKeys().forEach(t=>{if(t.indexOf(ee.REQUEST_STATE)===-1)return;const r=this.temporaryCacheStorage.getItem(t);if(!r)return;const o=$d(this.cryptoImpl,r);o&&o.interactionType===e&&(this.logger.infoPii(`BrowserCacheManager.cleanRequestByInteractionType: Removing temporary cache items for state: ${r}`),this.resetRequestCache(r))}),this.setInteractionInProgress(!1)}cacheCodeRequest(e){this.logger.trace("BrowserCacheManager.cacheCodeRequest called");const t=ta(JSON.stringify(e));this.setTemporaryCache(ee.REQUEST_PARAMS,t,!0)}getCachedRequest(e){this.logger.trace("BrowserCacheManager.getCachedRequest called");const t=this.getTemporaryCache(ee.REQUEST_PARAMS,!0);if(!t)throw x(fd);let r;try{r=JSON.parse(Mt(t))}catch(o){throw this.logger.errorPii(`Attempted to parse: ${t}`),this.logger.error(`Parsing cached token request threw with error: ${o}`),x(gd)}if(this.removeTemporaryItem(this.generateCacheKey(ee.REQUEST_PARAMS)),!r.authority){const o=this.generateAuthorityKey(e),i=this.getTemporaryCache(o);if(!i)throw x(Xs);r.authority=i}return r}getCachedNativeRequest(){this.logger.trace("BrowserCacheManager.getCachedNativeRequest called");const e=this.getTemporaryCache(ee.NATIVE_REQUEST,!0);if(!e)return this.logger.trace("BrowserCacheManager.getCachedNativeRequest: No cached native request found"),null;const t=this.validateAndParseJson(e);return t||(this.logger.error("BrowserCacheManager.getCachedNativeRequest: Unable to parse native request"),null)}isInteractionInProgress(e){const t=this.getInteractionInProgress();return e?t===this.clientId:!!t}getInteractionInProgress(){const e=`${E.CACHE_PREFIX}.${ee.INTERACTION_STATUS_KEY}`;return this.getTemporaryCache(e,!1)}setInteractionInProgress(e){const t=`${E.CACHE_PREFIX}.${ee.INTERACTION_STATUS_KEY}`;if(e){if(this.getInteractionInProgress())throw x(id);this.setTemporaryCache(t,this.clientId,!1)}else!e&&this.getInteractionInProgress()===this.clientId&&this.removeTemporaryItem(t)}async hydrateCache(e,t){var a,c,h;const r=So((a=e.account)==null?void 0:a.homeAccountId,(c=e.account)==null?void 0:c.environment,e.idToken,this.clientId,e.tenantId);let o;t.claims&&(o=await this.cryptoImpl.hashString(t.claims));const i=Io((h=e.account)==null?void 0:h.homeAccountId,e.account.environment,e.accessToken,this.clientId,e.tenantId,e.scopes.join(" "),e.expiresOn?tc(e.expiresOn):0,e.extExpiresOn?tc(e.extExpiresOn):0,Mt,void 0,e.tokenType,void 0,t.sshKid,t.claims,o),s={idToken:r,accessToken:i};return this.saveCacheRecord(s,e.correlationId)}async saveCacheRecord(e,t,r){try{await super.saveCacheRecord(e,t,r)}catch(o){if(o instanceof Rn&&this.performanceClient&&t)try{const i=this.getTokenKeys();this.performanceClient.addFields({cacheRtCount:i.refreshToken.length,cacheIdCount:i.idToken.length,cacheAtCount:i.accessToken.length},t)}catch{}throw o}}}function Ic(n,e,t,r){try{switch(e){case we.LocalStorage:return new EC(n,t,r);case we.SessionStorage:return new wC;case we.MemoryStorage:default:break}}catch(o){t.error(o)}return new Bo}const _C=(n,e,t,r)=>{const o={cacheLocation:we.MemoryStorage,temporaryCacheLocation:we.MemoryStorage,storeAuthStateInCookie:!1,secureCookies:!1,cacheMigrationEnabled:!1,claimsBasedCachingEnabled:!1};return new qi(n,o,eo,e,t,r)};/*! @azure/msal-browser v4.8.0 2025-03-20 */function SC(n,e,t,r){return n.verbose("getAllAccounts called"),t?e.getAllAccounts(r):[]}function IC(n,e,t){if(e.trace("getAccount called"),Object.keys(n).length===0)return e.warning("getAccount: No accountFilter provided"),null;const r=t.getAccountInfoFilteredBy(n);return r?(e.verbose("getAccount: Account matching provided filter found, returning"),r):(e.verbose("getAccount: No matching account found, returning null"),null)}function vC(n,e,t){if(e.trace("getAccountByUsername called"),!n)return e.warning("getAccountByUsername: No username provided"),null;const r=t.getAccountInfoFilteredBy({username:n});return r?(e.verbose("getAccountByUsername: Account matching username found, returning"),e.verbosePii(`getAccountByUsername: Returning signed-in accounts matching username: ${n}`),r):(e.verbose("getAccountByUsername: No matching account found, returning null"),null)}function bC(n,e,t){if(e.trace("getAccountByHomeId called"),!n)return e.warning("getAccountByHomeId: No homeAccountId provided"),null;const r=t.getAccountInfoFilteredBy({homeAccountId:n});return r?(e.verbose("getAccountByHomeId: Account matching homeAccountId found, returning"),e.verbosePii(`getAccountByHomeId: Returning signed-in accounts matching homeAccountId: ${n}`),r):(e.verbose("getAccountByHomeId: No matching account found, returning null"),null)}function RC(n,e,t){if(e.trace("getAccountByLocalId called"),!n)return e.warning("getAccountByLocalId: No localAccountId provided"),null;const r=t.getAccountInfoFilteredBy({localAccountId:n});return r?(e.verbose("getAccountByLocalId: Account matching localAccountId found, returning"),e.verbosePii(`getAccountByLocalId: Returning signed-in accounts matching localAccountId: ${n}`),r):(e.verbose("getAccountByLocalId: No matching account found, returning null"),null)}function kC(n,e){e.setActiveAccount(n)}function OC(n){return n.getActiveAccount()}/*! @azure/msal-browser v4.8.0 2025-03-20 */const PC="msal.broadcast.event";class NC{constructor(e){this.eventCallbacks=new Map,this.logger=e||new Gt({}),typeof BroadcastChannel<"u"&&(this.broadcastChannel=new BroadcastChannel(PC)),this.invokeCrossTabCallbacks=this.invokeCrossTabCallbacks.bind(this)}addEventCallback(e,t,r){if(typeof window<"u"){const o=r||lC();return this.eventCallbacks.has(o)?(this.logger.error(`Event callback with id: ${o} is already registered. Please provide a unique id or remove the existing callback and try again.`),null):(this.eventCallbacks.set(o,[e,t||[]]),this.logger.verbose(`Event callback registered with id: ${o}`),o)}return null}removeEventCallback(e){this.eventCallbacks.delete(e),this.logger.verbose(`Event callback ${e} removed.`)}emitEvent(e,t,r,o){var s;const i={eventType:e,interactionType:t||null,payload:r||null,error:o||null,timestamp:Date.now()};switch(e){case B.ACCOUNT_ADDED:case B.ACCOUNT_REMOVED:case B.ACTIVE_ACCOUNT_CHANGED:(s=this.broadcastChannel)==null||s.postMessage(i);break;default:this.invokeCallbacks(i);break}}invokeCallbacks(e){this.eventCallbacks.forEach(([t,r],o)=>{(r.length===0||r.includes(e.eventType))&&(this.logger.verbose(`Emitting event to callback ${o}: ${e.eventType}`),t.apply(null,[e]))})}invokeCrossTabCallbacks(e){const t=e.data;this.invokeCallbacks(t)}subscribeCrossTab(){var e;(e=this.broadcastChannel)==null||e.addEventListener("message",this.invokeCrossTabCallbacks)}unsubscribeCrossTab(){var e;(e=this.broadcastChannel)==null||e.removeEventListener("message",this.invokeCrossTabCallbacks)}}/*! @azure/msal-browser v4.8.0 2025-03-20 */class Gd{constructor(e,t,r,o,i,s,a,c,h){this.config=e,this.browserStorage=t,this.browserCrypto=r,this.networkClient=this.config.system.networkClient,this.eventHandler=i,this.navigationClient=s,this.nativeMessageHandler=c,this.correlationId=h||rt(),this.logger=o.clone(Be.MSAL_SKU,Ar,this.correlationId),this.performanceClient=a}async clearCacheOnLogout(e){if(e){Ue.accountInfoIsEqual(e,this.browserStorage.getActiveAccount(),!1)&&(this.logger.verbose("Setting active account to null"),this.browserStorage.setActiveAccount(null));try{await this.browserStorage.removeAccount(Ue.generateAccountCacheKey(e)),this.logger.verbose("Cleared cache items belonging to the account provided in the logout request.")}catch{this.logger.error("Account provided in logout request was not found. Local cache unchanged.")}}else try{this.logger.verbose("No account provided in logout request, clearing all cache items.",this.correlationId),await this.browserStorage.clear(),await this.browserCrypto.clearKeystore()}catch{this.logger.error("Attempted to clear all MSAL cache items and failed. Local cache unchanged.")}}getRedirectUri(e){this.logger.verbose("getRedirectUri called");const t=e||this.config.auth.redirectUri;return Q.getAbsoluteUrl(t,Pt())}initializeServerTelemetryManager(e,t){this.logger.verbose("initializeServerTelemetryManager called");const r={clientId:this.config.auth.clientId,correlationId:this.correlationId,apiId:e,forceRefresh:t||!1,wrapperSKU:this.browserStorage.getWrapperMetadata()[0],wrapperVer:this.browserStorage.getWrapperMetadata()[1]};return new dr(r,this.browserStorage)}async getDiscoveredAuthority(e){const{account:t}=e,r=e.requestExtraQueryParameters&&e.requestExtraQueryParameters.hasOwnProperty("instance_aware")?e.requestExtraQueryParameters.instance_aware:void 0;this.performanceClient.addQueueMeasurement(p.StandardInteractionClientGetDiscoveredAuthority,this.correlationId);const o={protocolMode:this.config.auth.protocolMode,OIDCOptions:this.config.auth.OIDCOptions,knownAuthorities:this.config.auth.knownAuthorities,cloudDiscoveryMetadata:this.config.auth.cloudDiscoveryMetadata,authorityMetadata:this.config.auth.authorityMetadata,skipAuthorityMetadataCache:this.config.auth.skipAuthorityMetadataCache},i=e.requestAuthority||this.config.auth.authority,s=r!=null&&r.length?r==="true":this.config.auth.instanceAware,a=t&&s?this.config.auth.authority.replace(Q.getDomainFromUrl(i),t.environment):i,c=_e.generateAuthority(a,e.requestAzureCloudOptions||this.config.auth.azureCloudOptions),h=await _(jh,p.AuthorityFactoryCreateDiscoveredInstance,this.logger,this.performanceClient,this.correlationId)(c,this.config.system.networkClient,this.browserStorage,o,this.logger,this.correlationId,this.performanceClient);if(t&&!h.isAlias(t.environment))throw te(Ih);return h}}/*! @azure/msal-browser v4.8.0 2025-03-20 */async function ha(n,e,t,r){t.addQueueMeasurement(p.InitializeBaseRequest,n.correlationId);const o=n.authority||e.auth.authority,i=[...n&&n.scopes||[]],s={...n,correlationId:n.correlationId,authority:o,scopes:i};if(!s.authenticationScheme)s.authenticationScheme=ne.BEARER,r.verbose(`Authentication Scheme wasn't explicitly set in request, defaulting to "Bearer" request`);else{if(s.authenticationScheme===ne.SSH){if(!n.sshJwk)throw te(Ro);if(!n.sshKid)throw te(wh)}r.verbose(`Authentication Scheme set to "${s.authenticationScheme}" as configured in Auth request`)}return e.cache.claimsBasedCachingEnabled&&n.claims&&!Et.isEmptyObj(n.claims)&&(s.requestedClaimsHash=await Ud(n.claims)),s}async function MC(n,e,t,r,o){r.addQueueMeasurement(p.InitializeSilentRequest,n.correlationId);const i=await _(ha,p.InitializeBaseRequest,o,r,n.correlationId)(n,t,r,o);return{...n,...i,account:e,forceRefresh:n.forceRefresh||!1}}/*! @azure/msal-browser v4.8.0 2025-03-20 */class Ln extends Gd{initializeLogoutRequest(e){this.logger.verbose("initializeLogoutRequest called",e==null?void 0:e.correlationId);const t={correlationId:this.correlationId||rt(),...e};if(e)if(e.logoutHint)this.logger.verbose("logoutHint has already been set in logoutRequest");else if(e.account){const r=this.getLogoutHintFromIdTokenClaims(e.account);r&&(this.logger.verbose("Setting logoutHint to login_hint ID Token Claim value for the account provided"),t.logoutHint=r)}else this.logger.verbose("logoutHint was not set and account was not passed into logout request, logoutHint will not be set");else this.logger.verbose("logoutHint will not be set since no logout request was configured");return!e||e.postLogoutRedirectUri!==null?e&&e.postLogoutRedirectUri?(this.logger.verbose("Setting postLogoutRedirectUri to uri set on logout request",t.correlationId),t.postLogoutRedirectUri=Q.getAbsoluteUrl(e.postLogoutRedirectUri,Pt())):this.config.auth.postLogoutRedirectUri===null?this.logger.verbose("postLogoutRedirectUri configured as null and no uri set on request, not passing post logout redirect",t.correlationId):this.config.auth.postLogoutRedirectUri?(this.logger.verbose("Setting postLogoutRedirectUri to configured uri",t.correlationId),t.postLogoutRedirectUri=Q.getAbsoluteUrl(this.config.auth.postLogoutRedirectUri,Pt())):(this.logger.verbose("Setting postLogoutRedirectUri to current page",t.correlationId),t.postLogoutRedirectUri=Q.getAbsoluteUrl(Pt(),Pt())):this.logger.verbose("postLogoutRedirectUri passed as null, not setting post logout redirect uri",t.correlationId),t}getLogoutHintFromIdTokenClaims(e){const t=e.idTokenClaims;if(t){if(t.login_hint)return t.login_hint;this.logger.verbose("The ID Token Claims tied to the provided account do not contain a login_hint claim, logoutHint will not be added to logout request")}else this.logger.verbose("The provided account does not contain ID Token Claims, logoutHint will not be added to logout request");return null}async createAuthCodeClient(e){this.performanceClient.addQueueMeasurement(p.StandardInteractionClientCreateAuthCodeClient,this.correlationId);const t=await _(this.getClientConfiguration.bind(this),p.StandardInteractionClientGetClientConfiguration,this.logger,this.performanceClient,this.correlationId)(e);return new Qh(t,this.performanceClient)}async getClientConfiguration(e){const{serverTelemetryManager:t,requestAuthority:r,requestAzureCloudOptions:o,requestExtraQueryParameters:i,account:s}=e;this.performanceClient.addQueueMeasurement(p.StandardInteractionClientGetClientConfiguration,this.correlationId);const a=await _(this.getDiscoveredAuthority.bind(this),p.StandardInteractionClientGetDiscoveredAuthority,this.logger,this.performanceClient,this.correlationId)({requestAuthority:r,requestAzureCloudOptions:o,requestExtraQueryParameters:i,account:s}),c=this.config.system.loggerOptions;return{authOptions:{clientId:this.config.auth.clientId,authority:a,clientCapabilities:this.config.auth.clientCapabilities,redirectUri:this.config.auth.redirectUri},systemOptions:{tokenRenewalOffsetSeconds:this.config.system.tokenRenewalOffsetSeconds,preventCorsPreflight:!0},loggerOptions:{loggerCallback:c.loggerCallback,piiLoggingEnabled:c.piiLoggingEnabled,logLevel:c.logLevel,correlationId:this.correlationId},cacheOptions:{claimsBasedCachingEnabled:this.config.cache.claimsBasedCachingEnabled},cryptoInterface:this.browserCrypto,networkInterface:this.networkClient,storageInterface:this.browserStorage,serverTelemetryManager:t,libraryInfo:{sku:Be.MSAL_SKU,version:Ar,cpu:E.EMPTY_STRING,os:E.EMPTY_STRING},telemetry:this.config.telemetry}}async initializeAuthorizationRequest(e,t){this.performanceClient.addQueueMeasurement(p.StandardInteractionClientInitializeAuthorizationRequest,this.correlationId);const r=this.getRedirectUri(e.redirectUri),o={interactionType:t},i=tt.setRequestState(this.browserCrypto,e&&e.state||E.EMPTY_STRING,o),a={...await _(ha,p.InitializeBaseRequest,this.logger,this.performanceClient,this.correlationId)({...e,correlationId:this.correlationId},this.config,this.performanceClient,this.logger),redirectUri:r,state:i,nonce:e.nonce||rt(),responseMode:this.config.auth.OIDCOptions.serverResponseType};if(e.loginHint||e.sid)return a;const c=e.account||this.browserStorage.getActiveAccount();return c&&(this.logger.verbose("Setting validated request account",this.correlationId),this.logger.verbosePii(`Setting validated request account: ${c.homeAccountId}`,this.correlationId),a.account=c),a}}/*! @azure/msal-browser v4.8.0 2025-03-20 */const xC="ContentError",zd="user_switch";/*! @azure/msal-browser v4.8.0 2025-03-20 */const DC="USER_INTERACTION_REQUIRED",LC="USER_CANCEL",UC="NO_NETWORK",HC="PERSISTENT_ERROR",FC="DISABLED",BC="ACCOUNT_UNAVAILABLE";/*! @azure/msal-browser v4.8.0 2025-03-20 */const KC=-2147186943,qC={[zd]:"User attempted to switch accounts in the native broker, which is not allowed. All new accounts must sign-in through the standard web flow first, please try again."};class mt extends ce{constructor(e,t,r){super(e,t),Object.setPrototypeOf(this,mt.prototype),this.name="NativeAuthError",this.ext=r}}function Tn(n){if(n.ext&&n.ext.status&&(n.ext.status===HC||n.ext.status===FC)||n.ext&&n.ext.error&&n.ext.error===KC)return!0;switch(n.errorCode){case xC:return!0;default:return!1}}function $i(n,e,t){if(t&&t.status)switch(t.status){case BC:return xi(Vh);case DC:return new nt(n,e);case LC:return x(ln);case UC:return x(co)}return new mt(n,qC[n]||e,t)}/*! @azure/msal-browser v4.8.0 2025-03-20 */class jd extends Ln{async acquireToken(e){this.performanceClient.addQueueMeasurement(p.SilentCacheClientAcquireToken,e.correlationId);const t=this.initializeServerTelemetryManager(ae.acquireTokenSilent_silentFlow),r=await _(this.getClientConfiguration.bind(this),p.StandardInteractionClientGetClientConfiguration,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:t,requestAuthority:e.authority,requestAzureCloudOptions:e.azureCloudOptions,account:e.account}),o=new Ay(r,this.performanceClient);this.logger.verbose("Silent auth client created");try{const s=(await _(o.acquireCachedToken.bind(o),p.SilentFlowClientAcquireCachedToken,this.logger,this.performanceClient,e.correlationId)(e))[0];return this.performanceClient.addFields({fromCache:!0},e.correlationId),s}catch(i){throw i instanceof Tr&&i.errorCode===Zs&&this.logger.verbose("Signing keypair for bound access token not found. Refreshing bound access token and generating a new crypto keypair."),i}}logout(e){this.logger.verbose("logoutRedirect called");const t=this.initializeLogoutRequest(e);return this.clearCacheOnLogout(t==null?void 0:t.account)}}/*! @azure/msal-browser v4.8.0 2025-03-20 */class On extends Gd{constructor(e,t,r,o,i,s,a,c,h,l,d,g){var m;super(e,t,r,o,i,s,c,h,g),this.apiId=a,this.accountId=l,this.nativeMessageHandler=h,this.nativeStorageManager=d,this.silentCacheClient=new jd(e,this.nativeStorageManager,r,o,i,s,c,h,g);const y=this.nativeMessageHandler.getExtensionId()===An.PREFERRED_EXTENSION_ID?"chrome":(m=this.nativeMessageHandler.getExtensionId())!=null&&m.length?"unknown":void 0;this.skus=dr.makeExtraSkuString({libraryName:Be.MSAL_SKU,libraryVersion:Ar,extensionName:y,extensionVersion:this.nativeMessageHandler.getExtensionVersion()})}addRequestSKUs(e){e.extraParameters={...e.extraParameters,[$m]:this.skus}}async acquireToken(e,t){this.performanceClient.addQueueMeasurement(p.NativeInteractionClientAcquireToken,e.correlationId),this.logger.trace("NativeInteractionClient - acquireToken called.");const r=this.performanceClient.startMeasurement(p.NativeInteractionClientAcquireToken,e.correlationId),o=Je(),i=this.initializeServerTelemetryManager(this.apiId);try{const s=await this.initializeNativeRequest(e);try{const d=await this.acquireTokensFromCache(this.accountId,s);return r.end({success:!0,isNativeBroker:!1,fromCache:!0}),d}catch(d){if(t===Ne.AccessToken)throw this.logger.info("MSAL internal Cache does not contain tokens, return error as per cache policy"),d;this.logger.info("MSAL internal Cache does not contain tokens, proceed to make a native call")}const{...a}=s,c={method:tn.GetToken,request:a},h=await this.nativeMessageHandler.sendMessage(c),l=this.validateNativeResponse(h);return await this.handleNativeResponse(l,s,o).then(d=>(r.end({success:!0,isNativeBroker:!0,requestId:d.requestId}),i.clearNativeBrokerErrorCode(),d)).catch(d=>{throw r.end({success:!1,errorCode:d.errorCode,subErrorCode:d.subError,isNativeBroker:!0}),d})}catch(s){throw s instanceof mt&&i.setNativeBrokerErrorCode(s.errorCode),s}}createSilentCacheRequest(e,t){return{authority:e.authority,correlationId:this.correlationId,scopes:pe.fromString(e.scope).asArray(),account:t,forceRefresh:!1}}async acquireTokensFromCache(e,t){if(!e)throw this.logger.warning("NativeInteractionClient:acquireTokensFromCache - No nativeAccountId provided"),S(ki);const r=this.browserStorage.getBaseAccountInfo({nativeAccountId:e});if(!r)throw S(ki);try{const o=this.createSilentCacheRequest(t,r),i=await this.silentCacheClient.acquireToken(o),s={...r,idTokenClaims:i==null?void 0:i.idTokenClaims,idToken:i==null?void 0:i.idToken};return{...i,account:s}}catch(o){throw o}}async acquireTokenRedirect(e,t){this.logger.trace("NativeInteractionClient - acquireTokenRedirect called.");const{...r}=e;delete r.onRedirectNavigate;const o=await this.initializeNativeRequest(r),i={method:tn.GetToken,request:o};try{const c=await this.nativeMessageHandler.sendMessage(i);this.validateNativeResponse(c)}catch(c){if(c instanceof mt&&(this.initializeServerTelemetryManager(this.apiId).setNativeBrokerErrorCode(c.errorCode),Tn(c)))throw c}this.browserStorage.setTemporaryCache(ee.NATIVE_REQUEST,JSON.stringify(o),!0);const s={apiId:ae.acquireTokenRedirect,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},a=this.config.auth.navigateToLoginRequestUrl?window.location.href:this.getRedirectUri(e.redirectUri);t.end({success:!0}),await this.navigationClient.navigateExternal(a,s)}async handleRedirectPromise(e,t){if(this.logger.trace("NativeInteractionClient - handleRedirectPromise called."),!this.browserStorage.isInteractionInProgress(!0))return this.logger.info("handleRedirectPromise called but there is no interaction in progress, returning null."),null;const r=this.browserStorage.getCachedNativeRequest();if(!r)return this.logger.verbose("NativeInteractionClient - handleRedirectPromise called but there is no cached request, returning null."),e&&t&&(e==null||e.addFields({errorCode:"no_cached_request"},t)),null;const{prompt:o,...i}=r;o&&this.logger.verbose("NativeInteractionClient - handleRedirectPromise called and prompt was included in the original request, removing prompt from cached request to prevent second interaction with native broker window."),this.browserStorage.removeItem(this.browserStorage.generateCacheKey(ee.NATIVE_REQUEST));const s={method:tn.GetToken,request:i},a=Je();try{this.logger.verbose("NativeInteractionClient - handleRedirectPromise sending message to native broker.");const c=await this.nativeMessageHandler.sendMessage(s);this.validateNativeResponse(c);const h=this.handleNativeResponse(c,i,a);this.browserStorage.setInteractionInProgress(!1);const l=await h;return this.initializeServerTelemetryManager(this.apiId).clearNativeBrokerErrorCode(),l}catch(c){throw this.browserStorage.setInteractionInProgress(!1),c}}logout(){return this.logger.trace("NativeInteractionClient - logout called."),Promise.reject("Logout not implemented yet")}async handleNativeResponse(e,t,r){var l,d;this.logger.trace("NativeInteractionClient - handleNativeResponse called.");const o=Dn(e.id_token,Mt),i=this.createHomeAccountIdentifier(e,o),s=(l=this.browserStorage.getAccountInfoFilteredBy({nativeAccountId:t.accountId}))==null?void 0:l.homeAccountId;if((d=t.extraParameters)!=null&&d.child_client_id&&e.account.id!==t.accountId)this.logger.info("handleNativeServerResponse: Double broker flow detected, ignoring accountId mismatch");else if(i!==s&&e.account.id!==t.accountId)throw $i(zd);const a=await this.getDiscoveredAuthority({requestAuthority:t.authority}),c=Vs(this.browserStorage,a,i,Mt,o,e.client_info,void 0,o.tid,void 0,e.account.id,this.logger);e.expires_in=Number(e.expires_in);const h=await this.generateAuthenticationResult(e,t,o,c,a.canonicalAuthority,r);return await this.cacheAccount(c),await this.cacheNativeTokens(e,t,i,o,e.access_token,h.tenantId,r),h}createHomeAccountIdentifier(e,t){return Ue.generateHomeAccountId(e.client_info||E.EMPTY_STRING,Xe.Default,this.logger,this.browserCrypto,t)}generateScopes(e,t){return e.scope?pe.fromString(e.scope):pe.fromString(t.scope)}async generatePopAccessToken(e,t){if(t.tokenType===ne.POP&&t.signPopToken){if(e.shr)return this.logger.trace("handleNativeServerResponse: SHR is enabled in native layer"),e.shr;const r=new Mn(this.browserCrypto),o={resourceRequestMethod:t.resourceRequestMethod,resourceRequestUri:t.resourceRequestUri,shrClaims:t.shrClaims,shrNonce:t.shrNonce};if(!t.keyId)throw S(Is);return r.signPopToken(e.access_token,t.keyId,o)}else return e.access_token}async generateAuthenticationResult(e,t,r,o,i,s){const a=this.addTelemetryFromNativeResponse(e),c=e.scope?pe.fromString(e.scope):pe.fromString(t.scope),h=e.account.properties||{},l=h.UID||r.oid||r.sub||E.EMPTY_STRING,d=h.TenantId||r.tid||E.EMPTY_STRING,g=Ms(o.getAccountInfo(),void 0,r,e.id_token);g.nativeAccountId!==e.account.id&&(g.nativeAccountId=e.account.id);const y=await this.generatePopAccessToken(e,t),m=t.tokenType===ne.POP?ne.POP:ne.BEARER;return{authority:i,uniqueId:l,tenantId:d,scopes:c.asArray(),account:g,idToken:e.id_token,idTokenClaims:r,accessToken:y,fromCache:a?this.isResponseFromCache(a):!1,expiresOn:vn(s+e.expires_in),tokenType:m,correlationId:this.correlationId,state:e.state,fromNativeBroker:!0}}async cacheAccount(e){await this.browserStorage.setAccount(e,this.correlationId),this.browserStorage.removeAccountContext(e).catch(t=>{this.logger.error(`Error occurred while removing account context from browser storage. ${t}`)})}cacheNativeTokens(e,t,r,o,i,s,a){const c=So(r,t.authority,e.id_token||"",t.clientId,o.tid||""),h=t.tokenType===ne.POP?E.SHR_NONCE_VALIDITY:(typeof e.expires_in=="string"?parseInt(e.expires_in,10):e.expires_in)||0,l=a+h,d=this.generateScopes(e,t),g=Io(r,t.authority,i,t.clientId,o.tid||s,d.printScopes(),l,0,Mt,void 0,t.tokenType,void 0,t.keyId),y={idToken:c,accessToken:g};return this.nativeStorageManager.saveCacheRecord(y,this.correlationId,t.storeInCache)}addTelemetryFromNativeResponse(e){const t=this.getMATSFromResponse(e);return t?(this.performanceClient.addFields({extensionId:this.nativeMessageHandler.getExtensionId(),extensionVersion:this.nativeMessageHandler.getExtensionVersion(),matsBrokerVersion:t.broker_version,matsAccountJoinOnStart:t.account_join_on_start,matsAccountJoinOnEnd:t.account_join_on_end,matsDeviceJoin:t.device_join,matsPromptBehavior:t.prompt_behavior,matsApiErrorCode:t.api_error_code,matsUiVisible:t.ui_visible,matsSilentCode:t.silent_code,matsSilentBiSubCode:t.silent_bi_sub_code,matsSilentMessage:t.silent_message,matsSilentStatus:t.silent_status,matsHttpStatus:t.http_status,matsHttpEventCount:t.http_event_count},this.correlationId),t):null}validateNativeResponse(e){if(e.hasOwnProperty("access_token")&&e.hasOwnProperty("id_token")&&e.hasOwnProperty("client_info")&&e.hasOwnProperty("account")&&e.hasOwnProperty("scope")&&e.hasOwnProperty("expires_in"))return e;throw zl(Ts,"Response missing expected properties.")}getMATSFromResponse(e){if(e.properties.MATS)try{return JSON.parse(e.properties.MATS)}catch{this.logger.error("NativeInteractionClient - Error parsing MATS telemetry, returning null instead")}return null}isResponseFromCache(e){return typeof e.is_cached>"u"?(this.logger.verbose("NativeInteractionClient - MATS telemetry does not contain field indicating if response was served from cache. Returning false."),!1):!!e.is_cached}async initializeNativeRequest(e){this.logger.trace("NativeInteractionClient - initializeNativeRequest called");const t=e.authority||this.config.auth.authority;e.account&&await this.getDiscoveredAuthority({requestAuthority:t,requestAzureCloudOptions:e.azureCloudOptions,account:e.account});const r=new Q(t);r.validateAsUri();const{scopes:o,...i}=e,s=new pe(o||[]);s.appendScopes(mr);const a=()=>{switch(this.apiId){case ae.ssoSilent:case ae.acquireTokenSilent_silentFlow:return this.logger.trace("initializeNativeRequest: silent request sets prompt to none"),Te.NONE}if(!e.prompt){this.logger.trace("initializeNativeRequest: prompt was not provided");return}switch(e.prompt){case Te.NONE:case Te.CONSENT:case Te.LOGIN:return this.logger.trace("initializeNativeRequest: prompt is compatible with native flow"),e.prompt;default:throw this.logger.trace(`initializeNativeRequest: prompt = ${e.prompt} is not compatible with native flow`),x(Sd)}},c={...i,accountId:this.accountId,clientId:this.config.auth.clientId,authority:r.urlString,scope:s.printScopes(),redirectUri:this.getRedirectUri(e.redirectUri),prompt:a(),correlationId:this.correlationId,tokenType:e.authenticationScheme,windowTitleSubstring:document.title,extraParameters:{...e.extraQueryParameters,...e.tokenQueryParameters},extendedExpiryToken:!1,keyId:e.popKid};if(c.signPopToken&&e.popKid)throw x(vd);if(this.handleExtraBrokerParams(c),c.extraParameters=c.extraParameters||{},c.extraParameters.telemetry=An.MATS_TELEMETRY,e.authenticationScheme===ne.POP){const h={resourceRequestUri:e.resourceRequestUri,resourceRequestMethod:e.resourceRequestMethod,shrClaims:e.shrClaims,shrNonce:e.shrNonce},l=new Mn(this.browserCrypto);let d;if(c.keyId)d=this.browserCrypto.base64UrlEncode(JSON.stringify({kid:c.keyId})),c.signPopToken=!1;else{const g=await _(l.generateCnf.bind(l),p.PopTokenGenerateCnf,this.logger,this.performanceClient,e.correlationId)(h,this.logger);d=g.reqCnfString,c.keyId=g.kid,c.signPopToken=!0}c.reqCnf=d}return this.addRequestSKUs(c),c}handleExtraBrokerParams(e){var i;const t=e.extraParameters&&e.extraParameters.hasOwnProperty(oo)&&e.extraParameters.hasOwnProperty(io)&&e.extraParameters.hasOwnProperty(cn);if(!e.embeddedClientId&&!t)return;let r="";const o=e.redirectUri;e.embeddedClientId?(e.redirectUri=this.config.auth.redirectUri,r=e.embeddedClientId):e.extraParameters&&(e.redirectUri=e.extraParameters[io],r=e.extraParameters[cn]),e.extraParameters={child_client_id:r,child_redirect_uri:o},(i=this.performanceClient)==null||i.addFields({embeddedClientId:r,embeddedRedirectUri:o},e.correlationId)}}/*! @azure/msal-browser v4.8.0 2025-03-20 */class Ct{constructor(e,t,r,o){this.logger=e,this.handshakeTimeoutMs=t,this.extensionId=o,this.resolvers=new Map,this.handshakeResolvers=new Map,this.messageChannel=new MessageChannel,this.windowListener=this.onWindowMessage.bind(this),this.performanceClient=r,this.handshakeEvent=r.startMeasurement(p.NativeMessageHandlerHandshake)}async sendMessage(e){this.logger.trace("NativeMessageHandler - sendMessage called.");const t={channel:An.CHANNEL_ID,extensionId:this.extensionId,responseId:rt(),body:e};return this.logger.trace("NativeMessageHandler - Sending request to browser extension"),this.logger.tracePii(`NativeMessageHandler - Sending request to browser extension: ${JSON.stringify(t)}`),this.messageChannel.port1.postMessage(t),new Promise((r,o)=>{this.resolvers.set(t.responseId,{resolve:r,reject:o})})}static async createProvider(e,t,r){e.trace("NativeMessageHandler - createProvider called.");try{const o=new Ct(e,t,r,An.PREFERRED_EXTENSION_ID);return await o.sendHandshakeRequest(),o}catch{const i=new Ct(e,t,r);return await i.sendHandshakeRequest(),i}}async sendHandshakeRequest(){this.logger.trace("NativeMessageHandler - sendHandshakeRequest called."),window.addEventListener("message",this.windowListener,!1);const e={channel:An.CHANNEL_ID,extensionId:this.extensionId,responseId:rt(),body:{method:tn.HandshakeRequest}};return this.handshakeEvent.add({extensionId:this.extensionId,extensionHandshakeTimeoutMs:this.handshakeTimeoutMs}),this.messageChannel.port1.onmessage=t=>{this.onChannelMessage(t)},window.postMessage(e,window.origin,[this.messageChannel.port2]),new Promise((t,r)=>{this.handshakeResolvers.set(e.responseId,{resolve:t,reject:r}),this.timeoutId=window.setTimeout(()=>{window.removeEventListener("message",this.windowListener,!1),this.messageChannel.port1.close(),this.messageChannel.port2.close(),this.handshakeEvent.end({extensionHandshakeTimedOut:!0,success:!1}),r(x(wd)),this.handshakeResolvers.delete(e.responseId)},this.handshakeTimeoutMs)})}onWindowMessage(e){if(this.logger.trace("NativeMessageHandler - onWindowMessage called"),e.source!==window)return;const t=e.data;if(!(!t.channel||t.channel!==An.CHANNEL_ID)&&!(t.extensionId&&t.extensionId!==this.extensionId)&&t.body.method===tn.HandshakeRequest){const r=this.handshakeResolvers.get(t.responseId);if(!r){this.logger.trace(`NativeMessageHandler.onWindowMessage - resolver can't be found for request ${t.responseId}`);return}this.logger.verbose(t.extensionId?`Extension with id: ${t.extensionId} not installed`:"No extension installed"),clearTimeout(this.timeoutId),this.messageChannel.port1.close(),this.messageChannel.port2.close(),window.removeEventListener("message",this.windowListener,!1),this.handshakeEvent.end({success:!1,extensionInstalled:!1}),r.reject(x(_d))}}onChannelMessage(e){this.logger.trace("NativeMessageHandler - onChannelMessage called.");const t=e.data,r=this.resolvers.get(t.responseId),o=this.handshakeResolvers.get(t.responseId);try{const i=t.body.method;if(i===tn.Response){if(!r)return;const s=t.body.response;if(this.logger.trace("NativeMessageHandler - Received response from browser extension"),this.logger.tracePii(`NativeMessageHandler - Received response from browser extension: ${JSON.stringify(s)}`),s.status!=="Success")r.reject($i(s.code,s.description,s.ext));else if(s.result)s.result.code&&s.result.description?r.reject($i(s.result.code,s.result.description,s.result.ext)):r.resolve(s.result);else throw zl(Ts,"Event does not contain result.");this.resolvers.delete(t.responseId)}else if(i===tn.HandshakeResponse){if(!o){this.logger.trace(`NativeMessageHandler.onChannelMessage - resolver can't be found for request ${t.responseId}`);return}clearTimeout(this.timeoutId),window.removeEventListener("message",this.windowListener,!1),this.extensionId=t.extensionId,this.extensionVersion=t.body.version,this.logger.verbose(`NativeMessageHandler - Received HandshakeResponse from extension: ${this.extensionId}`),this.handshakeEvent.end({extensionInstalled:!0,success:!0}),o.resolve(),this.handshakeResolvers.delete(t.responseId)}}catch(i){this.logger.error("Error parsing response from WAM Extension"),this.logger.errorPii(`Error parsing response from WAM Extension: ${i}`),this.logger.errorPii(`Unable to parse ${e}`),r?r.reject(i):o&&o.reject(i)}}getExtensionId(){return this.extensionId}getExtensionVersion(){return this.extensionVersion}static isPlatformBrokerAvailable(e,t,r,o){if(t.trace("isPlatformBrokerAvailable called"),!e.system.allowPlatformBroker)return t.trace("isPlatformBrokerAvailable: allowPlatformBroker is not enabled, returning false"),!1;if(!r)return t.trace("isPlatformBrokerAvailable: Platform extension provider is not initialized, returning false"),!1;if(o)switch(o){case ne.BEARER:case ne.POP:return t.trace("isPlatformBrokerAvailable: authenticationScheme is supported, returning true"),!0;default:return t.trace("isPlatformBrokerAvailable: authenticationScheme is not supported, returning false"),!1}return!0}}/*! @azure/msal-browser v4.8.0 2025-03-20 */class da{constructor(e,t,r,o,i){this.authModule=e,this.browserStorage=t,this.authCodeRequest=r,this.logger=o,this.performanceClient=i}async handleCodeResponse(e,t){this.performanceClient.addQueueMeasurement(p.HandleCodeResponse,t.correlationId);let r;try{r=Jh(e,t.state)}catch(o){throw o instanceof Wt&&o.subError===ln?x(ln):o}return _(this.handleCodeResponseFromServer.bind(this),p.HandleCodeResponseFromServer,this.logger,this.performanceClient,t.correlationId)(r,t)}async handleCodeResponseFromServer(e,t,r=!0){if(this.performanceClient.addQueueMeasurement(p.HandleCodeResponseFromServer,t.correlationId),this.logger.trace("InteractionHandler.handleCodeResponseFromServer called"),this.authCodeRequest.code=e.code,e.cloud_instance_host_name&&await _(this.authModule.updateAuthority.bind(this.authModule),p.UpdateTokenEndpointAuthority,this.logger,this.performanceClient,t.correlationId)(e.cloud_instance_host_name,t.correlationId),r&&(e.nonce=t.nonce||void 0),e.state=t.state,e.client_info)this.authCodeRequest.clientInfo=e.client_info;else{const i=this.createCcsCredentials(t);i&&(this.authCodeRequest.ccsCredential=i)}return await _(this.authModule.acquireToken.bind(this.authModule),p.AuthClientAcquireToken,this.logger,this.performanceClient,t.correlationId)(this.authCodeRequest,e)}createCcsCredentials(e){return e.account?{credential:e.account.homeAccountId,type:We.HOME_ACCOUNT_ID}:e.loginHint?{credential:e.loginHint,type:We.UPN}:null}}/*! @azure/msal-browser v4.8.0 2025-03-20 */function Vd(n,e,t){const r=no(n);if(!r)throw bh(n)?(t.error(`A ${e} is present in the iframe but it does not contain known properties. It's likely that the ${e} has been replaced by code running on the redirectUri page.`),t.errorPii(`The ${e} detected is: ${n}`),x(nd)):(t.error(`The request has returned to the redirectUri but a ${e} is not present. It's likely that the ${e} has been removed or the page has been redirected by code running on the redirectUri page.`),x(td));return r}function $C(n,e,t){if(!n.state)throw x(Js);const r=$d(e,n.state);if(!r)throw x(rd);if(r.interactionType!==t)throw x(od)}/*! @azure/msal-browser v4.8.0 2025-03-20 */async function GC(n,e,t,r,o){const i=wy({...n.auth,authority:e},t,r,o);if(Ks(i,{sku:Be.MSAL_SKU,version:Ar,os:"",cpu:""}),n.auth.protocolMode!==wt.OIDC&&qs(i,n.telemetry.application),t.platformBroker&&(jm(i),t.authenticationScheme===ne.POP)){const s=new un(r,o),a=new Mn(s);let c;t.popKid?c=s.encodeKid(t.popKid):c=(await _(a.generateCnf.bind(a),p.PopTokenGenerateCnf,r,o,t.correlationId)(t,r)).reqCnfString,Gs(i,c)}return ko(i,t.correlationId,o),i}async function ua(n,e,t,r,o){if(!t.codeChallenge)throw te(bo);const i=await _(GC,p.GetStandardParams,r,o,t.correlationId)(n,e,t,r,o);return Gm(i),Xm(i,t.codeChallenge,E.S256_CODE_CHALLENGE_METHOD),_y(e,i)}/*! @azure/msal-browser v4.8.0 2025-03-20 */const zC=32;async function Ko(n,e,t){n.addQueueMeasurement(p.GeneratePkceCodes,t);const r=xt(jC,p.GenerateCodeVerifier,e,n,t)(n,e,t),o=await _(VC,p.GenerateCodeChallengeFromVerifier,e,n,t)(r,n,e,t);return{verifier:r,challenge:o}}function jC(n,e,t){try{const r=new Uint8Array(zC);return xt(Yy,p.GetRandomValues,e,n,t)(r),hn(r)}catch{throw x(Qs)}}async function VC(n,e,t,r){e.addQueueMeasurement(p.GenerateCodeChallengeFromVerifier,r);try{const o=await _(Dd,p.Sha256Digest,t,e,r)(n,e,r);return hn(new Uint8Array(o))}catch{throw x(Qs)}}/*! @azure/msal-browser v4.8.0 2025-03-20 */class WC extends Ln{constructor(e,t,r,o,i,s,a,c,h,l){super(e,t,r,o,i,s,a,h,l),this.unloadWindow=this.unloadWindow.bind(this),this.nativeStorage=c}acquireToken(e,t){try{const o={popupName:this.generatePopupName(e.scopes||mr,e.authority||this.config.auth.authority),popupWindowAttributes:e.popupWindowAttributes||{},popupWindowParent:e.popupWindowParent??window};return this.performanceClient.addFields({isAsyncPopup:this.config.system.asyncPopups},this.correlationId),this.config.system.asyncPopups?(this.logger.verbose("asyncPopups set to true, acquiring token"),this.acquireTokenPopupAsync(e,o,t)):(this.logger.verbose("asyncPopup set to false, opening popup before acquiring token"),o.popup=this.openSizedPopup("about:blank",o),this.acquireTokenPopupAsync(e,o,t))}catch(r){return Promise.reject(r)}}logout(e){try{this.logger.verbose("logoutPopup called");const t=this.initializeLogoutRequest(e),r={popupName:this.generateLogoutPopupName(t),popupWindowAttributes:(e==null?void 0:e.popupWindowAttributes)||{},popupWindowParent:(e==null?void 0:e.popupWindowParent)??window},o=e&&e.authority,i=e&&e.mainWindowRedirectUri;return this.config.system.asyncPopups?(this.logger.verbose("asyncPopups set to true"),this.logoutPopupAsync(t,r,o,i)):(this.logger.verbose("asyncPopup set to false, opening popup"),r.popup=this.openSizedPopup("about:blank",r),this.logoutPopupAsync(t,r,o,i))}catch(t){return Promise.reject(t)}}async acquireTokenPopupAsync(e,t,r){var a;this.logger.verbose("acquireTokenPopupAsync called");const o=this.initializeServerTelemetryManager(ae.acquireTokenPopup),i=await _(this.initializeAuthorizationRequest.bind(this),p.StandardInteractionClientInitializeAuthorizationRequest,this.logger,this.performanceClient,this.correlationId)(e,U.Popup),s=r||await _(Ko,p.GeneratePkceCodes,this.logger,this.performanceClient,this.correlationId)(this.performanceClient,this.logger,this.correlationId);i.codeChallenge=s.challenge,t.popup&&Kd(i.authority);try{const c=await _(this.createAuthCodeClient.bind(this),p.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:o,requestAuthority:i.authority,requestAzureCloudOptions:i.azureCloudOptions,requestExtraQueryParameters:i.extraQueryParameters,account:i.account}),h=Ct.isPlatformBrokerAvailable(this.config,this.logger,this.nativeMessageHandler,e.authenticationScheme);let l;h&&(l=this.performanceClient.startMeasurement(p.FetchAccountIdWithNativeBroker,e.correlationId));const d=await _(ua,p.GetAuthCodeUrl,this.logger,this.performanceClient,i.correlationId)(this.config,c.authority,{...i,platformBroker:h},this.logger,this.performanceClient),g=this.initiateAuthRequest(d,t);this.eventHandler.emitEvent(B.POPUP_OPENED,U.Popup,{popupWindow:g},null);const y=await this.monitorPopupForHash(g,t.popupWindowParent),m=xt(Vd,p.DeserializeResponse,this.logger,this.performanceClient,this.correlationId)(y,this.config.auth.OIDCOptions.serverResponseType,this.logger);if(pt.removeThrottle(this.browserStorage,this.config.auth.clientId,i),m.accountId){if(this.logger.verbose("Account id found in hash, calling WAM for token"),l&&l.end({success:!0,isNativeBroker:!0}),!this.nativeMessageHandler)throw x(Cr);const L=new On(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,ae.acquireTokenPopup,this.performanceClient,this.nativeMessageHandler,m.accountId,this.nativeStorage,i.correlationId),{userRequestState:H}=tt.parseRequestState(this.browserCrypto,i.state);return await L.acquireToken({...i,state:H,prompt:void 0})}const A={...i,code:m.code||"",codeVerifier:s.verifier};return await new da(c,this.browserStorage,A,this.logger,this.performanceClient).handleCodeResponse(m,i)}catch(c){throw(a=t.popup)==null||a.close(),c instanceof ce&&(c.setCorrelationId(this.correlationId),o.cacheFailedRequest(c)),c}}async logoutPopupAsync(e,t,r,o){var s,a,c,h;this.logger.verbose("logoutPopupAsync called"),this.eventHandler.emitEvent(B.LOGOUT_START,U.Popup,e);const i=this.initializeServerTelemetryManager(ae.logoutPopup);try{await this.clearCacheOnLogout(e.account);const l=await _(this.createAuthCodeClient.bind(this),p.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:i,requestAuthority:r,account:e.account||void 0});try{l.authority.endSessionEndpoint}catch{if((s=e.account)!=null&&s.homeAccountId&&e.postLogoutRedirectUri&&l.authority.protocolMode===wt.OIDC){if(this.browserStorage.removeAccount((a=e.account)==null?void 0:a.homeAccountId),this.eventHandler.emitEvent(B.LOGOUT_SUCCESS,U.Popup,e),o){const y={apiId:ae.logoutPopup,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},m=Q.getAbsoluteUrl(o,Pt());await this.navigationClient.navigateInternal(m,y)}(c=t.popup)==null||c.close();return}}const d=l.getLogoutUri(e);this.eventHandler.emitEvent(B.LOGOUT_SUCCESS,U.Popup,e);const g=this.openPopup(d,t);if(this.eventHandler.emitEvent(B.POPUP_OPENED,U.Popup,{popupWindow:g},null),await this.monitorPopupForHash(g,t.popupWindowParent).catch(()=>{}),o){const y={apiId:ae.logoutPopup,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},m=Q.getAbsoluteUrl(o,Pt());this.logger.verbose("Redirecting main window to url specified in the request"),this.logger.verbosePii(`Redirecting main window to: ${m}`),await this.navigationClient.navigateInternal(m,y)}else this.logger.verbose("No main window navigation requested")}catch(l){throw(h=t.popup)==null||h.close(),l instanceof ce&&(l.setCorrelationId(this.correlationId),i.cacheFailedRequest(l)),this.browserStorage.setInteractionInProgress(!1),this.eventHandler.emitEvent(B.LOGOUT_FAILURE,U.Popup,null,l),this.eventHandler.emitEvent(B.LOGOUT_END,U.Popup),l}this.eventHandler.emitEvent(B.LOGOUT_END,U.Popup)}initiateAuthRequest(e,t){if(e)return this.logger.infoPii(`Navigate to: ${e}`),this.openPopup(e,t);throw this.logger.error("Navigate url is empty"),x(Do)}monitorPopupForHash(e,t){return new Promise((r,o)=>{this.logger.verbose("PopupHandler.monitorPopupForHash - polling started");const i=setInterval(()=>{if(e.closed){this.logger.error("PopupHandler.monitorPopupForHash - window closed"),clearInterval(i),o(x(ln));return}let s="";try{s=e.location.href}catch{}if(!s||s==="about:blank")return;clearInterval(i);let a="";const c=this.config.auth.OIDCOptions.serverResponseType;e&&(c===yr.QUERY?a=e.location.search:a=e.location.hash),this.logger.verbose("PopupHandler.monitorPopupForHash - popup window is on same origin as caller"),r(a)},this.config.system.pollIntervalMilliseconds)}).finally(()=>{this.cleanPopup(e,t)})}openPopup(e,t){try{let r;if(t.popup?(r=t.popup,this.logger.verbosePii(`Navigating popup window to: ${e}`),r.location.assign(e)):typeof t.popup>"u"&&(this.logger.verbosePii(`Opening popup window to: ${e}`),r=this.openSizedPopup(e,t)),!r)throw x(ad);return r.focus&&r.focus(),this.currentWindow=r,t.popupWindowParent.addEventListener("beforeunload",this.unloadWindow),r}catch(r){throw this.logger.error("error opening popup "+r.message),this.browserStorage.setInteractionInProgress(!1),x(sd)}}openSizedPopup(e,{popupName:t,popupWindowAttributes:r,popupWindowParent:o}){var y,m,A,I;const i=o.screenLeft?o.screenLeft:o.screenX,s=o.screenTop?o.screenTop:o.screenY,a=o.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,c=o.innerHeight||document.documentElement.clientHeight||document.body.clientHeight;let h=(y=r.popupSize)==null?void 0:y.width,l=(m=r.popupSize)==null?void 0:m.height,d=(A=r.popupPosition)==null?void 0:A.top,g=(I=r.popupPosition)==null?void 0:I.left;return(!h||h<0||h>a)&&(this.logger.verbose("Default popup window width used. Window width not configured or invalid."),h=Be.POPUP_WIDTH),(!l||l<0||l>c)&&(this.logger.verbose("Default popup window height used. Window height not configured or invalid."),l=Be.POPUP_HEIGHT),(!d||d<0||d>c)&&(this.logger.verbose("Default popup window top position used. Window top not configured or invalid."),d=Math.max(0,c/2-Be.POPUP_HEIGHT/2+s)),(!g||g<0||g>a)&&(this.logger.verbose("Default popup window left position used. Window left not configured or invalid."),g=Math.max(0,a/2-Be.POPUP_WIDTH/2+i)),o.open(e,t,`width=${h}, height=${l}, top=${d}, left=${g}, scrollbars=yes`)}unloadWindow(e){this.browserStorage.cleanRequestByInteractionType(U.Popup),this.currentWindow&&this.currentWindow.close(),e.preventDefault()}cleanPopup(e,t){e.close(),t.removeEventListener("beforeunload",this.unloadWindow),this.browserStorage.setInteractionInProgress(!1)}generatePopupName(e,t){return`${Be.POPUP_NAME_PREFIX}.${this.config.auth.clientId}.${e.join("-")}.${t}.${this.correlationId}`}generateLogoutPopupName(e){const t=e.account&&e.account.homeAccountId;return`${Be.POPUP_NAME_PREFIX}.${this.config.auth.clientId}.${t}.${this.correlationId}`}}/*! @azure/msal-browser v4.8.0 2025-03-20 */class vc{constructor(e,t,r,o,i){this.authModule=e,this.browserStorage=t,this.authCodeRequest=r,this.logger=o,this.performanceClient=i}async initiateAuthRequest(e,t){if(this.logger.verbose("RedirectHandler.initiateAuthRequest called"),e){t.redirectStartPage&&(this.logger.verbose("RedirectHandler.initiateAuthRequest: redirectStartPage set, caching start page"),this.browserStorage.setTemporaryCache(ee.ORIGIN_URI,t.redirectStartPage,!0)),this.browserStorage.setTemporaryCache(ee.CORRELATION_ID,this.authCodeRequest.correlationId,!0),this.browserStorage.cacheCodeRequest(this.authCodeRequest),this.logger.infoPii(`RedirectHandler.initiateAuthRequest: Navigate to: ${e}`);const r={apiId:ae.acquireTokenRedirect,timeout:t.redirectTimeout,noHistory:!1};if(typeof t.onRedirectNavigate=="function")if(this.logger.verbose("RedirectHandler.initiateAuthRequest: Invoking onRedirectNavigate callback"),t.onRedirectNavigate(e)!==!1){this.logger.verbose("RedirectHandler.initiateAuthRequest: onRedirectNavigate did not return false, navigating"),await t.navigationClient.navigateExternal(e,r);return}else{this.logger.verbose("RedirectHandler.initiateAuthRequest: onRedirectNavigate returned false, stopping navigation");return}else{this.logger.verbose("RedirectHandler.initiateAuthRequest: Navigating window to navigate url"),await t.navigationClient.navigateExternal(e,r);return}}else throw this.logger.info("RedirectHandler.initiateAuthRequest: Navigate url is empty"),x(Do)}async handleCodeResponse(e,t){this.logger.verbose("RedirectHandler.handleCodeResponse called"),this.browserStorage.setInteractionInProgress(!1);const r=this.browserStorage.generateStateKey(t),o=this.browserStorage.getTemporaryCache(r);if(!o)throw S(Zr,"Cached State");let i;try{i=Jh(e,o)}catch(h){throw h instanceof Wt&&h.subError===ln?x(ln):h}const s=this.browserStorage.generateNonceKey(o),a=this.browserStorage.getTemporaryCache(s);if(this.authCodeRequest.code=i.code,i.cloud_instance_host_name&&await _(this.authModule.updateAuthority.bind(this.authModule),p.UpdateTokenEndpointAuthority,this.logger,this.performanceClient,this.authCodeRequest.correlationId)(i.cloud_instance_host_name,this.authCodeRequest.correlationId),i.nonce=a||void 0,i.state=o,i.client_info)this.authCodeRequest.clientInfo=i.client_info;else{const h=this.checkCcsCredentials();h&&(this.authCodeRequest.ccsCredential=h)}const c=await this.authModule.acquireToken(this.authCodeRequest,i);return this.browserStorage.cleanRequestByState(t),c}checkCcsCredentials(){const e=this.browserStorage.getTemporaryCache(ee.CCS_CREDENTIAL,!0);if(e)try{return JSON.parse(e)}catch{this.authModule.logger.error("Cache credential could not be parsed"),this.authModule.logger.errorPii(`Cache credential could not be parsed: ${e}`)}return null}}/*! @azure/msal-browser v4.8.0 2025-03-20 */function YC(){if(typeof window>"u"||typeof window.performance>"u"||typeof window.performance.getEntriesByType!="function")return;const n=window.performance.getEntriesByType("navigation"),e=n.length?n[0]:void 0;return e==null?void 0:e.type}class QC extends Ln{constructor(e,t,r,o,i,s,a,c,h,l){super(e,t,r,o,i,s,a,h,l),this.nativeStorage=c}async acquireToken(e){const t=await _(this.initializeAuthorizationRequest.bind(this),p.StandardInteractionClientInitializeAuthorizationRequest,this.logger,this.performanceClient,this.correlationId)(e,U.Redirect),r=await _(Ko,p.GeneratePkceCodes,this.logger,this.performanceClient,this.correlationId)(this.performanceClient,this.logger,this.correlationId);t.codeChallenge=r.challenge,this.browserStorage.updateCacheEntries(t.state,t.nonce,t.authority,t.loginHint||"",t.account||null);const o=this.initializeServerTelemetryManager(ae.acquireTokenRedirect),i=s=>{s.persisted&&(this.logger.verbose("Page was restored from back/forward cache. Clearing temporary cache."),this.browserStorage.cleanRequestByState(t.state),this.eventHandler.emitEvent(B.RESTORE_FROM_BFCACHE,U.Redirect))};try{const s=await _(this.createAuthCodeClient.bind(this),p.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:o,requestAuthority:t.authority,requestAzureCloudOptions:t.azureCloudOptions,requestExtraQueryParameters:t.extraQueryParameters,account:t.account}),a={...t,code:"",codeVerifier:r.verifier},c=new vc(s,this.browserStorage,a,this.logger,this.performanceClient),h=await _(ua,p.GetAuthCodeUrl,this.logger,this.performanceClient,t.correlationId)(this.config,s.authority,{...t,platformBroker:Ct.isPlatformBrokerAvailable(this.config,this.logger,this.nativeMessageHandler,e.authenticationScheme)},this.logger,this.performanceClient),l=this.getRedirectStartPage(e.redirectStartPage);return this.logger.verbosePii(`Redirect start page: ${l}`),window.addEventListener("pageshow",i),await c.initiateAuthRequest(h,{navigationClient:this.navigationClient,redirectTimeout:this.config.system.redirectNavigationTimeout,redirectStartPage:l,onRedirectNavigate:e.onRedirectNavigate||this.config.auth.onRedirectNavigate})}catch(s){throw s instanceof ce&&(s.setCorrelationId(this.correlationId),o.cacheFailedRequest(s)),window.removeEventListener("pageshow",i),this.browserStorage.cleanRequestByState(t.state),s}}async handleRedirectPromise(e="",t){const r=this.initializeServerTelemetryManager(ae.handleRedirectPromise);try{if(!this.browserStorage.isInteractionInProgress(!0))return this.logger.info("handleRedirectPromise called but there is no interaction in progress, returning null."),null;const[o,i]=this.getRedirectResponse(e||"");if(!o)return this.logger.info("handleRedirectPromise did not detect a response as a result of a redirect. Cleaning temporary cache."),this.browserStorage.cleanRequestByInteractionType(U.Redirect),YC()!=="back_forward"?t.event.errorCode="no_server_response":this.logger.verbose("Back navigation event detected. Muting no_server_response error"),null;const s=this.browserStorage.getTemporaryCache(ee.ORIGIN_URI,!0)||E.EMPTY_STRING,a=Q.removeHashFromUrl(s),c=Q.removeHashFromUrl(window.location.href);if(a===c&&this.config.auth.navigateToLoginRequestUrl)return this.logger.verbose("Current page is loginRequestUrl, handling response"),s.indexOf("#")>-1&&rC(s),await this.handleResponse(o,r);if(this.config.auth.navigateToLoginRequestUrl){if(!aa()||this.config.system.allowRedirectInIframe){this.browserStorage.setTemporaryCache(ee.URL_HASH,i,!0);const h={apiId:ae.handleRedirectPromise,timeout:this.config.system.redirectNavigationTimeout,noHistory:!0};let l=!0;if(!s||s==="null"){const d=iC();this.browserStorage.setTemporaryCache(ee.ORIGIN_URI,d,!0),this.logger.warning("Unable to get valid login request url from cache, redirecting to home page"),l=await this.navigationClient.navigateInternal(d,h)}else this.logger.verbose(`Navigating to loginRequestUrl: ${s}`),l=await this.navigationClient.navigateInternal(s,h);if(!l)return await this.handleResponse(o,r)}}else return this.logger.verbose("NavigateToLoginRequestUrl set to false, handling response"),await this.handleResponse(o,r);return null}catch(o){throw o instanceof ce&&(o.setCorrelationId(this.correlationId),r.cacheFailedRequest(o)),this.browserStorage.cleanRequestByInteractionType(U.Redirect),o}}getRedirectResponse(e){this.logger.verbose("getRedirectResponseHash called");let t=e;t||(this.config.auth.OIDCOptions.serverResponseType===yr.QUERY?t=window.location.search:t=window.location.hash);let r=no(t);if(r){try{$C(r,this.browserCrypto,U.Redirect)}catch(i){return i instanceof ce&&this.logger.error(`Interaction type validation failed due to ${i.errorCode}: ${i.errorMessage}`),[null,""]}return nC(window),this.logger.verbose("Hash contains known properties, returning response hash"),[r,t]}const o=this.browserStorage.getTemporaryCache(ee.URL_HASH,!0);return this.browserStorage.removeItem(this.browserStorage.generateCacheKey(ee.URL_HASH)),o&&(r=no(o),r)?(this.logger.verbose("Hash does not contain known properties, returning cached hash"),[r,o]):[null,""]}async handleResponse(e,t){const r=e.state;if(!r)throw x(Js);const o=this.browserStorage.getCachedRequest(r);if(this.logger.verbose("handleResponse called, retrieved cached request"),e.accountId){if(this.logger.verbose("Account id found in hash, calling WAM for token"),!this.nativeMessageHandler)throw x(Cr);const c=new On(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,ae.acquireTokenPopup,this.performanceClient,this.nativeMessageHandler,e.accountId,this.nativeStorage,o.correlationId),{userRequestState:h}=tt.parseRequestState(this.browserCrypto,r);return c.acquireToken({...o,state:h,prompt:void 0}).finally(()=>{this.browserStorage.cleanRequestByState(r)})}const i=this.browserStorage.getCachedAuthority(r);if(!i)throw x(Xs);const s=await _(this.createAuthCodeClient.bind(this),p.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:t,requestAuthority:i});return pt.removeThrottle(this.browserStorage,this.config.auth.clientId,o),new vc(s,this.browserStorage,o,this.logger,this.performanceClient).handleCodeResponse(e,r)}async logout(e){var o,i;this.logger.verbose("logoutRedirect called");const t=this.initializeLogoutRequest(e),r=this.initializeServerTelemetryManager(ae.logout);try{this.eventHandler.emitEvent(B.LOGOUT_START,U.Redirect,e),await this.clearCacheOnLogout(t.account);const s={apiId:ae.logout,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},a=await _(this.createAuthCodeClient.bind(this),p.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:r,requestAuthority:e&&e.authority,requestExtraQueryParameters:e==null?void 0:e.extraQueryParameters,account:e&&e.account||void 0});if(a.authority.protocolMode===wt.OIDC)try{a.authority.endSessionEndpoint}catch{if((o=t.account)!=null&&o.homeAccountId){this.browserStorage.removeAccount((i=t.account)==null?void 0:i.homeAccountId),this.eventHandler.emitEvent(B.LOGOUT_SUCCESS,U.Redirect,t);return}}const c=a.getLogoutUri(t);if(this.eventHandler.emitEvent(B.LOGOUT_SUCCESS,U.Redirect,t),e&&typeof e.onRedirectNavigate=="function")if(e.onRedirectNavigate(c)!==!1){this.logger.verbose("Logout onRedirectNavigate did not return false, navigating"),this.browserStorage.getInteractionInProgress()||this.browserStorage.setInteractionInProgress(!0),await this.navigationClient.navigateExternal(c,s);return}else this.browserStorage.setInteractionInProgress(!1),this.logger.verbose("Logout onRedirectNavigate returned false, stopping navigation");else{this.browserStorage.getInteractionInProgress()||this.browserStorage.setInteractionInProgress(!0),await this.navigationClient.navigateExternal(c,s);return}}catch(s){throw s instanceof ce&&(s.setCorrelationId(this.correlationId),r.cacheFailedRequest(s)),this.eventHandler.emitEvent(B.LOGOUT_FAILURE,U.Redirect,null,s),this.eventHandler.emitEvent(B.LOGOUT_END,U.Redirect),s}this.eventHandler.emitEvent(B.LOGOUT_END,U.Redirect)}getRedirectStartPage(e){const t=e||window.location.href;return Q.getAbsoluteUrl(t,Pt())}}/*! @azure/msal-browser v4.8.0 2025-03-20 */async function JC(n,e,t,r,o){if(e.addQueueMeasurement(p.SilentHandlerInitiateAuthRequest,r),!n)throw t.info("Navigate url is empty"),x(Do);return o?_(ZC,p.SilentHandlerLoadFrame,t,e,r)(n,o,e,r):xt(eT,p.SilentHandlerLoadFrameSync,t,e,r)(n)}async function XC(n,e,t,r,o,i,s){return r.addQueueMeasurement(p.SilentHandlerMonitorIframeForHash,i),new Promise((a,c)=>{e<Hi&&o.warning(`system.loadFrameTimeout or system.iframeHashTimeout set to lower (${e}ms) than the default (${Hi}ms). This may result in timeouts.`);const h=window.setTimeout(()=>{window.clearInterval(l),c(x(cd))},e),l=window.setInterval(()=>{let d="";const g=n.contentWindow;try{d=g?g.location.href:""}catch{}if(!d||d==="about:blank")return;let y="";g&&(s===yr.QUERY?y=g.location.search:y=g.location.hash),window.clearTimeout(h),window.clearInterval(l),a(y)},t)}).finally(()=>{xt(tT,p.RemoveHiddenIframe,o,r,i)(n)})}function ZC(n,e,t,r){return t.addQueueMeasurement(p.SilentHandlerLoadFrame,r),new Promise((o,i)=>{const s=Wd();window.setTimeout(()=>{if(!s){i("Unable to load iframe");return}s.src=n,o(s)},e)})}function eT(n){const e=Wd();return e.src=n,e}function Wd(){const n=document.createElement("iframe");return n.className="msalSilentIframe",n.style.visibility="hidden",n.style.position="absolute",n.style.width=n.style.height="0",n.style.border="0",n.setAttribute("sandbox","allow-scripts allow-same-origin allow-forms"),document.body.appendChild(n),n}function tT(n){document.body===n.parentNode&&document.body.removeChild(n)}/*! @azure/msal-browser v4.8.0 2025-03-20 */class nT extends Ln{constructor(e,t,r,o,i,s,a,c,h,l,d){super(e,t,r,o,i,s,c,l,d),this.apiId=a,this.nativeStorage=h}async acquireToken(e){this.performanceClient.addQueueMeasurement(p.SilentIframeClientAcquireToken,e.correlationId),!e.loginHint&&!e.sid&&(!e.account||!e.account.username)&&this.logger.warning("No user hint provided. The authorization server may need more information to complete this request.");const t={...e};t.prompt?t.prompt!==Te.NONE&&t.prompt!==Te.NO_SESSION&&(this.logger.warning(`SilentIframeClient. Replacing invalid prompt ${t.prompt} with ${Te.NONE}`),t.prompt=Te.NONE):t.prompt=Te.NONE;const r=await _(this.initializeAuthorizationRequest.bind(this),p.StandardInteractionClientInitializeAuthorizationRequest,this.logger,this.performanceClient,e.correlationId)(t,U.Silent);Kd(r.authority);const o=this.initializeServerTelemetryManager(this.apiId);let i;try{return i=await _(this.createAuthCodeClient.bind(this),p.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,e.correlationId)({serverTelemetryManager:o,requestAuthority:r.authority,requestAzureCloudOptions:r.azureCloudOptions,requestExtraQueryParameters:r.extraQueryParameters,account:r.account}),await _(this.silentTokenHelper.bind(this),p.SilentIframeClientTokenHelper,this.logger,this.performanceClient,e.correlationId)(i,r)}catch(s){if(s instanceof ce&&(s.setCorrelationId(this.correlationId),o.cacheFailedRequest(s)),!i||!(s instanceof ce)||s.errorCode!==Be.INVALID_GRANT_ERROR)throw s;this.performanceClient.addFields({retryError:s.errorCode},this.correlationId);const a=await _(this.initializeAuthorizationRequest.bind(this),p.StandardInteractionClientInitializeAuthorizationRequest,this.logger,this.performanceClient,e.correlationId)(t,U.Silent);return await _(this.silentTokenHelper.bind(this),p.SilentIframeClientTokenHelper,this.logger,this.performanceClient,this.correlationId)(i,a)}}logout(){return Promise.reject(x(Lo))}async silentTokenHelper(e,t){const r=t.correlationId;this.performanceClient.addQueueMeasurement(p.SilentIframeClientTokenHelper,r);const o=await _(Ko,p.GeneratePkceCodes,this.logger,this.performanceClient,this.correlationId)(this.performanceClient,this.logger,this.correlationId),i={...t,codeChallenge:o.challenge},s=await _(ua,p.GetAuthCodeUrl,this.logger,this.performanceClient,r)(this.config,e.authority,{...i,platformBroker:Ct.isPlatformBrokerAvailable(this.config,this.logger,this.nativeMessageHandler,i.authenticationScheme)},this.logger,this.performanceClient),a=await _(JC,p.SilentHandlerInitiateAuthRequest,this.logger,this.performanceClient,r)(s,this.performanceClient,this.logger,r,this.config.system.navigateFrameWait),c=this.config.auth.OIDCOptions.serverResponseType,h=await _(XC,p.SilentHandlerMonitorIframeForHash,this.logger,this.performanceClient,r)(a,this.config.system.iframeHashTimeout,this.config.system.pollIntervalMilliseconds,this.performanceClient,this.logger,r,c),l=xt(Vd,p.DeserializeResponse,this.logger,this.performanceClient,this.correlationId)(h,c,this.logger);if(l.accountId){if(this.logger.verbose("Account id found in hash, calling WAM for token"),!this.nativeMessageHandler)throw x(Cr);const y=new On(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.apiId,this.performanceClient,this.nativeMessageHandler,l.accountId,this.browserStorage,r),{userRequestState:m}=tt.parseRequestState(this.browserCrypto,i.state);return _(y.acquireToken.bind(y),p.NativeInteractionClientAcquireToken,this.logger,this.performanceClient,r)({...i,state:m,prompt:i.prompt||Te.NONE})}const d={...i,code:l.code||"",codeVerifier:o.verifier},g=new da(e,this.browserStorage,d,this.logger,this.performanceClient);return _(g.handleCodeResponse.bind(g),p.HandleCodeResponse,this.logger,this.performanceClient,r)(l,i)}}/*! @azure/msal-browser v4.8.0 2025-03-20 */class rT extends Ln{async acquireToken(e){this.performanceClient.addQueueMeasurement(p.SilentRefreshClientAcquireToken,e.correlationId);const t=await _(ha,p.InitializeBaseRequest,this.logger,this.performanceClient,e.correlationId)(e,this.config,this.performanceClient,this.logger),r={...e,...t};e.redirectUri&&(r.redirectUri=this.getRedirectUri(e.redirectUri));const o=this.initializeServerTelemetryManager(ae.acquireTokenSilent_silentFlow),i=await this.createRefreshTokenClient({serverTelemetryManager:o,authorityUrl:r.authority,azureCloudOptions:r.azureCloudOptions,account:r.account});return _(i.acquireTokenByRefreshToken.bind(i),p.RefreshTokenClientAcquireTokenByRefreshToken,this.logger,this.performanceClient,e.correlationId)(r).catch(s=>{throw s.setCorrelationId(this.correlationId),o.cacheFailedRequest(s),s})}logout(){return Promise.reject(x(Lo))}async createRefreshTokenClient(e){const t=await _(this.getClientConfiguration.bind(this),p.StandardInteractionClientGetClientConfiguration,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:e.serverTelemetryManager,requestAuthority:e.authorityUrl,requestAzureCloudOptions:e.azureCloudOptions,requestExtraQueryParameters:e.extraQueryParameters,account:e.account});return new Ty(t,this.performanceClient)}}/*! @azure/msal-browser v4.8.0 2025-03-20 */class oT{constructor(e,t,r,o){this.isBrowserEnvironment=typeof window<"u",this.config=e,this.storage=t,this.logger=r,this.cryptoObj=o}async loadExternalTokens(e,t,r){if(!this.isBrowserEnvironment)throw x(Uo);const o=e.correlationId||rt(),i=t.id_token?Dn(t.id_token,Mt):void 0,s={protocolMode:this.config.auth.protocolMode,knownAuthorities:this.config.auth.knownAuthorities,cloudDiscoveryMetadata:this.config.auth.cloudDiscoveryMetadata,authorityMetadata:this.config.auth.authorityMetadata,skipAuthorityMetadataCache:this.config.auth.skipAuthorityMetadataCache},a=e.authority?new _e(_e.generateAuthority(e.authority,e.azureCloudOptions),this.config.system.networkClient,this.storage,s,this.logger,e.correlationId||rt()):void 0,c=await this.loadAccount(e,r.clientInfo||t.client_info||"",o,i,a),h=await this.loadIdToken(t,c.homeAccountId,c.environment,c.realm,o),l=await this.loadAccessToken(e,t,c.homeAccountId,c.environment,c.realm,r,o),d=await this.loadRefreshToken(t,c.homeAccountId,c.environment,o);return this.generateAuthenticationResult(e,{account:c,idToken:h,accessToken:l,refreshToken:d},i,a)}async loadAccount(e,t,r,o,i){if(this.logger.verbose("TokenCache - loading account"),e.account){const h=Ue.createFromAccountInfo(e.account);return await this.storage.setAccount(h,r),h}else if(!i||!t&&!o)throw this.logger.error("TokenCache - if an account is not provided on the request, authority and either clientInfo or idToken must be provided instead."),x(yd);const s=Ue.generateHomeAccountId(t,i.authorityType,this.logger,this.cryptoObj,o),a=o==null?void 0:o.tid,c=Vs(this.storage,i,s,Mt,o,t,i.hostnameAndPort,a,void 0,void 0,this.logger);return await this.storage.setAccount(c,r),c}async loadIdToken(e,t,r,o,i){if(!e.id_token)return this.logger.verbose("TokenCache - no id token found in response"),null;this.logger.verbose("TokenCache - loading id token");const s=So(t,r,e.id_token,this.config.auth.clientId,o);return await this.storage.setIdTokenCredential(s,i),s}async loadAccessToken(e,t,r,o,i,s,a){if(t.access_token)if(t.expires_in){if(!t.scope&&(!e.scopes||!e.scopes.length))return this.logger.error("TokenCache - scopes not specified in the request or response. Cannot add token to the cache."),null}else return this.logger.error("TokenCache - no expiration set on the access token. Cannot add it to the cache."),null;else return this.logger.verbose("TokenCache - no access token found in response"),null;this.logger.verbose("TokenCache - loading access token");const c=t.scope?pe.fromString(t.scope):new pe(e.scopes),h=s.expiresOn||t.expires_in+Je(),l=s.extendedExpiresOn||(t.ext_expires_in||t.expires_in)+Je(),d=Io(r,o,t.access_token,this.config.auth.clientId,i,c.printScopes(),h,l,Mt);return await this.storage.setAccessTokenCredential(d,a),d}async loadRefreshToken(e,t,r,o){if(!e.refresh_token)return this.logger.verbose("TokenCache - no refresh token found in response"),null;this.logger.verbose("TokenCache - loading refresh token");const i=dh(t,r,e.refresh_token,this.config.auth.clientId,e.foci,void 0,e.refresh_token_expires_in);return await this.storage.setRefreshTokenCredential(i,o),i}generateAuthenticationResult(e,t,r,o){var l,d,g;let i="",s=[],a=null,c;t!=null&&t.accessToken&&(i=t.accessToken.secret,s=pe.fromString(t.accessToken.target).asArray(),a=vn(t.accessToken.expiresOn),c=vn(t.accessToken.extendedExpiresOn));const h=t.account;return{authority:o?o.canonicalAuthority:"",uniqueId:t.account.localAccountId,tenantId:t.account.realm,scopes:s,account:h.getAccountInfo(),idToken:((l=t.idToken)==null?void 0:l.secret)||"",idTokenClaims:r||{},accessToken:i,fromCache:!0,expiresOn:a,correlationId:e.correlationId||"",requestId:"",extExpiresOn:c,familyId:((d=t.refreshToken)==null?void 0:d.familyId)||"",tokenType:((g=t==null?void 0:t.accessToken)==null?void 0:g.tokenType)||"",state:e.state||"",cloudGraphHostName:h.cloudGraphHostName||"",msGraphHost:h.msGraphHost||"",fromNativeBroker:!1}}}/*! @azure/msal-browser v4.8.0 2025-03-20 */class iT extends Qh{constructor(e){super(e),this.includeRedirectUri=!1}}/*! @azure/msal-browser v4.8.0 2025-03-20 */class sT extends Ln{constructor(e,t,r,o,i,s,a,c,h,l){super(e,t,r,o,i,s,c,h,l),this.apiId=a}async acquireToken(e){if(!e.code)throw x(Cd);const t=await _(this.initializeAuthorizationRequest.bind(this),p.StandardInteractionClientInitializeAuthorizationRequest,this.logger,this.performanceClient,e.correlationId)(e,U.Silent),r=this.initializeServerTelemetryManager(this.apiId);try{const o={...t,code:e.code},i=await _(this.getClientConfiguration.bind(this),p.StandardInteractionClientGetClientConfiguration,this.logger,this.performanceClient,e.correlationId)({serverTelemetryManager:r,requestAuthority:t.authority,requestAzureCloudOptions:t.azureCloudOptions,requestExtraQueryParameters:t.extraQueryParameters,account:t.account}),s=new iT(i);this.logger.verbose("Auth code client created");const a=new da(s,this.browserStorage,o,this.logger,this.performanceClient);return await _(a.handleCodeResponseFromServer.bind(a),p.HandleCodeResponseFromServer,this.logger,this.performanceClient,e.correlationId)({code:e.code,msgraph_host:e.msGraphHost,cloud_graph_host_name:e.cloudGraphHostName,cloud_instance_host_name:e.cloudInstanceHostName},t,!1)}catch(o){throw o instanceof ce&&(o.setCorrelationId(this.correlationId),r.cacheFailedRequest(o)),o}}logout(){return Promise.reject(x(Lo))}}/*! @azure/msal-browser v4.8.0 2025-03-20 */function dt(n){const e=n==null?void 0:n.idTokenClaims;if(e!=null&&e.tfp||e!=null&&e.acr)return"B2C";if(e!=null&&e.tid){if((e==null?void 0:e.tid)==="9188040d-6c67-4c5b-b112-36a304b66dad")return"MSA"}else return;return"AAD"}function Hr(n,e){try{ca(n)}catch(t){throw e.end({success:!1},t),t}}class qo{constructor(e){this.operatingContext=e,this.isBrowserEnvironment=this.operatingContext.isBrowserEnvironment(),this.config=e.getConfig(),this.initialized=!1,this.logger=this.operatingContext.getLogger(),this.networkClient=this.config.system.networkClient,this.navigationClient=this.config.system.navigationClient,this.redirectResponse=new Map,this.hybridAuthCodeResponses=new Map,this.performanceClient=this.config.telemetry.client,this.browserCrypto=this.isBrowserEnvironment?new un(this.logger,this.performanceClient):eo,this.eventHandler=new NC(this.logger),this.browserStorage=this.isBrowserEnvironment?new qi(this.config.auth.clientId,this.config.cache,this.browserCrypto,this.logger,this.performanceClient,this.eventHandler,ly(this.config.auth)):_C(this.config.auth.clientId,this.logger,this.performanceClient,this.eventHandler);const t={cacheLocation:we.MemoryStorage,temporaryCacheLocation:we.MemoryStorage,storeAuthStateInCookie:!1,secureCookies:!1,cacheMigrationEnabled:!1,claimsBasedCachingEnabled:!1};this.nativeInternalStorage=new qi(this.config.auth.clientId,t,this.browserCrypto,this.logger,this.performanceClient,this.eventHandler),this.tokenCache=new oT(this.config,this.browserStorage,this.logger,this.browserCrypto),this.activeSilentTokenRequests=new Map,this.trackPageVisibility=this.trackPageVisibility.bind(this),this.trackPageVisibilityWithMeasurement=this.trackPageVisibilityWithMeasurement.bind(this)}static async createController(e,t){const r=new qo(e);return await r.initialize(t),r}trackPageVisibility(e){e&&(this.logger.info("Perf: Visibility change detected"),this.performanceClient.incrementFields({visibilityChangeCount:1},e))}async initialize(e){if(this.logger.trace("initialize called"),this.initialized){this.logger.info("initialize has already been called, exiting early.");return}if(!this.isBrowserEnvironment){this.logger.info("in non-browser environment, exiting early."),this.initialized=!0,this.eventHandler.emitEvent(B.INITIALIZE_END);return}const t=(e==null?void 0:e.correlationId)||this.getRequestCorrelationId(),r=this.config.system.allowPlatformBroker,o=this.performanceClient.startMeasurement(p.InitializeClientApplication,t);if(this.eventHandler.emitEvent(B.INITIALIZE_START),await _(this.browserStorage.initialize.bind(this.browserStorage),p.InitializeCache,this.logger,this.performanceClient,t)(t),r)try{this.nativeExtensionProvider=await Ct.createProvider(this.logger,this.config.system.nativeBrokerHandshakeTimeout,this.performanceClient)}catch(i){this.logger.verbose(i)}this.config.cache.claimsBasedCachingEnabled||(this.logger.verbose("Claims-based caching is disabled. Clearing the previous cache with claims"),await _(this.browserStorage.clearTokensAndKeysWithClaims.bind(this.browserStorage),p.ClearTokensAndKeysWithClaims,this.logger,this.performanceClient,t)(this.performanceClient,t)),this.config.system.asyncPopups&&await this.preGeneratePkceCodes(t),this.initialized=!0,this.eventHandler.emitEvent(B.INITIALIZE_END),o.end({allowPlatformBroker:r,success:!0})}async handleRedirectPromise(e){if(this.logger.verbose("handleRedirectPromise called"),Bd(this.initialized),this.isBrowserEnvironment){const t=e||"";let r=this.redirectResponse.get(t);return typeof r>"u"?(r=this.handleRedirectPromiseInternal(e),this.redirectResponse.set(t,r),this.logger.verbose("handleRedirectPromise has been called for the first time, storing the promise")):this.logger.verbose("handleRedirectPromise has been called previously, returning the result from the first call"),r}return this.logger.verbose("handleRedirectPromise returns null, not browser environment"),null}async handleRedirectPromiseInternal(e){const t=this.getAllAccounts(),r=this.browserStorage.getCachedNativeRequest(),o=r&&Ct.isPlatformBrokerAvailable(this.config,this.logger,this.nativeExtensionProvider)&&this.nativeExtensionProvider&&!e,i=o?r==null?void 0:r.correlationId:this.browserStorage.getTemporaryCache(ee.CORRELATION_ID,!0)||"",s=this.performanceClient.startMeasurement(p.AcquireTokenRedirect,i);this.eventHandler.emitEvent(B.HANDLE_REDIRECT_START,U.Redirect);let a;if(o&&this.nativeExtensionProvider){this.logger.trace("handleRedirectPromise - acquiring token from native platform");const c=new On(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,ae.handleRedirectPromise,this.performanceClient,this.nativeExtensionProvider,r.accountId,this.nativeInternalStorage,r.correlationId);a=_(c.handleRedirectPromise.bind(c),p.HandleNativeRedirectPromiseMeasurement,this.logger,this.performanceClient,s.event.correlationId)(this.performanceClient,s.event.correlationId)}else{this.logger.trace("handleRedirectPromise - acquiring token from web flow");const c=this.createRedirectClient(i);a=_(c.handleRedirectPromise.bind(c),p.HandleRedirectPromiseMeasurement,this.logger,this.performanceClient,s.event.correlationId)(e,s)}return a.then(c=>(c?(t.length<this.getAllAccounts().length?(this.eventHandler.emitEvent(B.LOGIN_SUCCESS,U.Redirect,c),this.logger.verbose("handleRedirectResponse returned result, login success")):(this.eventHandler.emitEvent(B.ACQUIRE_TOKEN_SUCCESS,U.Redirect,c),this.logger.verbose("handleRedirectResponse returned result, acquire token success")),s.end({success:!0,accountType:dt(c.account)})):s.event.errorCode?s.end({success:!1}):s.discard(),this.eventHandler.emitEvent(B.HANDLE_REDIRECT_END,U.Redirect),c)).catch(c=>{const h=c;throw t.length>0?this.eventHandler.emitEvent(B.ACQUIRE_TOKEN_FAILURE,U.Redirect,null,h):this.eventHandler.emitEvent(B.LOGIN_FAILURE,U.Redirect,null,h),this.eventHandler.emitEvent(B.HANDLE_REDIRECT_END,U.Redirect),s.end({success:!1},h),c})}async acquireTokenRedirect(e){const t=this.getRequestCorrelationId(e);this.logger.verbose("acquireTokenRedirect called",t);const r=this.performanceClient.startMeasurement(p.AcquireTokenPreRedirect,t);r.add({accountType:dt(e.account),scenarioId:e.scenarioId});const o=e.onRedirectNavigate;if(o)e.onRedirectNavigate=s=>{const a=typeof o=="function"?o(s):void 0;return a!==!1?r.end({success:!0}):r.discard(),a};else{const s=this.config.auth.onRedirectNavigate;this.config.auth.onRedirectNavigate=a=>{const c=typeof s=="function"?s(a):void 0;return c!==!1?r.end({success:!0}):r.discard(),c}}const i=this.getAllAccounts().length>0;try{Ac(this.initialized,this.config),this.browserStorage.setInteractionInProgress(!0),i?this.eventHandler.emitEvent(B.ACQUIRE_TOKEN_START,U.Redirect,e):this.eventHandler.emitEvent(B.LOGIN_START,U.Redirect,e);let s;return this.nativeExtensionProvider&&this.canUsePlatformBroker(e)?s=new On(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,ae.acquireTokenRedirect,this.performanceClient,this.nativeExtensionProvider,this.getNativeAccountId(e),this.nativeInternalStorage,t).acquireTokenRedirect(e,r).catch(c=>{if(c instanceof mt&&Tn(c))return this.nativeExtensionProvider=void 0,this.createRedirectClient(t).acquireToken(e);if(c instanceof nt)return this.logger.verbose("acquireTokenRedirect - Resolving interaction required error thrown by native broker by falling back to web flow"),this.createRedirectClient(t).acquireToken(e);throw this.browserStorage.setInteractionInProgress(!1),c}):s=this.createRedirectClient(t).acquireToken(e),await s}catch(s){throw r.end({success:!1},s),i?this.eventHandler.emitEvent(B.ACQUIRE_TOKEN_FAILURE,U.Redirect,null,s):this.eventHandler.emitEvent(B.LOGIN_FAILURE,U.Redirect,null,s),s}}acquireTokenPopup(e){const t=this.getRequestCorrelationId(e),r=this.performanceClient.startMeasurement(p.AcquireTokenPopup,t);r.add({scenarioId:e.scenarioId,accountType:dt(e.account)});try{this.logger.verbose("acquireTokenPopup called",t),Hr(this.initialized,r),this.browserStorage.setInteractionInProgress(!0)}catch(a){return Promise.reject(a)}const o=this.getAllAccounts();o.length>0?this.eventHandler.emitEvent(B.ACQUIRE_TOKEN_START,U.Popup,e):this.eventHandler.emitEvent(B.LOGIN_START,U.Popup,e);let i;const s=this.getPreGeneratedPkceCodes(t);return this.canUsePlatformBroker(e)?i=this.acquireTokenNative({...e,correlationId:t},ae.acquireTokenPopup).then(a=>(this.browserStorage.setInteractionInProgress(!1),r.end({success:!0,isNativeBroker:!0,accountType:dt(a.account)}),a)).catch(a=>{if(a instanceof mt&&Tn(a))return this.nativeExtensionProvider=void 0,this.createPopupClient(t).acquireToken(e,s);if(a instanceof nt)return this.logger.verbose("acquireTokenPopup - Resolving interaction required error thrown by native broker by falling back to web flow"),this.createPopupClient(t).acquireToken(e,s);throw this.browserStorage.setInteractionInProgress(!1),a}):i=this.createPopupClient(t).acquireToken(e,s),i.then(a=>(o.length<this.getAllAccounts().length?this.eventHandler.emitEvent(B.LOGIN_SUCCESS,U.Popup,a):this.eventHandler.emitEvent(B.ACQUIRE_TOKEN_SUCCESS,U.Popup,a),r.end({success:!0,accessTokenSize:a.accessToken.length,idTokenSize:a.idToken.length,accountType:dt(a.account)}),a)).catch(a=>(o.length>0?this.eventHandler.emitEvent(B.ACQUIRE_TOKEN_FAILURE,U.Popup,null,a):this.eventHandler.emitEvent(B.LOGIN_FAILURE,U.Popup,null,a),r.end({success:!1},a),Promise.reject(a))).finally(()=>this.config.system.asyncPopups&&this.preGeneratePkceCodes(t))}trackPageVisibilityWithMeasurement(){const e=this.ssoSilentMeasurement||this.acquireTokenByCodeAsyncMeasurement;e&&(this.logger.info("Perf: Visibility change detected in ",e.event.name),e.increment({visibilityChangeCount:1}))}async ssoSilent(e){var i,s;const t=this.getRequestCorrelationId(e),r={...e,prompt:e.prompt,correlationId:t};this.ssoSilentMeasurement=this.performanceClient.startMeasurement(p.SsoSilent,t),(i=this.ssoSilentMeasurement)==null||i.add({scenarioId:e.scenarioId,accountType:dt(e.account)}),Hr(this.initialized,this.ssoSilentMeasurement),(s=this.ssoSilentMeasurement)==null||s.increment({visibilityChangeCount:0}),document.addEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement),this.logger.verbose("ssoSilent called",t),this.eventHandler.emitEvent(B.SSO_SILENT_START,U.Silent,r);let o;return this.canUsePlatformBroker(r)?o=this.acquireTokenNative(r,ae.ssoSilent).catch(a=>{if(a instanceof mt&&Tn(a))return this.nativeExtensionProvider=void 0,this.createSilentIframeClient(r.correlationId).acquireToken(r);throw a}):o=this.createSilentIframeClient(r.correlationId).acquireToken(r),o.then(a=>{var c;return this.eventHandler.emitEvent(B.SSO_SILENT_SUCCESS,U.Silent,a),(c=this.ssoSilentMeasurement)==null||c.end({success:!0,isNativeBroker:a.fromNativeBroker,accessTokenSize:a.accessToken.length,idTokenSize:a.idToken.length,accountType:dt(a.account)}),a}).catch(a=>{var c;throw this.eventHandler.emitEvent(B.SSO_SILENT_FAILURE,U.Silent,null,a),(c=this.ssoSilentMeasurement)==null||c.end({success:!1},a),a}).finally(()=>{document.removeEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement)})}async acquireTokenByCode(e){const t=this.getRequestCorrelationId(e);this.logger.trace("acquireTokenByCode called",t);const r=this.performanceClient.startMeasurement(p.AcquireTokenByCode,t);Hr(this.initialized,r),this.eventHandler.emitEvent(B.ACQUIRE_TOKEN_BY_CODE_START,U.Silent,e),r.add({scenarioId:e.scenarioId});try{if(e.code&&e.nativeAccountId)throw x(Ad);if(e.code){const o=e.code;let i=this.hybridAuthCodeResponses.get(o);return i?(this.logger.verbose("Existing acquireTokenByCode request found",t),r.discard()):(this.logger.verbose("Initiating new acquireTokenByCode request",t),i=this.acquireTokenByCodeAsync({...e,correlationId:t}).then(s=>(this.eventHandler.emitEvent(B.ACQUIRE_TOKEN_BY_CODE_SUCCESS,U.Silent,s),this.hybridAuthCodeResponses.delete(o),r.end({success:!0,isNativeBroker:s.fromNativeBroker,accessTokenSize:s.accessToken.length,idTokenSize:s.idToken.length,accountType:dt(s.account)}),s)).catch(s=>{throw this.hybridAuthCodeResponses.delete(o),this.eventHandler.emitEvent(B.ACQUIRE_TOKEN_BY_CODE_FAILURE,U.Silent,null,s),r.end({success:!1},s),s}),this.hybridAuthCodeResponses.set(o,i)),await i}else if(e.nativeAccountId)if(this.canUsePlatformBroker(e,e.nativeAccountId)){const o=await this.acquireTokenNative({...e,correlationId:t},ae.acquireTokenByCode,e.nativeAccountId).catch(i=>{throw i instanceof mt&&Tn(i)&&(this.nativeExtensionProvider=void 0),i});return r.end({accountType:dt(o.account),success:!0}),o}else throw x(Ed);else throw x(Td)}catch(o){throw this.eventHandler.emitEvent(B.ACQUIRE_TOKEN_BY_CODE_FAILURE,U.Silent,null,o),r.end({success:!1},o),o}}async acquireTokenByCodeAsync(e){var o;return this.logger.trace("acquireTokenByCodeAsync called",e.correlationId),this.acquireTokenByCodeAsyncMeasurement=this.performanceClient.startMeasurement(p.AcquireTokenByCodeAsync,e.correlationId),(o=this.acquireTokenByCodeAsyncMeasurement)==null||o.increment({visibilityChangeCount:0}),document.addEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement),await this.createSilentAuthCodeClient(e.correlationId).acquireToken(e).then(i=>{var s;return(s=this.acquireTokenByCodeAsyncMeasurement)==null||s.end({success:!0,fromCache:i.fromCache,isNativeBroker:i.fromNativeBroker}),i}).catch(i=>{var s;throw(s=this.acquireTokenByCodeAsyncMeasurement)==null||s.end({success:!1},i),i}).finally(()=>{document.removeEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement)})}async acquireTokenFromCache(e,t){switch(this.performanceClient.addQueueMeasurement(p.AcquireTokenFromCache,e.correlationId),t){case Ne.Default:case Ne.AccessToken:case Ne.AccessTokenAndRefreshToken:const r=this.createSilentCacheClient(e.correlationId);return _(r.acquireToken.bind(r),p.SilentCacheClientAcquireToken,this.logger,this.performanceClient,e.correlationId)(e);default:throw S(qt)}}async acquireTokenByRefreshToken(e,t){switch(this.performanceClient.addQueueMeasurement(p.AcquireTokenByRefreshToken,e.correlationId),t){case Ne.Default:case Ne.AccessTokenAndRefreshToken:case Ne.RefreshToken:case Ne.RefreshTokenAndNetwork:const r=this.createSilentRefreshClient(e.correlationId);return _(r.acquireToken.bind(r),p.SilentRefreshClientAcquireToken,this.logger,this.performanceClient,e.correlationId)(e);default:throw S(qt)}}async acquireTokenBySilentIframe(e){this.performanceClient.addQueueMeasurement(p.AcquireTokenBySilentIframe,e.correlationId);const t=this.createSilentIframeClient(e.correlationId);return _(t.acquireToken.bind(t),p.SilentIframeClientAcquireToken,this.logger,this.performanceClient,e.correlationId)(e)}async logout(e){const t=this.getRequestCorrelationId(e);return this.logger.warning("logout API is deprecated and will be removed in msal-browser v3.0.0. Use logoutRedirect instead.",t),this.logoutRedirect({correlationId:t,...e})}async logoutRedirect(e){const t=this.getRequestCorrelationId(e);return Ac(this.initialized,this.config),this.browserStorage.setInteractionInProgress(!0),this.createRedirectClient(t).logout(e)}logoutPopup(e){try{const t=this.getRequestCorrelationId(e);return ca(this.initialized),this.browserStorage.setInteractionInProgress(!0),this.createPopupClient(t).logout(e)}catch(t){return Promise.reject(t)}}async clearCache(e){if(!this.isBrowserEnvironment){this.logger.info("in non-browser environment, returning early.");return}const t=this.getRequestCorrelationId(e);return this.createSilentCacheClient(t).logout(e)}getAllAccounts(e){return SC(this.logger,this.browserStorage,this.isBrowserEnvironment,e)}getAccount(e){return IC(e,this.logger,this.browserStorage)}getAccountByUsername(e){return vC(e,this.logger,this.browserStorage)}getAccountByHomeId(e){return bC(e,this.logger,this.browserStorage)}getAccountByLocalId(e){return RC(e,this.logger,this.browserStorage)}setActiveAccount(e){kC(e,this.browserStorage)}getActiveAccount(){return OC(this.browserStorage)}async hydrateCache(e,t){this.logger.verbose("hydrateCache called");const r=Ue.createFromAccountInfo(e.account,e.cloudGraphHostName,e.msGraphHost);return await this.browserStorage.setAccount(r,e.correlationId),e.fromNativeBroker?(this.logger.verbose("Response was from native broker, storing in-memory"),this.nativeInternalStorage.hydrateCache(e,t)):this.browserStorage.hydrateCache(e,t)}async acquireTokenNative(e,t,r,o){if(this.logger.trace("acquireTokenNative called"),!this.nativeExtensionProvider)throw x(Cr);return new On(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,t,this.performanceClient,this.nativeExtensionProvider,r||this.getNativeAccountId(e),this.nativeInternalStorage,e.correlationId).acquireToken(e,o)}canUsePlatformBroker(e,t){if(this.logger.trace("canUsePlatformBroker called"),!Ct.isPlatformBrokerAvailable(this.config,this.logger,this.nativeExtensionProvider,e.authenticationScheme))return this.logger.trace("canUsePlatformBroker: isPlatformBrokerAvailable returned false, returning false"),!1;if(e.prompt)switch(e.prompt){case Te.NONE:case Te.CONSENT:case Te.LOGIN:this.logger.trace("canUsePlatformBroker: prompt is compatible with platform broker flow");break;default:return this.logger.trace(`canUsePlatformBroker: prompt = ${e.prompt} is not compatible with platform broker flow, returning false`),!1}return!t&&!this.getNativeAccountId(e)?(this.logger.trace("canUsePlatformBroker: nativeAccountId is not available, returning false"),!1):!0}getNativeAccountId(e){const t=e.account||this.getAccount({loginHint:e.loginHint,sid:e.sid})||this.getActiveAccount();return t&&t.nativeAccountId||""}createPopupClient(e){return new WC(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.nativeInternalStorage,this.nativeExtensionProvider,e)}createRedirectClient(e){return new QC(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.nativeInternalStorage,this.nativeExtensionProvider,e)}createSilentIframeClient(e){return new nT(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,ae.ssoSilent,this.performanceClient,this.nativeInternalStorage,this.nativeExtensionProvider,e)}createSilentCacheClient(e){return new jd(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.nativeExtensionProvider,e)}createSilentRefreshClient(e){return new rT(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.nativeExtensionProvider,e)}createSilentAuthCodeClient(e){return new sT(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,ae.acquireTokenByCode,this.performanceClient,this.nativeExtensionProvider,e)}addEventCallback(e,t){return this.eventHandler.addEventCallback(e,t)}removeEventCallback(e){this.eventHandler.removeEventCallback(e)}addPerformanceCallback(e){return Fd(),this.performanceClient.addPerformanceCallback(e)}removePerformanceCallback(e){return this.performanceClient.removePerformanceCallback(e)}enableAccountStorageEvents(){if(this.config.cache.cacheLocation!==we.LocalStorage){this.logger.info("Account storage events are only available when cacheLocation is set to localStorage");return}this.eventHandler.subscribeCrossTab()}disableAccountStorageEvents(){if(this.config.cache.cacheLocation!==we.LocalStorage){this.logger.info("Account storage events are only available when cacheLocation is set to localStorage");return}this.eventHandler.unsubscribeCrossTab()}getTokenCache(){return this.tokenCache}getLogger(){return this.logger}setLogger(e){this.logger=e}initializeWrapperLibrary(e,t){this.browserStorage.setWrapperMetadata(e,t)}setNavigationClient(e){this.navigationClient=e}getConfiguration(){return this.config}getPerformanceClient(){return this.performanceClient}isBrowserEnv(){return this.isBrowserEnvironment}getRequestCorrelationId(e){return e!=null&&e.correlationId?e.correlationId:this.isBrowserEnvironment?rt():E.EMPTY_STRING}async loginRedirect(e){const t=this.getRequestCorrelationId(e);return this.logger.verbose("loginRedirect called",t),this.acquireTokenRedirect({correlationId:t,...e||mc})}loginPopup(e){const t=this.getRequestCorrelationId(e);return this.logger.verbose("loginPopup called",t),this.acquireTokenPopup({correlationId:t,...e||mc})}async acquireTokenSilent(e){const t=this.getRequestCorrelationId(e),r=this.performanceClient.startMeasurement(p.AcquireTokenSilent,t);r.add({cacheLookupPolicy:e.cacheLookupPolicy,scenarioId:e.scenarioId}),Hr(this.initialized,r),this.logger.verbose("acquireTokenSilent called",t);const o=e.account||this.getActiveAccount();if(!o)throw x(ud);return r.add({accountType:dt(o)}),this.acquireTokenSilentDeduped(e,o,t).then(i=>(r.end({success:!0,fromCache:i.fromCache,isNativeBroker:i.fromNativeBroker,accessTokenSize:i.accessToken.length,idTokenSize:i.idToken.length}),{...i,state:e.state,correlationId:t})).catch(i=>{throw i instanceof ce&&i.setCorrelationId(t),r.end({success:!1},i),i})}async acquireTokenSilentDeduped(e,t,r){const o=No(this.config.auth.clientId,{...e,authority:e.authority||this.config.auth.authority},t.homeAccountId),i=JSON.stringify(o),s=this.activeSilentTokenRequests.get(i);if(typeof s>"u"){this.logger.verbose("acquireTokenSilent called for the first time, storing active request",r),this.performanceClient.addFields({deduped:!1},r);const a=_(this.acquireTokenSilentAsync.bind(this),p.AcquireTokenSilentAsync,this.logger,this.performanceClient,r)({...e,correlationId:r},t);return this.activeSilentTokenRequests.set(i,a),a.finally(()=>{this.activeSilentTokenRequests.delete(i)})}else return this.logger.verbose("acquireTokenSilent has been called previously, returning the result from the first call",r),this.performanceClient.addFields({deduped:!0},r),s}async acquireTokenSilentAsync(e,t){const r=()=>this.trackPageVisibility(e.correlationId);this.performanceClient.addQueueMeasurement(p.AcquireTokenSilentAsync,e.correlationId),this.eventHandler.emitEvent(B.ACQUIRE_TOKEN_START,U.Silent,e),e.correlationId&&this.performanceClient.incrementFields({visibilityChangeCount:0},e.correlationId),document.addEventListener("visibilitychange",r);const o=await _(MC,p.InitializeSilentRequest,this.logger,this.performanceClient,e.correlationId)(e,t,this.config,this.performanceClient,this.logger),i=e.cacheLookupPolicy||Ne.Default;return this.acquireTokenSilentNoIframe(o,i).catch(async a=>{if(aT(a,i))if(this.activeIframeRequest)if(i!==Ne.Skip){const[h,l]=this.activeIframeRequest;this.logger.verbose(`Iframe request is already in progress, awaiting resolution for request with correlationId: ${l}`,o.correlationId);const d=this.performanceClient.startMeasurement(p.AwaitConcurrentIframe,o.correlationId);d.add({awaitIframeCorrelationId:l});const g=await h;if(d.end({success:g}),g)return this.logger.verbose(`Parallel iframe request with correlationId: ${l} succeeded. Retrying cache and/or RT redemption`,o.correlationId),this.acquireTokenSilentNoIframe(o,i);throw this.logger.info(`Iframe request with correlationId: ${l} failed. Interaction is required.`),a}else return this.logger.warning("Another iframe request is currently in progress and CacheLookupPolicy is set to Skip. This may result in degraded performance and/or reliability for both calls. Please consider changing the CacheLookupPolicy to take advantage of request queuing and token cache.",o.correlationId),_(this.acquireTokenBySilentIframe.bind(this),p.AcquireTokenBySilentIframe,this.logger,this.performanceClient,o.correlationId)(o);else{let h;return this.activeIframeRequest=[new Promise(l=>{h=l}),o.correlationId],this.logger.verbose("Refresh token expired/invalid or CacheLookupPolicy is set to Skip, attempting acquire token by iframe.",o.correlationId),_(this.acquireTokenBySilentIframe.bind(this),p.AcquireTokenBySilentIframe,this.logger,this.performanceClient,o.correlationId)(o).then(l=>(h(!0),l)).catch(l=>{throw h(!1),l}).finally(()=>{this.activeIframeRequest=void 0})}else throw a}).then(a=>(this.eventHandler.emitEvent(B.ACQUIRE_TOKEN_SUCCESS,U.Silent,a),e.correlationId&&this.performanceClient.addFields({fromCache:a.fromCache,isNativeBroker:a.fromNativeBroker},e.correlationId),a)).catch(a=>{throw this.eventHandler.emitEvent(B.ACQUIRE_TOKEN_FAILURE,U.Silent,null,a),a}).finally(()=>{document.removeEventListener("visibilitychange",r)})}async acquireTokenSilentNoIframe(e,t){return Ct.isPlatformBrokerAvailable(this.config,this.logger,this.nativeExtensionProvider,e.authenticationScheme)&&e.account.nativeAccountId?(this.logger.verbose("acquireTokenSilent - attempting to acquire token from native platform"),this.acquireTokenNative(e,ae.acquireTokenSilent_silentFlow,e.account.nativeAccountId,t).catch(async r=>{throw r instanceof mt&&Tn(r)?(this.logger.verbose("acquireTokenSilent - native platform unavailable, falling back to web flow"),this.nativeExtensionProvider=void 0,S(qt)):r})):(this.logger.verbose("acquireTokenSilent - attempting to acquire token from web flow"),t===Ne.AccessToken&&this.logger.verbose("acquireTokenSilent - cache lookup policy set to AccessToken, attempting to acquire token from local cache"),_(this.acquireTokenFromCache.bind(this),p.AcquireTokenFromCache,this.logger,this.performanceClient,e.correlationId)(e,t).catch(r=>{if(t===Ne.AccessToken)throw r;return this.eventHandler.emitEvent(B.ACQUIRE_TOKEN_NETWORK_START,U.Silent,e),_(this.acquireTokenByRefreshToken.bind(this),p.AcquireTokenByRefreshToken,this.logger,this.performanceClient,e.correlationId)(e,t)}))}async preGeneratePkceCodes(e){return this.logger.verbose("Generating new PKCE codes"),this.pkceCode=await _(Ko,p.GeneratePkceCodes,this.logger,this.performanceClient,e)(this.performanceClient,this.logger,e),Promise.resolve()}getPreGeneratedPkceCodes(e){this.logger.verbose("Attempting to pick up pre-generated PKCE codes");const t=this.pkceCode?{...this.pkceCode}:void 0;return this.pkceCode=void 0,this.logger.verbose(`${t?"Found":"Did not find"} pre-generated PKCE codes`),this.performanceClient.addFields({usePreGeneratedPkce:!!t},e),t}}function aT(n,e){const t=!(n instanceof nt&&n.subError!==xo),r=n.errorCode===Be.INVALID_GRANT_ERROR||n.errorCode===qt,o=t&&r||n.errorCode===ao||n.errorCode===js,i=By.includes(e);return o&&i}/*! @azure/msal-browser v4.8.0 2025-03-20 */async function cT(n,e){const t=new dn(n);return await t.initialize(),qo.createController(t,e)}/*! @azure/msal-browser v4.8.0 2025-03-20 */class fa{static async createPublicClientApplication(e){const t=await cT(e);return new fa(e,t)}constructor(e,t){this.controller=t||new qo(new dn(e))}async initialize(e){return this.controller.initialize(e)}async acquireTokenPopup(e){return this.controller.acquireTokenPopup(e)}acquireTokenRedirect(e){return this.controller.acquireTokenRedirect(e)}acquireTokenSilent(e){return this.controller.acquireTokenSilent(e)}acquireTokenByCode(e){return this.controller.acquireTokenByCode(e)}addEventCallback(e,t){return this.controller.addEventCallback(e,t)}removeEventCallback(e){return this.controller.removeEventCallback(e)}addPerformanceCallback(e){return this.controller.addPerformanceCallback(e)}removePerformanceCallback(e){return this.controller.removePerformanceCallback(e)}enableAccountStorageEvents(){this.controller.enableAccountStorageEvents()}disableAccountStorageEvents(){this.controller.disableAccountStorageEvents()}getAccount(e){return this.controller.getAccount(e)}getAccountByHomeId(e){return this.controller.getAccountByHomeId(e)}getAccountByLocalId(e){return this.controller.getAccountByLocalId(e)}getAccountByUsername(e){return this.controller.getAccountByUsername(e)}getAllAccounts(e){return this.controller.getAllAccounts(e)}handleRedirectPromise(e){return this.controller.handleRedirectPromise(e)}loginPopup(e){return this.controller.loginPopup(e)}loginRedirect(e){return this.controller.loginRedirect(e)}logout(e){return this.controller.logout(e)}logoutRedirect(e){return this.controller.logoutRedirect(e)}logoutPopup(e){return this.controller.logoutPopup(e)}ssoSilent(e){return this.controller.ssoSilent(e)}getTokenCache(){return this.controller.getTokenCache()}getLogger(){return this.controller.getLogger()}setLogger(e){this.controller.setLogger(e)}setActiveAccount(e){this.controller.setActiveAccount(e)}getActiveAccount(){return this.controller.getActiveAccount()}initializeWrapperLibrary(e,t){return this.controller.initializeWrapperLibrary(e,t)}setNavigationClient(e){this.controller.setNavigationClient(e)}getConfiguration(){return this.controller.getConfiguration()}async hydrateCache(e,t){return this.controller.hydrateCache(e,t)}clearCache(e){return this.controller.clearCache(e)}}const lT={class:"flex justify-center mt-6"},hT={__name:"LoginButton",emits:["auth-changed"],setup(n,{emit:e}){const t=e,r=Ot(!1),o=Ot(null),i={auth:{clientId:"c345bebf-7e3e-4b6d-8e4e-7d99bf4397af",authority:"https://login.microsoftonline.com/common/v2.0",redirectUri:"https://finneas98.github.io"},cache:{cacheLocation:"sessionStorage",storeAuthStateInCookie:!0}},s=new fa(i);us(async()=>{await s.initialize(),a()});const a=async()=>{s.getAllAccounts().length>0&&(r.value=!0,await l()),t("auth-changed",{isAuthenticated:r.value,accessToken:o.value})},c=async()=>{try{await s.loginPopup({scopes:["Calendars.Read"]}),r.value=!0,await l(),t("auth-changed",{isAuthenticated:!0,accessToken:o.value})}catch(d){console.error("Login failed",d)}},h=async()=>{await s.logoutPopup(),r.value=!1,o.value=null,t("auth-changed",{isAuthenticated:!1,accessToken:null})},l=async()=>{try{const d=await s.acquireTokenSilent({scopes:["https://graph.microsoft.com/.default"],account:s.getAllAccounts()[0]});o.value=d.accessToken,t("auth-changed",{isAuthenticated:!0,accessToken:o.value})}catch(d){console.error("Error retrieving token",d)}};return(d,g)=>(ye(),Ee("div",lT,[r.value?Nt("",!0):(ye(),Ee("button",{key:0,onClick:c,class:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-6 rounded-lg shadow-md transition duration-300"}," Login with Microsoft ")),r.value?(ye(),Ee("button",{key:1,onClick:h,class:"bg-gray-200 hover:bg-gray-300 text-gray-800 font-bold py-2 px-4 rounded-lg shadow-md transition duration-300 text-sm flex items-center gap-2"},g[0]||(g[0]=[he("span",null,"Logout",-1)]))):Nt("",!0)]))}};function Yd(n,e){return function(){return n.apply(e,arguments)}}const{toString:dT}=Object.prototype,{getPrototypeOf:ga}=Object,$o=(n=>e=>{const t=dT.call(e);return n[t]||(n[t]=t.slice(8,-1).toLowerCase())})(Object.create(null)),ot=n=>(n=n.toLowerCase(),e=>$o(e)===n),Go=n=>e=>typeof e===n,{isArray:Un}=Array,ur=Go("undefined");function uT(n){return n!==null&&!ur(n)&&n.constructor!==null&&!ur(n.constructor)&&Ye(n.constructor.isBuffer)&&n.constructor.isBuffer(n)}const Qd=ot("ArrayBuffer");function fT(n){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(n):e=n&&n.buffer&&Qd(n.buffer),e}const gT=Go("string"),Ye=Go("function"),Jd=Go("number"),zo=n=>n!==null&&typeof n=="object",pT=n=>n===!0||n===!1,$r=n=>{if($o(n)!=="object")return!1;const e=ga(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)},mT=ot("Date"),yT=ot("File"),CT=ot("Blob"),TT=ot("FileList"),AT=n=>zo(n)&&Ye(n.pipe),ET=n=>{let e;return n&&(typeof FormData=="function"&&n instanceof FormData||Ye(n.append)&&((e=$o(n))==="formdata"||e==="object"&&Ye(n.toString)&&n.toString()==="[object FormData]"))},wT=ot("URLSearchParams"),[_T,ST,IT,vT]=["ReadableStream","Request","Response","Headers"].map(ot),bT=n=>n.trim?n.trim():n.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Er(n,e,{allOwnKeys:t=!1}={}){if(n===null||typeof n>"u")return;let r,o;if(typeof n!="object"&&(n=[n]),Un(n))for(r=0,o=n.length;r<o;r++)e.call(null,n[r],r,n);else{const i=t?Object.getOwnPropertyNames(n):Object.keys(n),s=i.length;let a;for(r=0;r<s;r++)a=i[r],e.call(null,n[a],a,n)}}function Xd(n,e){e=e.toLowerCase();const t=Object.keys(n);let r=t.length,o;for(;r-- >0;)if(o=t[r],e===o.toLowerCase())return o;return null}const nn=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,Zd=n=>!ur(n)&&n!==nn;function Gi(){const{caseless:n}=Zd(this)&&this||{},e={},t=(r,o)=>{const i=n&&Xd(e,o)||o;$r(e[i])&&$r(r)?e[i]=Gi(e[i],r):$r(r)?e[i]=Gi({},r):Un(r)?e[i]=r.slice():e[i]=r};for(let r=0,o=arguments.length;r<o;r++)arguments[r]&&Er(arguments[r],t);return e}const RT=(n,e,t,{allOwnKeys:r}={})=>(Er(e,(o,i)=>{t&&Ye(o)?n[i]=Yd(o,t):n[i]=o},{allOwnKeys:r}),n),kT=n=>(n.charCodeAt(0)===65279&&(n=n.slice(1)),n),OT=(n,e,t,r)=>{n.prototype=Object.create(e.prototype,r),n.prototype.constructor=n,Object.defineProperty(n,"super",{value:e.prototype}),t&&Object.assign(n.prototype,t)},PT=(n,e,t,r)=>{let o,i,s;const a={};if(e=e||{},n==null)return e;do{for(o=Object.getOwnPropertyNames(n),i=o.length;i-- >0;)s=o[i],(!r||r(s,n,e))&&!a[s]&&(e[s]=n[s],a[s]=!0);n=t!==!1&&ga(n)}while(n&&(!t||t(n,e))&&n!==Object.prototype);return e},NT=(n,e,t)=>{n=String(n),(t===void 0||t>n.length)&&(t=n.length),t-=e.length;const r=n.indexOf(e,t);return r!==-1&&r===t},MT=n=>{if(!n)return null;if(Un(n))return n;let e=n.length;if(!Jd(e))return null;const t=new Array(e);for(;e-- >0;)t[e]=n[e];return t},xT=(n=>e=>n&&e instanceof n)(typeof Uint8Array<"u"&&ga(Uint8Array)),DT=(n,e)=>{const r=(n&&n[Symbol.iterator]).call(n);let o;for(;(o=r.next())&&!o.done;){const i=o.value;e.call(n,i[0],i[1])}},LT=(n,e)=>{let t;const r=[];for(;(t=n.exec(e))!==null;)r.push(t);return r},UT=ot("HTMLFormElement"),HT=n=>n.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(t,r,o){return r.toUpperCase()+o}),bc=(({hasOwnProperty:n})=>(e,t)=>n.call(e,t))(Object.prototype),FT=ot("RegExp"),eu=(n,e)=>{const t=Object.getOwnPropertyDescriptors(n),r={};Er(t,(o,i)=>{let s;(s=e(o,i,n))!==!1&&(r[i]=s||o)}),Object.defineProperties(n,r)},BT=n=>{eu(n,(e,t)=>{if(Ye(n)&&["arguments","caller","callee"].indexOf(t)!==-1)return!1;const r=n[t];if(Ye(r)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+t+"'")})}})},KT=(n,e)=>{const t={},r=o=>{o.forEach(i=>{t[i]=!0})};return Un(n)?r(n):r(String(n).split(e)),t},qT=()=>{},$T=(n,e)=>n!=null&&Number.isFinite(n=+n)?n:e;function GT(n){return!!(n&&Ye(n.append)&&n[Symbol.toStringTag]==="FormData"&&n[Symbol.iterator])}const zT=n=>{const e=new Array(10),t=(r,o)=>{if(zo(r)){if(e.indexOf(r)>=0)return;if(!("toJSON"in r)){e[o]=r;const i=Un(r)?[]:{};return Er(r,(s,a)=>{const c=t(s,o+1);!ur(c)&&(i[a]=c)}),e[o]=void 0,i}}return r};return t(n,0)},jT=ot("AsyncFunction"),VT=n=>n&&(zo(n)||Ye(n))&&Ye(n.then)&&Ye(n.catch),tu=((n,e)=>n?setImmediate:e?((t,r)=>(nn.addEventListener("message",({source:o,data:i})=>{o===nn&&i===t&&r.length&&r.shift()()},!1),o=>{r.push(o),nn.postMessage(t,"*")}))(`axios@${Math.random()}`,[]):t=>setTimeout(t))(typeof setImmediate=="function",Ye(nn.postMessage)),WT=typeof queueMicrotask<"u"?queueMicrotask.bind(nn):typeof process<"u"&&process.nextTick||tu,C={isArray:Un,isArrayBuffer:Qd,isBuffer:uT,isFormData:ET,isArrayBufferView:fT,isString:gT,isNumber:Jd,isBoolean:pT,isObject:zo,isPlainObject:$r,isReadableStream:_T,isRequest:ST,isResponse:IT,isHeaders:vT,isUndefined:ur,isDate:mT,isFile:yT,isBlob:CT,isRegExp:FT,isFunction:Ye,isStream:AT,isURLSearchParams:wT,isTypedArray:xT,isFileList:TT,forEach:Er,merge:Gi,extend:RT,trim:bT,stripBOM:kT,inherits:OT,toFlatObject:PT,kindOf:$o,kindOfTest:ot,endsWith:NT,toArray:MT,forEachEntry:DT,matchAll:LT,isHTMLForm:UT,hasOwnProperty:bc,hasOwnProp:bc,reduceDescriptors:eu,freezeMethods:BT,toObjectSet:KT,toCamelCase:HT,noop:qT,toFiniteNumber:$T,findKey:Xd,global:nn,isContextDefined:Zd,isSpecCompliantForm:GT,toJSONObject:zT,isAsyncFn:jT,isThenable:VT,setImmediate:tu,asap:WT};function z(n,e,t,r,o){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=n,this.name="AxiosError",e&&(this.code=e),t&&(this.config=t),r&&(this.request=r),o&&(this.response=o,this.status=o.status?o.status:null)}C.inherits(z,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:C.toJSONObject(this.config),code:this.code,status:this.status}}});const nu=z.prototype,ru={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(n=>{ru[n]={value:n}});Object.defineProperties(z,ru);Object.defineProperty(nu,"isAxiosError",{value:!0});z.from=(n,e,t,r,o,i)=>{const s=Object.create(nu);return C.toFlatObject(n,s,function(c){return c!==Error.prototype},a=>a!=="isAxiosError"),z.call(s,n.message,e,t,r,o),s.cause=n,s.name=n.name,i&&Object.assign(s,i),s};const YT=null;function zi(n){return C.isPlainObject(n)||C.isArray(n)}function ou(n){return C.endsWith(n,"[]")?n.slice(0,-2):n}function Rc(n,e,t){return n?n.concat(e).map(function(o,i){return o=ou(o),!t&&i?"["+o+"]":o}).join(t?".":""):e}function QT(n){return C.isArray(n)&&!n.some(zi)}const JT=C.toFlatObject(C,{},null,function(e){return/^is[A-Z]/.test(e)});function jo(n,e,t){if(!C.isObject(n))throw new TypeError("target must be an object");e=e||new FormData,t=C.toFlatObject(t,{metaTokens:!0,dots:!1,indexes:!1},!1,function(A,I){return!C.isUndefined(I[A])});const r=t.metaTokens,o=t.visitor||l,i=t.dots,s=t.indexes,c=(t.Blob||typeof Blob<"u"&&Blob)&&C.isSpecCompliantForm(e);if(!C.isFunction(o))throw new TypeError("visitor must be a function");function h(m){if(m===null)return"";if(C.isDate(m))return m.toISOString();if(!c&&C.isBlob(m))throw new z("Blob is not supported. Use a Buffer instead.");return C.isArrayBuffer(m)||C.isTypedArray(m)?c&&typeof Blob=="function"?new Blob([m]):Buffer.from(m):m}function l(m,A,I){let M=m;if(m&&!I&&typeof m=="object"){if(C.endsWith(A,"{}"))A=r?A:A.slice(0,-2),m=JSON.stringify(m);else if(C.isArray(m)&&QT(m)||(C.isFileList(m)||C.endsWith(A,"[]"))&&(M=C.toArray(m)))return A=ou(A),M.forEach(function(H,D){!(C.isUndefined(H)||H===null)&&e.append(s===!0?Rc([A],D,i):s===null?A:A+"[]",h(H))}),!1}return zi(m)?!0:(e.append(Rc(I,A,i),h(m)),!1)}const d=[],g=Object.assign(JT,{defaultVisitor:l,convertValue:h,isVisitable:zi});function y(m,A){if(!C.isUndefined(m)){if(d.indexOf(m)!==-1)throw Error("Circular reference detected in "+A.join("."));d.push(m),C.forEach(m,function(M,L){(!(C.isUndefined(M)||M===null)&&o.call(e,M,C.isString(L)?L.trim():L,A,g))===!0&&y(M,A?A.concat(L):[L])}),d.pop()}}if(!C.isObject(n))throw new TypeError("data must be an object");return y(n),e}function kc(n){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(n).replace(/[!'()~]|%20|%00/g,function(r){return e[r]})}function pa(n,e){this._pairs=[],n&&jo(n,this,e)}const iu=pa.prototype;iu.append=function(e,t){this._pairs.push([e,t])};iu.toString=function(e){const t=e?function(r){return e.call(this,r,kc)}:kc;return this._pairs.map(function(o){return t(o[0])+"="+t(o[1])},"").join("&")};function XT(n){return encodeURIComponent(n).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function su(n,e,t){if(!e)return n;const r=t&&t.encode||XT;C.isFunction(t)&&(t={serialize:t});const o=t&&t.serialize;let i;if(o?i=o(e,t):i=C.isURLSearchParams(e)?e.toString():new pa(e,t).toString(r),i){const s=n.indexOf("#");s!==-1&&(n=n.slice(0,s)),n+=(n.indexOf("?")===-1?"?":"&")+i}return n}class Oc{constructor(){this.handlers=[]}use(e,t,r){return this.handlers.push({fulfilled:e,rejected:t,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){C.forEach(this.handlers,function(r){r!==null&&e(r)})}}const au={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},ZT=typeof URLSearchParams<"u"?URLSearchParams:pa,eA=typeof FormData<"u"?FormData:null,tA=typeof Blob<"u"?Blob:null,nA={isBrowser:!0,classes:{URLSearchParams:ZT,FormData:eA,Blob:tA},protocols:["http","https","file","blob","url","data"]},ma=typeof window<"u"&&typeof document<"u",ji=typeof navigator=="object"&&navigator||void 0,rA=ma&&(!ji||["ReactNative","NativeScript","NS"].indexOf(ji.product)<0),oA=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",iA=ma&&window.location.href||"http://localhost",sA=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:ma,hasStandardBrowserEnv:rA,hasStandardBrowserWebWorkerEnv:oA,navigator:ji,origin:iA},Symbol.toStringTag,{value:"Module"})),be={...sA,...nA};function aA(n,e){return jo(n,new be.classes.URLSearchParams,Object.assign({visitor:function(t,r,o,i){return be.isNode&&C.isBuffer(t)?(this.append(r,t.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)}},e))}function cA(n){return C.matchAll(/\w+|\[(\w*)]/g,n).map(e=>e[0]==="[]"?"":e[1]||e[0])}function lA(n){const e={},t=Object.keys(n);let r;const o=t.length;let i;for(r=0;r<o;r++)i=t[r],e[i]=n[i];return e}function cu(n){function e(t,r,o,i){let s=t[i++];if(s==="__proto__")return!0;const a=Number.isFinite(+s),c=i>=t.length;return s=!s&&C.isArray(o)?o.length:s,c?(C.hasOwnProp(o,s)?o[s]=[o[s],r]:o[s]=r,!a):((!o[s]||!C.isObject(o[s]))&&(o[s]=[]),e(t,r,o[s],i)&&C.isArray(o[s])&&(o[s]=lA(o[s])),!a)}if(C.isFormData(n)&&C.isFunction(n.entries)){const t={};return C.forEachEntry(n,(r,o)=>{e(cA(r),o,t,0)}),t}return null}function hA(n,e,t){if(C.isString(n))try{return(e||JSON.parse)(n),C.trim(n)}catch(r){if(r.name!=="SyntaxError")throw r}return(t||JSON.stringify)(n)}const wr={transitional:au,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const r=t.getContentType()||"",o=r.indexOf("application/json")>-1,i=C.isObject(e);if(i&&C.isHTMLForm(e)&&(e=new FormData(e)),C.isFormData(e))return o?JSON.stringify(cu(e)):e;if(C.isArrayBuffer(e)||C.isBuffer(e)||C.isStream(e)||C.isFile(e)||C.isBlob(e)||C.isReadableStream(e))return e;if(C.isArrayBufferView(e))return e.buffer;if(C.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let a;if(i){if(r.indexOf("application/x-www-form-urlencoded")>-1)return aA(e,this.formSerializer).toString();if((a=C.isFileList(e))||r.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return jo(a?{"files[]":e}:e,c&&new c,this.formSerializer)}}return i||o?(t.setContentType("application/json",!1),hA(e)):e}],transformResponse:[function(e){const t=this.transitional||wr.transitional,r=t&&t.forcedJSONParsing,o=this.responseType==="json";if(C.isResponse(e)||C.isReadableStream(e))return e;if(e&&C.isString(e)&&(r&&!this.responseType||o)){const s=!(t&&t.silentJSONParsing)&&o;try{return JSON.parse(e)}catch(a){if(s)throw a.name==="SyntaxError"?z.from(a,z.ERR_BAD_RESPONSE,this,null,this.response):a}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:be.classes.FormData,Blob:be.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};C.forEach(["delete","get","head","post","put","patch"],n=>{wr.headers[n]={}});const dA=C.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),uA=n=>{const e={};let t,r,o;return n&&n.split(`
`).forEach(function(s){o=s.indexOf(":"),t=s.substring(0,o).trim().toLowerCase(),r=s.substring(o+1).trim(),!(!t||e[t]&&dA[t])&&(t==="set-cookie"?e[t]?e[t].push(r):e[t]=[r]:e[t]=e[t]?e[t]+", "+r:r)}),e},Pc=Symbol("internals");function zn(n){return n&&String(n).trim().toLowerCase()}function Gr(n){return n===!1||n==null?n:C.isArray(n)?n.map(Gr):String(n)}function fA(n){const e=Object.create(null),t=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=t.exec(n);)e[r[1]]=r[2];return e}const gA=n=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(n.trim());function fi(n,e,t,r,o){if(C.isFunction(r))return r.call(this,e,t);if(o&&(e=t),!!C.isString(e)){if(C.isString(r))return e.indexOf(r)!==-1;if(C.isRegExp(r))return r.test(e)}}function pA(n){return n.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,r)=>t.toUpperCase()+r)}function mA(n,e){const t=C.toCamelCase(" "+e);["get","set","has"].forEach(r=>{Object.defineProperty(n,r+t,{value:function(o,i,s){return this[r].call(this,e,o,i,s)},configurable:!0})})}let Ke=class{constructor(e){e&&this.set(e)}set(e,t,r){const o=this;function i(a,c,h){const l=zn(c);if(!l)throw new Error("header name must be a non-empty string");const d=C.findKey(o,l);(!d||o[d]===void 0||h===!0||h===void 0&&o[d]!==!1)&&(o[d||c]=Gr(a))}const s=(a,c)=>C.forEach(a,(h,l)=>i(h,l,c));if(C.isPlainObject(e)||e instanceof this.constructor)s(e,t);else if(C.isString(e)&&(e=e.trim())&&!gA(e))s(uA(e),t);else if(C.isHeaders(e))for(const[a,c]of e.entries())i(c,a,r);else e!=null&&i(t,e,r);return this}get(e,t){if(e=zn(e),e){const r=C.findKey(this,e);if(r){const o=this[r];if(!t)return o;if(t===!0)return fA(o);if(C.isFunction(t))return t.call(this,o,r);if(C.isRegExp(t))return t.exec(o);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=zn(e),e){const r=C.findKey(this,e);return!!(r&&this[r]!==void 0&&(!t||fi(this,this[r],r,t)))}return!1}delete(e,t){const r=this;let o=!1;function i(s){if(s=zn(s),s){const a=C.findKey(r,s);a&&(!t||fi(r,r[a],a,t))&&(delete r[a],o=!0)}}return C.isArray(e)?e.forEach(i):i(e),o}clear(e){const t=Object.keys(this);let r=t.length,o=!1;for(;r--;){const i=t[r];(!e||fi(this,this[i],i,e,!0))&&(delete this[i],o=!0)}return o}normalize(e){const t=this,r={};return C.forEach(this,(o,i)=>{const s=C.findKey(r,i);if(s){t[s]=Gr(o),delete t[i];return}const a=e?pA(i):String(i).trim();a!==i&&delete t[i],t[a]=Gr(o),r[a]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return C.forEach(this,(r,o)=>{r!=null&&r!==!1&&(t[o]=e&&C.isArray(r)?r.join(", "):r)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,t])=>e+": "+t).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const r=new this(e);return t.forEach(o=>r.set(o)),r}static accessor(e){const r=(this[Pc]=this[Pc]={accessors:{}}).accessors,o=this.prototype;function i(s){const a=zn(s);r[a]||(mA(o,s),r[a]=!0)}return C.isArray(e)?e.forEach(i):i(e),this}};Ke.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);C.reduceDescriptors(Ke.prototype,({value:n},e)=>{let t=e[0].toUpperCase()+e.slice(1);return{get:()=>n,set(r){this[t]=r}}});C.freezeMethods(Ke);function gi(n,e){const t=this||wr,r=e||t,o=Ke.from(r.headers);let i=r.data;return C.forEach(n,function(a){i=a.call(t,i,o.normalize(),e?e.status:void 0)}),o.normalize(),i}function lu(n){return!!(n&&n.__CANCEL__)}function Hn(n,e,t){z.call(this,n??"canceled",z.ERR_CANCELED,e,t),this.name="CanceledError"}C.inherits(Hn,z,{__CANCEL__:!0});function hu(n,e,t){const r=t.config.validateStatus;!t.status||!r||r(t.status)?n(t):e(new z("Request failed with status code "+t.status,[z.ERR_BAD_REQUEST,z.ERR_BAD_RESPONSE][Math.floor(t.status/100)-4],t.config,t.request,t))}function yA(n){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(n);return e&&e[1]||""}function CA(n,e){n=n||10;const t=new Array(n),r=new Array(n);let o=0,i=0,s;return e=e!==void 0?e:1e3,function(c){const h=Date.now(),l=r[i];s||(s=h),t[o]=c,r[o]=h;let d=i,g=0;for(;d!==o;)g+=t[d++],d=d%n;if(o=(o+1)%n,o===i&&(i=(i+1)%n),h-s<e)return;const y=l&&h-l;return y?Math.round(g*1e3/y):void 0}}function TA(n,e){let t=0,r=1e3/e,o,i;const s=(h,l=Date.now())=>{t=l,o=null,i&&(clearTimeout(i),i=null),n.apply(null,h)};return[(...h)=>{const l=Date.now(),d=l-t;d>=r?s(h,l):(o=h,i||(i=setTimeout(()=>{i=null,s(o)},r-d)))},()=>o&&s(o)]}const fo=(n,e,t=3)=>{let r=0;const o=CA(50,250);return TA(i=>{const s=i.loaded,a=i.lengthComputable?i.total:void 0,c=s-r,h=o(c),l=s<=a;r=s;const d={loaded:s,total:a,progress:a?s/a:void 0,bytes:c,rate:h||void 0,estimated:h&&a&&l?(a-s)/h:void 0,event:i,lengthComputable:a!=null,[e?"download":"upload"]:!0};n(d)},t)},Nc=(n,e)=>{const t=n!=null;return[r=>e[0]({lengthComputable:t,total:n,loaded:r}),e[1]]},Mc=n=>(...e)=>C.asap(()=>n(...e)),AA=be.hasStandardBrowserEnv?((n,e)=>t=>(t=new URL(t,be.origin),n.protocol===t.protocol&&n.host===t.host&&(e||n.port===t.port)))(new URL(be.origin),be.navigator&&/(msie|trident)/i.test(be.navigator.userAgent)):()=>!0,EA=be.hasStandardBrowserEnv?{write(n,e,t,r,o,i){const s=[n+"="+encodeURIComponent(e)];C.isNumber(t)&&s.push("expires="+new Date(t).toGMTString()),C.isString(r)&&s.push("path="+r),C.isString(o)&&s.push("domain="+o),i===!0&&s.push("secure"),document.cookie=s.join("; ")},read(n){const e=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(n){this.write(n,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function wA(n){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(n)}function _A(n,e){return e?n.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):n}function du(n,e,t){let r=!wA(e);return n&&(r||t==!1)?_A(n,e):e}const xc=n=>n instanceof Ke?{...n}:n;function fn(n,e){e=e||{};const t={};function r(h,l,d,g){return C.isPlainObject(h)&&C.isPlainObject(l)?C.merge.call({caseless:g},h,l):C.isPlainObject(l)?C.merge({},l):C.isArray(l)?l.slice():l}function o(h,l,d,g){if(C.isUndefined(l)){if(!C.isUndefined(h))return r(void 0,h,d,g)}else return r(h,l,d,g)}function i(h,l){if(!C.isUndefined(l))return r(void 0,l)}function s(h,l){if(C.isUndefined(l)){if(!C.isUndefined(h))return r(void 0,h)}else return r(void 0,l)}function a(h,l,d){if(d in e)return r(h,l);if(d in n)return r(void 0,h)}const c={url:i,method:i,data:i,baseURL:s,transformRequest:s,transformResponse:s,paramsSerializer:s,timeout:s,timeoutMessage:s,withCredentials:s,withXSRFToken:s,adapter:s,responseType:s,xsrfCookieName:s,xsrfHeaderName:s,onUploadProgress:s,onDownloadProgress:s,decompress:s,maxContentLength:s,maxBodyLength:s,beforeRedirect:s,transport:s,httpAgent:s,httpsAgent:s,cancelToken:s,socketPath:s,responseEncoding:s,validateStatus:a,headers:(h,l,d)=>o(xc(h),xc(l),d,!0)};return C.forEach(Object.keys(Object.assign({},n,e)),function(l){const d=c[l]||o,g=d(n[l],e[l],l);C.isUndefined(g)&&d!==a||(t[l]=g)}),t}const uu=n=>{const e=fn({},n);let{data:t,withXSRFToken:r,xsrfHeaderName:o,xsrfCookieName:i,headers:s,auth:a}=e;e.headers=s=Ke.from(s),e.url=su(du(e.baseURL,e.url,e.allowAbsoluteUrls),n.params,n.paramsSerializer),a&&s.set("Authorization","Basic "+btoa((a.username||"")+":"+(a.password?unescape(encodeURIComponent(a.password)):"")));let c;if(C.isFormData(t)){if(be.hasStandardBrowserEnv||be.hasStandardBrowserWebWorkerEnv)s.setContentType(void 0);else if((c=s.getContentType())!==!1){const[h,...l]=c?c.split(";").map(d=>d.trim()).filter(Boolean):[];s.setContentType([h||"multipart/form-data",...l].join("; "))}}if(be.hasStandardBrowserEnv&&(r&&C.isFunction(r)&&(r=r(e)),r||r!==!1&&AA(e.url))){const h=o&&i&&EA.read(i);h&&s.set(o,h)}return e},SA=typeof XMLHttpRequest<"u",IA=SA&&function(n){return new Promise(function(t,r){const o=uu(n);let i=o.data;const s=Ke.from(o.headers).normalize();let{responseType:a,onUploadProgress:c,onDownloadProgress:h}=o,l,d,g,y,m;function A(){y&&y(),m&&m(),o.cancelToken&&o.cancelToken.unsubscribe(l),o.signal&&o.signal.removeEventListener("abort",l)}let I=new XMLHttpRequest;I.open(o.method.toUpperCase(),o.url,!0),I.timeout=o.timeout;function M(){if(!I)return;const H=Ke.from("getAllResponseHeaders"in I&&I.getAllResponseHeaders()),V={data:!a||a==="text"||a==="json"?I.responseText:I.response,status:I.status,statusText:I.statusText,headers:H,config:n,request:I};hu(function(ge){t(ge),A()},function(ge){r(ge),A()},V),I=null}"onloadend"in I?I.onloadend=M:I.onreadystatechange=function(){!I||I.readyState!==4||I.status===0&&!(I.responseURL&&I.responseURL.indexOf("file:")===0)||setTimeout(M)},I.onabort=function(){I&&(r(new z("Request aborted",z.ECONNABORTED,n,I)),I=null)},I.onerror=function(){r(new z("Network Error",z.ERR_NETWORK,n,I)),I=null},I.ontimeout=function(){let D=o.timeout?"timeout of "+o.timeout+"ms exceeded":"timeout exceeded";const V=o.transitional||au;o.timeoutErrorMessage&&(D=o.timeoutErrorMessage),r(new z(D,V.clarifyTimeoutError?z.ETIMEDOUT:z.ECONNABORTED,n,I)),I=null},i===void 0&&s.setContentType(null),"setRequestHeader"in I&&C.forEach(s.toJSON(),function(D,V){I.setRequestHeader(V,D)}),C.isUndefined(o.withCredentials)||(I.withCredentials=!!o.withCredentials),a&&a!=="json"&&(I.responseType=o.responseType),h&&([g,m]=fo(h,!0),I.addEventListener("progress",g)),c&&I.upload&&([d,y]=fo(c),I.upload.addEventListener("progress",d),I.upload.addEventListener("loadend",y)),(o.cancelToken||o.signal)&&(l=H=>{I&&(r(!H||H.type?new Hn(null,n,I):H),I.abort(),I=null)},o.cancelToken&&o.cancelToken.subscribe(l),o.signal&&(o.signal.aborted?l():o.signal.addEventListener("abort",l)));const L=yA(o.url);if(L&&be.protocols.indexOf(L)===-1){r(new z("Unsupported protocol "+L+":",z.ERR_BAD_REQUEST,n));return}I.send(i||null)})},vA=(n,e)=>{const{length:t}=n=n?n.filter(Boolean):[];if(e||t){let r=new AbortController,o;const i=function(h){if(!o){o=!0,a();const l=h instanceof Error?h:this.reason;r.abort(l instanceof z?l:new Hn(l instanceof Error?l.message:l))}};let s=e&&setTimeout(()=>{s=null,i(new z(`timeout ${e} of ms exceeded`,z.ETIMEDOUT))},e);const a=()=>{n&&(s&&clearTimeout(s),s=null,n.forEach(h=>{h.unsubscribe?h.unsubscribe(i):h.removeEventListener("abort",i)}),n=null)};n.forEach(h=>h.addEventListener("abort",i));const{signal:c}=r;return c.unsubscribe=()=>C.asap(a),c}},bA=function*(n,e){let t=n.byteLength;if(t<e){yield n;return}let r=0,o;for(;r<t;)o=r+e,yield n.slice(r,o),r=o},RA=async function*(n,e){for await(const t of kA(n))yield*bA(t,e)},kA=async function*(n){if(n[Symbol.asyncIterator]){yield*n;return}const e=n.getReader();try{for(;;){const{done:t,value:r}=await e.read();if(t)break;yield r}}finally{await e.cancel()}},Dc=(n,e,t,r)=>{const o=RA(n,e);let i=0,s,a=c=>{s||(s=!0,r&&r(c))};return new ReadableStream({async pull(c){try{const{done:h,value:l}=await o.next();if(h){a(),c.close();return}let d=l.byteLength;if(t){let g=i+=d;t(g)}c.enqueue(new Uint8Array(l))}catch(h){throw a(h),h}},cancel(c){return a(c),o.return()}},{highWaterMark:2})},Vo=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",fu=Vo&&typeof ReadableStream=="function",OA=Vo&&(typeof TextEncoder=="function"?(n=>e=>n.encode(e))(new TextEncoder):async n=>new Uint8Array(await new Response(n).arrayBuffer())),gu=(n,...e)=>{try{return!!n(...e)}catch{return!1}},PA=fu&&gu(()=>{let n=!1;const e=new Request(be.origin,{body:new ReadableStream,method:"POST",get duplex(){return n=!0,"half"}}).headers.has("Content-Type");return n&&!e}),Lc=64*1024,Vi=fu&&gu(()=>C.isReadableStream(new Response("").body)),go={stream:Vi&&(n=>n.body)};Vo&&(n=>{["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!go[e]&&(go[e]=C.isFunction(n[e])?t=>t[e]():(t,r)=>{throw new z(`Response type '${e}' is not supported`,z.ERR_NOT_SUPPORT,r)})})})(new Response);const NA=async n=>{if(n==null)return 0;if(C.isBlob(n))return n.size;if(C.isSpecCompliantForm(n))return(await new Request(be.origin,{method:"POST",body:n}).arrayBuffer()).byteLength;if(C.isArrayBufferView(n)||C.isArrayBuffer(n))return n.byteLength;if(C.isURLSearchParams(n)&&(n=n+""),C.isString(n))return(await OA(n)).byteLength},MA=async(n,e)=>{const t=C.toFiniteNumber(n.getContentLength());return t??NA(e)},xA=Vo&&(async n=>{let{url:e,method:t,data:r,signal:o,cancelToken:i,timeout:s,onDownloadProgress:a,onUploadProgress:c,responseType:h,headers:l,withCredentials:d="same-origin",fetchOptions:g}=uu(n);h=h?(h+"").toLowerCase():"text";let y=vA([o,i&&i.toAbortSignal()],s),m;const A=y&&y.unsubscribe&&(()=>{y.unsubscribe()});let I;try{if(c&&PA&&t!=="get"&&t!=="head"&&(I=await MA(l,r))!==0){let V=new Request(e,{method:"POST",body:r,duplex:"half"}),me;if(C.isFormData(r)&&(me=V.headers.get("content-type"))&&l.setContentType(me),V.body){const[ge,ke]=Nc(I,fo(Mc(c)));r=Dc(V.body,Lc,ge,ke)}}C.isString(d)||(d=d?"include":"omit");const M="credentials"in Request.prototype;m=new Request(e,{...g,signal:y,method:t.toUpperCase(),headers:l.normalize().toJSON(),body:r,duplex:"half",credentials:M?d:void 0});let L=await fetch(m);const H=Vi&&(h==="stream"||h==="response");if(Vi&&(a||H&&A)){const V={};["status","statusText","headers"].forEach(St=>{V[St]=L[St]});const me=C.toFiniteNumber(L.headers.get("content-length")),[ge,ke]=a&&Nc(me,fo(Mc(a),!0))||[];L=new Response(Dc(L.body,Lc,ge,()=>{ke&&ke(),A&&A()}),V)}h=h||"text";let D=await go[C.findKey(go,h)||"text"](L,n);return!H&&A&&A(),await new Promise((V,me)=>{hu(V,me,{data:D,headers:Ke.from(L.headers),status:L.status,statusText:L.statusText,config:n,request:m})})}catch(M){throw A&&A(),M&&M.name==="TypeError"&&/fetch/i.test(M.message)?Object.assign(new z("Network Error",z.ERR_NETWORK,n,m),{cause:M.cause||M}):z.from(M,M&&M.code,n,m)}}),Wi={http:YT,xhr:IA,fetch:xA};C.forEach(Wi,(n,e)=>{if(n){try{Object.defineProperty(n,"name",{value:e})}catch{}Object.defineProperty(n,"adapterName",{value:e})}});const Uc=n=>`- ${n}`,DA=n=>C.isFunction(n)||n===null||n===!1,pu={getAdapter:n=>{n=C.isArray(n)?n:[n];const{length:e}=n;let t,r;const o={};for(let i=0;i<e;i++){t=n[i];let s;if(r=t,!DA(t)&&(r=Wi[(s=String(t)).toLowerCase()],r===void 0))throw new z(`Unknown adapter '${s}'`);if(r)break;o[s||"#"+i]=r}if(!r){const i=Object.entries(o).map(([a,c])=>`adapter ${a} `+(c===!1?"is not supported by the environment":"is not available in the build"));let s=e?i.length>1?`since :
`+i.map(Uc).join(`
`):" "+Uc(i[0]):"as no adapter specified";throw new z("There is no suitable adapter to dispatch the request "+s,"ERR_NOT_SUPPORT")}return r},adapters:Wi};function pi(n){if(n.cancelToken&&n.cancelToken.throwIfRequested(),n.signal&&n.signal.aborted)throw new Hn(null,n)}function Hc(n){return pi(n),n.headers=Ke.from(n.headers),n.data=gi.call(n,n.transformRequest),["post","put","patch"].indexOf(n.method)!==-1&&n.headers.setContentType("application/x-www-form-urlencoded",!1),pu.getAdapter(n.adapter||wr.adapter)(n).then(function(r){return pi(n),r.data=gi.call(n,n.transformResponse,r),r.headers=Ke.from(r.headers),r},function(r){return lu(r)||(pi(n),r&&r.response&&(r.response.data=gi.call(n,n.transformResponse,r.response),r.response.headers=Ke.from(r.response.headers))),Promise.reject(r)})}const mu="1.8.4",Wo={};["object","boolean","number","function","string","symbol"].forEach((n,e)=>{Wo[n]=function(r){return typeof r===n||"a"+(e<1?"n ":" ")+n}});const Fc={};Wo.transitional=function(e,t,r){function o(i,s){return"[Axios v"+mu+"] Transitional option '"+i+"'"+s+(r?". "+r:"")}return(i,s,a)=>{if(e===!1)throw new z(o(s," has been removed"+(t?" in "+t:"")),z.ERR_DEPRECATED);return t&&!Fc[s]&&(Fc[s]=!0,console.warn(o(s," has been deprecated since v"+t+" and will be removed in the near future"))),e?e(i,s,a):!0}};Wo.spelling=function(e){return(t,r)=>(console.warn(`${r} is likely a misspelling of ${e}`),!0)};function LA(n,e,t){if(typeof n!="object")throw new z("options must be an object",z.ERR_BAD_OPTION_VALUE);const r=Object.keys(n);let o=r.length;for(;o-- >0;){const i=r[o],s=e[i];if(s){const a=n[i],c=a===void 0||s(a,i,n);if(c!==!0)throw new z("option "+i+" must be "+c,z.ERR_BAD_OPTION_VALUE);continue}if(t!==!0)throw new z("Unknown option "+i,z.ERR_BAD_OPTION)}}const zr={assertOptions:LA,validators:Wo},ut=zr.validators;let on=class{constructor(e){this.defaults=e,this.interceptors={request:new Oc,response:new Oc}}async request(e,t){try{return await this._request(e,t)}catch(r){if(r instanceof Error){let o={};Error.captureStackTrace?Error.captureStackTrace(o):o=new Error;const i=o.stack?o.stack.replace(/^.+\n/,""):"";try{r.stack?i&&!String(r.stack).endsWith(i.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+i):r.stack=i}catch{}}throw r}}_request(e,t){typeof e=="string"?(t=t||{},t.url=e):t=e||{},t=fn(this.defaults,t);const{transitional:r,paramsSerializer:o,headers:i}=t;r!==void 0&&zr.assertOptions(r,{silentJSONParsing:ut.transitional(ut.boolean),forcedJSONParsing:ut.transitional(ut.boolean),clarifyTimeoutError:ut.transitional(ut.boolean)},!1),o!=null&&(C.isFunction(o)?t.paramsSerializer={serialize:o}:zr.assertOptions(o,{encode:ut.function,serialize:ut.function},!0)),t.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),zr.assertOptions(t,{baseUrl:ut.spelling("baseURL"),withXsrfToken:ut.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let s=i&&C.merge(i.common,i[t.method]);i&&C.forEach(["delete","get","head","post","put","patch","common"],m=>{delete i[m]}),t.headers=Ke.concat(s,i);const a=[];let c=!0;this.interceptors.request.forEach(function(A){typeof A.runWhen=="function"&&A.runWhen(t)===!1||(c=c&&A.synchronous,a.unshift(A.fulfilled,A.rejected))});const h=[];this.interceptors.response.forEach(function(A){h.push(A.fulfilled,A.rejected)});let l,d=0,g;if(!c){const m=[Hc.bind(this),void 0];for(m.unshift.apply(m,a),m.push.apply(m,h),g=m.length,l=Promise.resolve(t);d<g;)l=l.then(m[d++],m[d++]);return l}g=a.length;let y=t;for(d=0;d<g;){const m=a[d++],A=a[d++];try{y=m(y)}catch(I){A.call(this,I);break}}try{l=Hc.call(this,y)}catch(m){return Promise.reject(m)}for(d=0,g=h.length;d<g;)l=l.then(h[d++],h[d++]);return l}getUri(e){e=fn(this.defaults,e);const t=du(e.baseURL,e.url,e.allowAbsoluteUrls);return su(t,e.params,e.paramsSerializer)}};C.forEach(["delete","get","head","options"],function(e){on.prototype[e]=function(t,r){return this.request(fn(r||{},{method:e,url:t,data:(r||{}).data}))}});C.forEach(["post","put","patch"],function(e){function t(r){return function(i,s,a){return this.request(fn(a||{},{method:e,headers:r?{"Content-Type":"multipart/form-data"}:{},url:i,data:s}))}}on.prototype[e]=t(),on.prototype[e+"Form"]=t(!0)});let UA=class yu{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(i){t=i});const r=this;this.promise.then(o=>{if(!r._listeners)return;let i=r._listeners.length;for(;i-- >0;)r._listeners[i](o);r._listeners=null}),this.promise.then=o=>{let i;const s=new Promise(a=>{r.subscribe(a),i=a}).then(o);return s.cancel=function(){r.unsubscribe(i)},s},e(function(i,s,a){r.reason||(r.reason=new Hn(i,s,a),t(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);t!==-1&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=r=>{e.abort(r)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;return{token:new yu(function(o){e=o}),cancel:e}}};function HA(n){return function(t){return n.apply(null,t)}}function FA(n){return C.isObject(n)&&n.isAxiosError===!0}const Yi={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Yi).forEach(([n,e])=>{Yi[e]=n});function Cu(n){const e=new on(n),t=Yd(on.prototype.request,e);return C.extend(t,on.prototype,e,{allOwnKeys:!0}),C.extend(t,e,null,{allOwnKeys:!0}),t.create=function(o){return Cu(fn(n,o))},t}const fe=Cu(wr);fe.Axios=on;fe.CanceledError=Hn;fe.CancelToken=UA;fe.isCancel=lu;fe.VERSION=mu;fe.toFormData=jo;fe.AxiosError=z;fe.Cancel=fe.CanceledError;fe.all=function(e){return Promise.all(e)};fe.spread=HA;fe.isAxiosError=FA;fe.mergeConfig=fn;fe.AxiosHeaders=Ke;fe.formToJSON=n=>cu(C.isHTMLForm(n)?new FormData(n):n);fe.getAdapter=pu.getAdapter;fe.HttpStatusCode=Yi;fe.default=fe;const{Axios:QA,AxiosError:JA,CanceledError:XA,isCancel:ZA,CancelToken:eE,VERSION:tE,all:nE,Cancel:rE,isAxiosError:oE,spread:iE,toFormData:sE,AxiosHeaders:aE,HttpStatusCode:cE,formToJSON:lE,getAdapter:hE,mergeConfig:dE}=fe,BA={class:"flex flex-row min-h-screen w-full gap-10 justify-center items-center py-10"},KA={class:"flex flex-col items-center space-y-10 w-1/4"},qA={key:0,class:"flex flex-col items-center space-y-4 w-full"},$A={class:"flex flex-col items-center w-1/4"},GA={class:"flex flex-col items-center w-1/4"},zA={__name:"App",setup(n){const e=Ot([]),t=Ot([]),r=Ot(!1),o=Ot(null),i=Ot(!0),s=async()=>{if(o.value)try{const l=new Date,d=l.getDay(),g=new Date(l);g.setDate(l.getDate()-(d===0?6:d-1)),g.setHours(0,0,0,0);const y=new Date(g);y.setDate(g.getDate()+4),y.setHours(23,59,59,999);const m=await fe.get(`https://graph.microsoft.com/v1.0/me/calendarView?startDateTime=${g.toISOString()}&endDateTime=${y.toISOString()}`,{headers:{Authorization:`Bearer ${o.value}`}});e.value=m.data.value;const A=new Date(l);A.setDate(l.getDate()-(d===0?6:d-1)+7),A.setHours(0,0,0,0);const I=new Date(A);I.setDate(A.getDate()+4),I.setHours(23,59,59,999);const M=await fe.get(`https://graph.microsoft.com/v1.0/me/calendarView?startDateTime=${A.toISOString()}&endDateTime=${I.toISOString()}`,{headers:{Authorization:`Bearer ${o.value}`}});t.value=M.data.value}catch(l){console.error("Error fetching events",l)}};let a;us(()=>{a=setInterval(s,6e4)}),gr(()=>{clearInterval(a)});const c=({isAuthenticated:l,accessToken:d})=>{r.value=l,o.value=d,l&&d&&s()},h=()=>{i.value=!1};return(l,d)=>(ye(),Ee("div",BA,[he("div",KA,[d[0]||(d[0]=he("img",{alt:"FMCI logo",class:"max-w-full h-auto",src:$g},null,-1)),i.value?(ye(),Ee("div",qA,[At(hT,{onAuthChanged:c}),he("button",{class:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 transition w-full",onClick:h}," Hide Login Button ")])):Nt("",!0)]),he("div",$A,[r.value?(ye(),Ii(np,{key:0,isAuthenticated:r.value,accessToken:o.value,events:e.value},null,8,["isAuthenticated","accessToken","events"])):Nt("",!0)]),he("div",GA,[r.value?(ye(),Ii(pp,{key:0,isAuthenticated:r.value,accessToken:o.value,events:t.value},null,8,["isAuthenticated","accessToken","events"])):Nt("",!0)])]))}},jA=ys(zA,[["__scopeId","data-v-37355045"]]);Bg(jA).mount("#app");
